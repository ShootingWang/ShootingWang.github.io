<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Skye</title>
  
  
  <link href="https://github.com/ShootingWang/ShootingWang.github.io/atom.xml" rel="self"/>
  
  <link href="https://github.com/ShootingWang/ShootingWang.github.io/"/>
  <updated>2023-03-09T13:51:44.712Z</updated>
  <id>https://github.com/ShootingWang/ShootingWang.github.io/</id>
  
  <author>
    <name>Skye</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>数据分析 | CUPED</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/DataAnalysis-ABTest-CUPED.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/DataAnalysis-ABTest-CUPED.html</id>
    <published>2023-02-22T16:11:32.000Z</published>
    <updated>2023-03-09T13:51:44.712Z</updated>
    
    <content type="html"><![CDATA[<center>Controlled-Experiment using Pre-Experiment Data</center><span id="more"></span><p>Work in Progress</p><h1 id="CUPED"><a class="header-anchor" href="#CUPED"></a>CUPED</h1><ul><li>用于降低AB实验中的方差</li></ul><h1 id="参考资料"><a class="header-anchor" href="#参考资料"></a>参考资料</h1><ul><li>Alex Deng, Ya Xu, Ron Kohavi, and Toby Walker. 2013. <a href="https://www.exp-platform.com/Documents/2013-02-CUPED-ImprovingSensitivityOfControlledExperiments.pdf">Improving the sensitivity of online controlled experiments by utilizing pre-experiment data</a>. In Proceedings of the sixth ACM international conference on Web search and data mining (WSDM '13). Association for Computing Machinery, New York, NY, USA, 123–132. <a href="https://doi.org/10.1145/2433396.2433413">https://doi.org/10.1145/2433396.2433413</a></li><li><a href="https://bytepawn.com/reducing-variance-in-ab-testing-with-cuped.html">Reducing variance in A/B testing with CUPED</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;center&gt;Controlled-Experiment using Pre-Experiment Data&lt;/center&gt;</summary>
    
    
    
    <category term="Data Analysis 数据分析" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Data-Analysis-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
    
    <category term="Data Analysis 数据分析" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Data-Analysis-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
    <category term="AB Test AB实验" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/AB-Test-AB%E5%AE%9E%E9%AA%8C/"/>
    
  </entry>
  
  <entry>
    <title>Python | 可视化 // Visualization</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/Visualization-PythonCase.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/Visualization-PythonCase.html</id>
    <published>2022-12-10T08:56:50.000Z</published>
    <updated>2023-04-01T08:38:08.627Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><meta name="referrer" content="no-referrer"><p>记录一些常用的Python绘图代码，为工作提效</p><h1 id="常用图表"><a href="#常用图表" class="headerlink" title="常用图表"></a>常用图表</h1><h2 id="堆叠柱状图"><a href="#堆叠柱状图" class="headerlink" title="堆叠柱状图"></a>堆叠柱状图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Load Data</span></span><br><span class="line">df = sns.load_dataset(<span class="string">&#x27;diamonds&#x27;</span>)</span><br><span class="line">df.head()  <span class="comment">## 预览数据，见下图</span></span><br><span class="line"></span><br><span class="line">df.cut.unique()</span><br><span class="line"><span class="comment"># [&#x27;Ideal&#x27;, &#x27;Premium&#x27;, &#x27;Good&#x27;, &#x27;Very Good&#x27;, &#x27;Fair&#x27;]</span></span><br><span class="line"><span class="comment"># Categories (5, object): [&#x27;Ideal&#x27;, &#x27;Premium&#x27;, &#x27;Very Good&#x27;, &#x27;Good&#x27;, &#x27;Fair&#x27;]</span></span><br><span class="line"></span><br><span class="line">df.clarity.unique()</span><br><span class="line"><span class="comment"># [&#x27;SI2&#x27;, &#x27;SI1&#x27;, &#x27;VS1&#x27;, &#x27;VS2&#x27;, &#x27;VVS2&#x27;, &#x27;VVS1&#x27;, &#x27;I1&#x27;, &#x27;IF&#x27;]</span></span><br><span class="line"><span class="comment"># Categories (8, object): [&#x27;IF&#x27;, &#x27;VVS1&#x27;, &#x27;VVS2&#x27;, &#x27;VS1&#x27;, &#x27;VS2&#x27;, &#x27;SI1&#x27;, &#x27;SI2&#x27;, &#x27;I1&#x27;]</span></span><br><span class="line"></span><br><span class="line">df.color.unique()</span><br><span class="line"><span class="comment"># [&#x27;E&#x27;, &#x27;I&#x27;, &#x27;J&#x27;, &#x27;H&#x27;, &#x27;F&#x27;, &#x27;G&#x27;, &#x27;D&#x27;]</span></span><br><span class="line"><span class="comment"># Categories (7, object): [&#x27;D&#x27;, &#x27;E&#x27;, &#x27;F&#x27;, &#x27;G&#x27;, &#x27;H&#x27;, &#x27;I&#x27;, &#x27;J&#x27;]</span></span><br></pre></td></tr></table></figure><meta name="referrer" content="no-referrer"><p><img src="/Visualization-PythonCase/df_diamonds_head.png" alt="Data_diamonds_Preview"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">sns.set_theme(style=<span class="string">&#x27;ticks&#x27;</span>)</span><br><span class="line">f, ax = plt.subplots(figsize=(<span class="number">7</span>, <span class="number">5</span>))</span><br><span class="line">sns.despine(f)</span><br><span class="line"></span><br><span class="line">sns.histplot(</span><br><span class="line">    df,</span><br><span class="line">    x=<span class="string">&#x27;price&#x27;</span>,</span><br><span class="line">    hue=<span class="string">&#x27;cut&#x27;</span>,</span><br><span class="line">    multiple=<span class="string">&#x27;stack&#x27;</span>, <span class="comment">## 堆叠</span></span><br><span class="line">    palette=<span class="string">&#x27;light:m_r&#x27;</span>,</span><br><span class="line">    edgecolor=<span class="string">&#x27;.3&#x27;</span>,</span><br><span class="line">    linewidth=<span class="number">.5</span>,</span><br><span class="line">    log_scale=<span class="literal">True</span>,</span><br><span class="line">)</span><br><span class="line">ax.xaxis.set_major_formatter(mpl.ticker.ScalarFormatter())</span><br><span class="line">ax.set_xticks([<span class="number">500</span>, <span class="number">1000</span>, <span class="number">2000</span>, <span class="number">5000</span>, <span class="number">10000</span>])</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">&#x27;histplot_stack.jpg&#x27;</span>, dpi=<span class="number">400</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><meta name="referrer" content="no-referrer"><p><img src="/Visualization-PythonCase/histplot_stack.jpg" alt="堆积柱状图"></p><h2 id="词云图"><a href="#词云图" class="headerlink" title="词云图"></a>词云图</h2><h2 id="双轴图"><a href="#双轴图" class="headerlink" title="双轴图"></a>双轴图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd </span><br><span class="line"></span><br><span class="line"><span class="comment">## Data</span></span><br><span class="line">df = pd.DataFrame([</span><br><span class="line">    [-<span class="number">2</span>, <span class="number">10</span>, <span class="number">0.8</span>],</span><br><span class="line">    [-<span class="number">1</span>, <span class="number">20</span>, <span class="number">0.7</span>], </span><br><span class="line">    [<span class="number">0</span>, <span class="number">30</span>, <span class="number">0.6</span>],</span><br><span class="line">    [<span class="number">1</span>, <span class="number">40</span>, <span class="number">0.5</span>],</span><br><span class="line">    [<span class="number">2</span>, <span class="number">50</span>, <span class="number">0.4</span>],</span><br><span class="line">    [<span class="number">3</span>, <span class="number">60</span>, <span class="number">0.3</span>]</span><br><span class="line">], columns=[<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y1&#x27;</span>, <span class="string">&#x27;y2&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">## Visualization</span></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line">ax1 = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">ax1.bar(df.x, df.y1, color=<span class="string">&#x27;g&#x27;</span>, label=<span class="string">&#x27;y1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax2 = ax1.twinx()</span><br><span class="line">ax2.plot(df.x, df.y2, color=<span class="string">&#x27;r&#x27;</span>, label=<span class="string">&#x27;y2&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Legend</span></span><br><span class="line">fig.legend(loc=<span class="number">1</span>, bbox_to_anchor=(<span class="number">0.1</span>, <span class="number">1</span>), bbox_transform=ax1.transAxes)</span><br><span class="line"></span><br><span class="line">ax1.set_xlabel(<span class="string">r&quot;X axis&quot;</span>)</span><br><span class="line">ax1.set_ylabel(<span class="string">r&quot;Y1&quot;</span>)</span><br><span class="line">ax2.set_ylabel(<span class="string">r&quot;Y2&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">&#x27;Twin_Xaxes.jpg&#x27;</span>, dpi=<span class="number">400</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><meta name="referrer" content="no-referrer"><p><img src="/Visualization-PythonCase/twin_xaxes.png" alt="双轴图"></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Python" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Python/"/>
    
    
    <category term="Python" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Python/"/>
    
    <category term="Visualization 可视化" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Visualization-%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>可视化 | Colors</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/Visualization-Colors.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/Visualization-Colors.html</id>
    <published>2022-08-17T15:16:35.000Z</published>
    <updated>2023-03-27T15:30:56.279Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><meta name="referrer" content="no-referrer"><h1 id="色彩网站"><a href="#色彩网站" class="headerlink" title="色彩网站"></a>色彩网站</h1><h1 id="色彩搭配"><a href="#色彩搭配" class="headerlink" title="色彩搭配"></a>色彩搭配</h1><h2 id="撞色"><a href="#撞色" class="headerlink" title="撞色"></a>撞色</h2><p>两色</p><table><tbody>    <tr>        <th>颜色名称A</th>        <th>颜色A</th>        <th align="right">颜色B</th>        <th>颜色名称B</th>    </tr>    <tr>        <td>克莱因蓝</td>        <td bgcolor="#002EA6">#002EA6</td>        <td bgcolor="#FFE78F">#FFE78F</td>        <td>拿坡里黄</td>    </tr>    <tr>        <td>中国红</td>        <td bgcolor="#D7000F">#D7000F</td>        <td bgcolor="#F1F2E5">#F1F2E5</td>        <td>鱼肚白</td>    </tr>    <tr>        <td>爱马仕橙</td>        <td bgcolor="#FF770F">#FF770F</td>        <td bgcolor="#000010">#000010</td>        <td>漆黑</td>    </tr>    <tr>        <td>茶绿</td>        <td bgcolor="#91B822">#91B822</td>        <td bgcolor="#FFE76F">#FFE76F</td>        <td>松花</td>    </tr>    <tr>        <td>蒂芙尼蓝</td>        <td bgcolor="#80D1C8">#80D1C8</td>        <td bgcolor="#FFD4A9">#FFD4A9</td>        <td>浅驼色</td>    </tr>    <tr>        <td>莫兰迪绿</td>        <td bgcolor="#8BA583">#8BA583</td>        <td bgcolor="#CDA59E">#CDA59E</td>        <td>莫兰迪粉</td>    </tr></tbody></table><h2 id="色系全集"><a href="#色系全集" class="headerlink" title="色系全集"></a>色系全集</h2><table><tbody>    <tr>        <th width="20%">色系</th>        <th width="20%">颜色名称</th>        <th width="20%">十六进制色值</th>        <th width="40%">颜色</th>    </tr>    <tr>        <td>黑色 Black</td>        <td>漆黑</td>        <td>#000010</td>        <td bgcolor="#000010"></td>    </tr>    <tr>        <td>蓝色 Blue</td>        <td>克莱因蓝</td>        <td>#002EA6</td>        <td bgcolor="#002EA6"></td>    </tr>    <tr>        <td>蓝色 Blue</td>        <td>蒂芙尼蓝</td>        <td>#80D1C8</td>        <td bgcolor="#80D1C8"></td>    </tr>    <tr>        <td>红色 Red</td>        <td>中国红</td>        <td>#D7000F</td>        <td bgcolor="#D7000F"></td>    </tr>    <tr>        <td>粉色 Pink</td>        <td>莫兰迪粉</td>        <td>#CDA59E</td>        <td bgcolor="#CDA59E"></td>    </tr>    <tr>        <td>橙色 Orange</td>        <td>爱马仕橙</td>        <td>#FF770F</td>        <td bgcolor="#FF770F"></td>    </tr>    <tr>        <td>黄色 Yellow</td>        <td>松花</td>        <td>#FFE76F</td>        <td bgcolor="#FFE76F"></td>    </tr>    <tr>        <td>黄色 Yellow</td>        <td>拿坡里黄</td>        <td>#FFE78F</td>        <td bgcolor="#FFE78F"></td>    </tr>    <tr>        <td>黄色 Yellow</td>        <td>浅驼色</td>        <td>#FFD4A9</td>        <td bgcolor="#FFD4A9"></td>    </tr>    <tr>        <td>绿色 Green</td>        <td>茶绿</td>        <td>#91B822</td>        <td bgcolor="#91B822"></td>    </tr>    <tr>        <td>绿色 Green</td>        <td>莫兰迪绿</td>        <td>#8BA583</td>        <td bgcolor="#8BA583"></td>    </tr>    <tr>        <td>白色 White</td>        <td>鱼肚白</td>        <td>#F1F2E5</td>        <td bgcolor="#F1F2E5"></td>    </tr></tbody></table><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://blog.csdn.net/wkd_007/article/details/124435722">Markdown: 漂亮表格(表格背景色、跨行、跨列)</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Everything" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Everything/"/>
    
    
    <category term="Color" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Color/"/>
    
  </entry>
  
  <entry>
    <title>R语言 | MASS package</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/R%E8%AF%AD%E8%A8%80-MASS.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/R%E8%AF%AD%E8%A8%80-MASS.html</id>
    <published>2022-05-04T11:30:15.000Z</published>
    <updated>2022-05-04T11:32:59.131Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><h1 id="MASS"><a class="header-anchor" href="#MASS"></a>MASS</h1><h2 id="fractions"><a class="header-anchor" href="#fractions"></a>fractions()</h2><p>将数据以分数形式输出</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">library<span class="punctuation">(</span>MASS<span class="punctuation">)</span></span><br><span class="line">fractions<span class="punctuation">(</span><span class="number">1.2</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># [1] 6/5</span></span><br></pre></td></tr></table></figure><h2 id="mvrnorm"><a class="header-anchor" href="#mvrnorm"></a>mvrnorm()</h2><p>生成多元正态分布随机数</p><h1 id="参考资料"><a class="header-anchor" href="#参考资料"></a>参考资料</h1>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="R语言" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/R%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="R" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/R/"/>
    
  </entry>
  
  <entry>
    <title>数据分析 | MECE原则 // MECE Criteria</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/DataAnalysis-MECE.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/DataAnalysis-MECE.html</id>
    <published>2022-04-29T08:22:28.000Z</published>
    <updated>2023-03-27T16:02:19.050Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><meta name="referrer" content="no-referrer"><h1 id="MECE原则"><a class="header-anchor" href="#MECE原则"></a>MECE原则</h1><p>MECE（Mutually Exclusive Collectively Exhautive），相互独立、完全穷尽。该原则于20世纪60年代末由麦肯锡公司的芭芭拉·明托（Barbara Minto）提出。</p><p>很多分析模型，都遵循了MECE原则，如时间管理矩阵、乔韩窗口理论<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>、波士顿矩阵、<a href="/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90-SWOT%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B.html" title="SWOT分析">SWOT分析</a>等。</p><h2 id="用途"><a class="header-anchor" href="#用途"></a>用途</h2><ul><li>梳理逻辑</li><li>打开思路、寻找出路</li></ul><h2 id="拆解思路"><a class="header-anchor" href="#拆解思路"></a>拆解思路</h2><ul><li>自上而下的视角：回到起点，重新定义问题，改变问法<ol><li>思考想要的最终目标是什么</li><li>在MECE分析框架中，首先分析构成问题的要素</li></ol></li><li>自下而上的视角：在头脑风暴后、在归纳整理时，审慎判断想法建议的“最小公倍数”</li><li>中间层次视角：将构成问题的要素分解出来后，有意识地寻找隐含假设，突破自我设限</li></ul><h2 id="注意事项"><a class="header-anchor" href="#注意事项"></a>注意事项</h2><ul><li>先定义好问题，再开始拆解/梳理逻辑</li></ul><h1 id="参考资料"><a class="header-anchor" href="#参考资料"></a>参考资料</h1><ul><li>[WikiPedia]<a href="https://zh.wikipedia.org/wiki/MECE%E5%8E%9F%E5%88%99">MECE原则</a></li><li>[36Kr]<a href="36kr.com/p/1655992920734086">职场人必懂的MECE原则</a></li><li><a href="https://strategyu.co/wtf-is-mece-mutually-exclusive-collectively-exhaustive/">What is the MECE Principle? Understanding Mutually Exclusive, Collectively Exhaustive</a></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>乔韩窗口理论：是指美国心理学家Joseph Luft和Harrington Ingham提出的关于人自我认识的窗口理论。 <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Data Analysis 数据分析" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Data-Analysis-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
    
    <category term="Data Analysis 数据分析" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Data-Analysis-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>English | 常用英语词汇表 // Common Glossary</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/English-CommonGlossary.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/English-CommonGlossary.html</id>
    <published>2022-04-25T10:44:58.000Z</published>
    <updated>2022-05-03T09:44:25.719Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><h1 id="时间-Time"><a class="header-anchor" href="#时间-Time"></a>时间 Time</h1><h2 id="星期-Week-日-Day"><a class="header-anchor" href="#星期-Week-日-Day"></a>星期 Week / 日 Day</h2><table><thead><tr><th style="text-align:center">中文名 Chinese Items</th><th style="text-align:left">英文全称 English</th><th style="text-align:left">英文简称 English Abbreviation</th><th style="text-align:left">例句 Examples</th></tr></thead><tbody><tr><td style="text-align:center">星期日</td><td style="text-align:left">Sunday</td><td style="text-align:left">Sun.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">星期一</td><td style="text-align:left">Monday</td><td style="text-align:left">Mon.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">星期二</td><td style="text-align:left">Tuesday</td><td style="text-align:left">Tue.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">星期三</td><td style="text-align:left">Wednesday</td><td style="text-align:left">Wed.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">星期四</td><td style="text-align:left">Thursday</td><td style="text-align:left">Thu.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">星期五</td><td style="text-align:left">Friday</td><td style="text-align:left">Fri.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">星期六</td><td style="text-align:left">Saturday</td><td style="text-align:left">Sat.</td><td style="text-align:left"></td></tr></tbody></table><h2 id="季度-Quarter"><a class="header-anchor" href="#季度-Quarter"></a>季度 Quarter</h2><p>第 $X$（ $X$ =一、二、三、四）季度：the first/second/third/forth quarter</p><h2 id="月份-Month"><a class="header-anchor" href="#月份-Month"></a>月份 Month</h2><table><thead><tr><th style="text-align:center">中文名 Chinese Items</th><th style="text-align:left">英文全称 English</th><th style="text-align:left">英文简称 English Abbreviation</th><th style="text-align:left">例句 Examples</th></tr></thead><tbody><tr><td style="text-align:center">一月</td><td style="text-align:left">January</td><td style="text-align:left">Jan.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">二月</td><td style="text-align:left">February</td><td style="text-align:left">Feb.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">三月</td><td style="text-align:left">March</td><td style="text-align:left">Mar.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">四月</td><td style="text-align:left">April</td><td style="text-align:left">Apr.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">五月</td><td style="text-align:left">May</td><td style="text-align:left">May.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">六月</td><td style="text-align:left">June</td><td style="text-align:left">Jun.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">七月</td><td style="text-align:left">July</td><td style="text-align:left">Jul.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">八月</td><td style="text-align:left">August</td><td style="text-align:left">Aug.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">九月</td><td style="text-align:left">September</td><td style="text-align:left">Sep.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">十月</td><td style="text-align:left">October</td><td style="text-align:left">Oct.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">十一月</td><td style="text-align:left">November</td><td style="text-align:left">Nov.</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">十二月</td><td style="text-align:left">December</td><td style="text-align:left">Dec.</td><td style="text-align:left"></td></tr></tbody></table><h1 id="节日-Festivals"><a class="header-anchor" href="#节日-Festivals"></a>节日 Festivals</h1><h2 id="中国节日-Chinese-Festivals"><a class="header-anchor" href="#中国节日-Chinese-Festivals"></a>中国节日 Chinese Festivals</h2><h2 id="印尼节日-ID-Festivals"><a class="header-anchor" href="#印尼节日-ID-Festivals"></a>印尼节日 ID Festivals</h2><table><thead><tr><th style="text-align:left">英文名称 English</th><th style="text-align:left">中文名称 Chinese</th><th style="text-align:left">备注 Remark</th></tr></thead><tbody><tr><td style="text-align:left">Ramadan</td><td style="text-align:left">斋月</td><td style="text-align:left">伊斯兰教历的九月</td></tr></tbody></table><table><thead><tr><th style="text-align:center">中文名 Chinese Items</th><th style="text-align:left">英文全称 English</th><th style="text-align:left">英文简称 English Abbreviation</th><th style="text-align:left">例句 Examples</th></tr></thead><tbody><tr><td style="text-align:center"></td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table><table><thead><tr><th style="text-align:left">英文名称 English</th><th style="text-align:left">中文名称 Chinese</th><th style="text-align:left">备注 Remark</th></tr></thead><tbody><tr><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"></td></tr></tbody></table>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Everything" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Everything/"/>
    
    
    <category term="English" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/English/"/>
    
  </entry>
  
  <entry>
    <title>数据分析 | 层次分析法（APH）// Analytic Hierarchy Process</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90-%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90-%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95.html</id>
    <published>2022-04-24T12:26:32.000Z</published>
    <updated>2022-10-12T04:44:21.341Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><h1 id="层次分析法-APH"><a class="header-anchor" href="#层次分析法-APH"></a>层次分析法 APH</h1><p><strong>层次分析法（APH，Analytic Hierarchy Process）</strong>，又名<strong>专家分析法</strong>，1971年由Thomas L. Saaty（匹兹堡大学教授）提出，主要应用在不确定情况下及具有多个评估准则的决策问题上。</p><h2 id="本质-Essence"><a class="header-anchor" href="#本质-Essence"></a>本质 Essence</h2><p>层次分析法的本质：</p><ul><li>分层</li><li>分权</li></ul><p>整个过程可以由<strong>专家团</strong>参与完成。</p><h3 id="分层-Hierarchy"><a class="header-anchor" href="#分层-Hierarchy"></a>分层 Hierarchy</h3><p>分层，将一个复杂指标分解为若干子指标，每个子指标再各自分解为更小的子指标，逐层分解，直到可度量的末级指标。</p><h3 id="分权-Weighting"><a class="header-anchor" href="#分权-Weighting"></a>分权 Weighting</h3><p>分权，给同一层级的指标匹配权重，通过两两比较的方式降低比较难度。</p><h1 id="步骤-Procedures"><a class="header-anchor" href="#步骤-Procedures"></a>步骤 Procedures</h1><ol><li>建立层次结构模型</li><li>构造指标的成对比较矩阵</li><li>计算权向量并进行一致性检验</li><li>计算组合权向量，并做组合一致性检验</li></ol><h2 id="建立层次结构模型"><a class="header-anchor" href="#建立层次结构模型"></a>建立层次结构模型</h2><p>拆分为$n$个指标：$\lbrace x_1, x_2, \cdots, x_n \rbrace$</p><div class="note default">            <p>假设可拆解为3个指标/元素：$\lbrace x_1, x_2, x_3 \rbrace$</p>          </div><h2 id="构造指标成对比较矩阵"><a class="header-anchor" href="#构造指标成对比较矩阵"></a>构造指标成对比较矩阵</h2><p>用相对权重$a_{ij}$表示第$i$个指标/元素与第$j$个指标/元素相对上一层某个元素的重要性，构成成对比较矩阵/判断矩阵$\mathbf{A}=\left(a_{ij}\right)_{n\times n}$。其中，</p><ul><li>$a_{ij} &gt; 0$（$i,j=1,\cdots,n$）</li><li>$a_{ii}=1$（$i=1,\cdots, n$）</li><li>$a_{ij}=\frac{1}{a_{ji} }$（$i,j=1,\cdots,n$）</li></ul><p>对比时采用相对尺度，以尽可能减少性质不同的因素相互比较的困难，以提高准确度。由专家对同一层次内$n$个指标的相对重要性（两两因素间）打分。相对重要性的比例标度取1-9之间（可参考下表）。</p><table><thead><tr><th style="text-align:center">比较值</th><th style="text-align:left">定义 Meaning</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:left">两个因素相比，具有同等重要性</td></tr><tr><td style="text-align:center">3</td><td style="text-align:left">两个因素相比，前者比后者<strong>稍微重要</strong></td></tr><tr><td style="text-align:center">5</td><td style="text-align:left">两个因素相比，前者比后者<strong>明显重要</strong></td></tr><tr><td style="text-align:center">7</td><td style="text-align:left">两个因素相比，前者比后者<strong>强烈重要</strong></td></tr><tr><td style="text-align:center">9</td><td style="text-align:left">两个因素相比，前者比后者<strong>极端重要</strong></td></tr><tr><td style="text-align:center">2,4,6,8</td><td style="text-align:left">上述相邻判断的中间值</td></tr></tbody></table><div class="note default">            <table><thead><tr><th style="text-align:center"></th><th style="text-align:center">$x_1$</th><th style="text-align:center">$x_2$</th><th style="text-align:center">$x_3$</th></tr></thead><tbody><tr><td style="text-align:center">$x_1$</td><td style="text-align:center">1</td><td style="text-align:center">5</td><td style="text-align:center">7</td></tr><tr><td style="text-align:center">$x_2$</td><td style="text-align:center">1/5</td><td style="text-align:center">1</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">$x_3$</td><td style="text-align:center">1/7</td><td style="text-align:center">1/3</td><td style="text-align:center">1</td></tr></tbody></table><ol><li>先按列标准化</li><li>再求行平均值</li></ol><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">$x_1$</th><th style="text-align:center">$x_2$</th><th style="text-align:center">$x_3$</th><th style="text-align:center">行平均值</th></tr></thead><tbody><tr><td style="text-align:center">$x_1$</td><td style="text-align:center">$\frac{35}{47}$</td><td style="text-align:center">$\frac{15}{19}$</td><td style="text-align:center">$\frac{7}{11}$</td><td style="text-align:center">157/217 即0.7235023</td></tr><tr><td style="text-align:center">$x_2$</td><td style="text-align:center">$\frac{7}{47}$</td><td style="text-align:center">$\frac{3}{19}$</td><td style="text-align:center">$\frac{3}{11}$</td><td style="text-align:center">5693/29469 即0.1931861</td></tr><tr><td style="text-align:center">$x_3$</td><td style="text-align:center">$\frac{5}{47}$</td><td style="text-align:center">$\frac{1}{19}$</td><td style="text-align:center">$\frac{1}{11}$</td><td style="text-align:center">2455/29469 即0.08330788</td></tr></tbody></table>          </div><h2 id="一致性-Consistency"><a class="header-anchor" href="#一致性-Consistency"></a>一致性 Consistency</h2><p>一致性指标$CI$（Consistency Index）：<br>$$CI=\frac{\lambda_{\max} - n}{ n - 1 }$$</p><p>其中，</p><ul><li>$\lambda_{\max}$：指标矩阵特征值的最大值</li><li>$n$：指标个数</li></ul><div class="note success">            <p>矩阵$\mathbf{A}$的特征值即行列式（determinant）$\left| \lambda \mathbf{I} - \mathbf{A} \right| = 0$的解。</p><p>\begin{equation}<br>\begin{aligned}<br>&amp; \left| \lambda \mathbf{I} - \mathbf{A} \right| = 0 \\<br>\iff &amp; \left|<br>\begin{array}{ccc}<br>\lambda - a_{11} &amp; -a_{12} &amp; -a_{13} \\<br>-a_{21} &amp; \lambda - a_{22} &amp; -a_{23} \\<br>-a_{31} &amp; -a_{32} &amp; \lambda - a_{33}<br>\end{array}<br>\right| = 0 \\<br>\iff &amp; (\lambda - a_{11}) (-1)^{1+1} \left| \begin{array}{cc} \lambda - a_{22} &amp; -a_{23} \\ -a_{32} &amp; \lambda - a_{33} \end{array} \right| + (-a_{21})(-1)^{2+1} \left| \begin{array}{cc} -a_{12} &amp; -a_{13} \\ -a_{32} &amp; \lambda - a_{33} \end{array} \right| \\<br>&amp; + (-a_{31})(-1)^{3+1} \left| \begin{array}{cc} -a_{12} &amp; -a_{13} \\ \lambda - a_{22} &amp; -a_{23} \end{array} \right|=0 \\<br>\iff &amp; (\lambda - a_{11})\left[ (\lambda - a_{22})(\lambda - a_{33}) - a_{23}a_{32} \right] + a_{21} \left[ a_{13}a_{32} - a_{12}(\lambda - a_{33}) \right] \\<br>&amp; - a_{31} \left[ a_{12}a_{23} - a_{13}(\lambda - a_{22}) \right] = 0<br>\end{aligned}<br>\end{equation}</p><p>使用Python求解矩阵的特征值：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">A = np.array(</span><br><span class="line">    [</span><br><span class="line">        矩阵元素</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line">eigenvalue, featurevector = np.linalg.eig(mat)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;特征值:&#x27;</span>, eigenvalue)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;特征向量：&#x27;</span>, featurevector)</span><br></pre></td></tr></table></figure>          </div><div class="note default">            <p>$$<br>\mathbf{A}=<br>\left(<br>\begin{array}{ccc}<br>1 &amp; 5 &amp; 7 \\<br>\frac{1}{5} &amp; 1 &amp; 3 \\<br>\frac{1}{7} &amp; \frac{1}{3} &amp; 1<br>\end{array}<br>\right)<br>$$</p><p>使用Python求解矩阵的特征值：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">mat = np.array(</span><br><span class="line">    [</span><br><span class="line">        [<span class="number">1</span>, <span class="number">5</span>, <span class="number">7</span>],</span><br><span class="line">        [<span class="number">1</span>/<span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">1</span>/<span class="number">7</span>, <span class="number">1</span>/<span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line">eigenvalue, featurevector = np.linalg.eig(mat)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;特征值:&#x27;</span>, eigenvalue)</span><br><span class="line"><span class="comment"># 特征值: [ 3.06488758+0.j         -0.03244379+0.44477021j -0.03244379-0.44477021j]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;特征向量：&#x27;</span>, featurevector)</span><br><span class="line"><span class="comment"># 特征向量： [[ 0.96280192+0.j          0.96280192+0.j          0.96280192-0.j        ]</span></span><br><span class="line"><span class="comment">#  [ 0.24825501+0.j         -0.1241275 +0.21499514j -0.1241275 -0.21499514j]</span></span><br><span class="line"><span class="comment">#  [ 0.1066861 +0.j         -0.05334305-0.09239287j -0.05334305+0.09239287j]]</span></span><br></pre></td></tr></table></figure><p>则$\lambda_{\max} = 3.065$。因此一致性指标为<br>$$CI=\frac{3.065 - 5}{5 - 1} = -0.48375$$</p>          </div><h2 id="随机一致性-Random-Consistency"><a class="header-anchor" href="#随机一致性-Random-Consistency"></a>随机一致性 Random Consistency</h2><p>随机构造$N$个判断矩阵，并计算一致性指标$CI$，则随机一致性指标$RI$（Random Index）为<br>$$RI = \frac{1}{N}\sum_{i=1}^N CI_i$$</p><h2 id="一致性检验-Consistency-Check"><a class="header-anchor" href="#一致性检验-Consistency-Check"></a>一致性检验 Consistency Check</h2><p>一致性比率$CR$（Consistency Ratio）：<br>$$CR = \frac{CI}{RI}$$</p><p>一般认为，$CR&lt;0.1$为一致性检验通过。</p><h1 id="实现代码"><a class="header-anchor" href="#实现代码"></a>实现代码</h1><h2 id="Python"><a class="header-anchor" href="#Python"></a>Python</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##### 自定义函数 #####</span></span><br><span class="line"><span class="comment">## 计算一致性指标CI</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">CI_func</span>(<span class="params">A</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    A：判断矩阵</span></span><br><span class="line"><span class="string">    n：指标个数</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    n = <span class="built_in">len</span>(A)</span><br><span class="line">    eigenValue, eigenVector = np.linalg.eig(A)</span><br><span class="line">    lambdaMax = <span class="built_in">max</span>(eigenValue)</span><br><span class="line">    CI = (lambdaMax - n) / (n - <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> CI</span><br><span class="line"></span><br><span class="line"><span class="comment">## 计算随机一致性指标RI</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">matrix_gen</span>(<span class="params">seed</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    随机构造判断矩阵</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    待补充</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">RI_func</span>(<span class="params">A, N</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    计算随机一致性指标RI</span></span><br><span class="line"><span class="string">    A：判断矩阵</span></span><br><span class="line"><span class="string">    N：随机次数</span></span><br><span class="line"><span class="string">    n：指标个数</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    n = <span class="built_in">len</span>(A)</span><br><span class="line">    ciRandom = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">        B = matrix_gen(seed=i)</span><br><span class="line">        B_ci = CI_func(B)</span><br><span class="line">        ciRandom.append(B_ci) </span><br><span class="line">    RI = <span class="built_in">sum</span>(ciRandom) / N</span><br><span class="line">    <span class="keyword">return</span> RI</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##### 一致性检验实操 ######</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment">## 判断矩阵</span></span><br><span class="line">A = np.array([</span><br><span class="line">    矩阵元素</span><br><span class="line">])</span><br><span class="line">ci = CI_func(A)</span><br><span class="line">N = <span class="number">500</span>  <span class="comment"># 随机次数</span></span><br><span class="line">ri = RI_func(A, N)</span><br><span class="line">cr = ci / ri</span><br><span class="line"><span class="keyword">if</span> cr &lt; <span class="number">0.1</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;一致性检验通过，一致性比率CR=&#123;&#125;&lt;0.1&quot;</span>.<span class="built_in">format</span>(cr))</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;一致性检验不通过，一致性比率CR=&#123;&#125;&quot;</span>.<span class="built_in">format</span>(cr))</span><br></pre></td></tr></table></figure><h1 id="参考资料-References"><a class="header-anchor" href="#参考资料-References"></a>参考资料 References</h1><ul><li><a href="cnblogs.com/yhll/p/9967726.html">[博客园] APH层次分析法（附Python示例代码）</a></li><li><a href="https://baijiahao.baidu.com/s?id=1651259201959322004">[BaiJiaHao] 层次分析法（AHP）研究方法与步骤分解及案例详解</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Data Analysis 数据分析" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Data-Analysis-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
    
    <category term="Data Analysis 数据分析" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Data-Analysis-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>因果推断 | 倾向得分匹配（PSM）// Propensity Score Matching</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/DataAnalysis-CausalInference-PSM.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/DataAnalysis-CausalInference-PSM.html</id>
    <published>2022-03-23T07:54:29.000Z</published>
    <updated>2023-09-21T16:15:19.588Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><center></center><span id="more"></span><h1 id="倾向评分匹配"><a class="header-anchor" href="#倾向评分匹配"></a>倾向评分匹配</h1><p>倾向评分匹配/倾向性得分匹配（PSM，Propensity Score Matching）</p><ul><li>通过观测变量对实验组的预测概率进行匹配</li><li>处理观察性研究（observational study）的经典方法</li><li>可以解决内生性问题</li></ul><p>适用情形：</p><ol><li>在观察研究中，对照组与实验组中可直接比较的个体数量很少</li><li>由于衡量个体特征的参数很多，所以想从对照组中选出一个跟实验组在各项参数上都相同或相近的子集作对比变得非常困难</li><li>对照组和实验组之间的差异可能是选择性偏差导致的，不一定是干预策略导致的</li></ol><p><img src="/ShootingWang/ShootingWang.github.io/Propensity-Score-Graphic.jpeg" alt="Why Propensity Score Matching?"></p><blockquote><p>Picture from <a href="https://www.summitllc.us/propensity-score-matching">PROPENSITY SCORE MATCHING（PSM图解）</a></p></blockquote><div class="note warning">            <p><strong>倾向性得分</strong>：一个用户/样本属于实验组的“倾向性”（给定$x$的情况下，样本进入实验组的条件概率）。<br>$$e(x)=P\left(T=1|X=x\right)$$<br>其中，</p><ul><li>$T$：干预</li><li>$X$：样本属性/协变量</li><li>$Y$：观测结果/结果变量</li></ul>          </div><div class="note success">            <p><strong>Theorem 1: 平衡性质（Balancing Property）</strong>:<br>$$T_i \perp X_i \mid e(X_i)$$</p>          </div><div class="note success">            <p><strong>Theorem 2: 无混淆（Unconfoundedness）</strong>：<br>$$ T_i \perp Y_{i0}, Y_{i1} \mid e(X_i)$$</p>          </div><blockquote><ul><li>倾向性得分是一种“Balancing score”</li><li>对于倾向性得分$e(X_i)$相同的一群用户$i$：<ul><li>干预$T_i$和特征$X_i$是独立的</li><li>干预$T_i$和潜在结果$Y_{i0}, Y_{i1} $是独立的</li></ul></li></ul></blockquote><ul><li>当协变量$X$不影响干预变量$T$、但影响结果变量$Y$时，引入协变量可以提高干预精度</li><li>当遗漏了重要的协变量时，会导致偏差</li></ul><h2 id="前提-假设"><a class="header-anchor" href="#前提-假设"></a>前提/假设</h2><p>PSM需满足以下两个前提/假设：</p><ol><li>条件独立假设：控制了协变量后，样本是否接收干预与潜在结果相互独立</li><li>共同支撑条件：若匹配结果较为理想，匹配后的两条核密度曲线较为相近</li></ol><h1 id="匹配方法"><a class="header-anchor" href="#匹配方法"></a>匹配方法</h1><p>PSM通过统计模型对每个样本计算倾向性得分，再按照倾向得分是否接近进行匹配。<br>以分组变量为解释变量（分类变量），样本属性（可能会影响到结果的变量）作为被解释变量，进行<a href="/MachineLearning-Classification-LogisticRegression.html" title="逻辑回归（Logistic Regression）">逻辑回归（Logistic Regression）</a>，从而计算每个样本的倾向性得分。</p><ul><li>一对一匹配：在控制组中选择与实验组样本最相近的<strong>单个</strong>样本进行匹配<ul><li>优点：匹配的样本之间较为相近，偏差较小</li><li>缺点：样本匹配量小、估计的方差较大</li></ul></li><li>一对多匹配：在控制组中选择<strong>多个</strong>与实验组样本相近的样本进行匹配<ul><li>缺点：在控制组中找到的第2个、第3个、……样本与实验组样本的近似性会减弱，会增大估计的偏差</li></ul></li></ul><blockquote><p>控制组样本量较多时，可以考虑使用一对多匹配</p></blockquote><table><thead><tr><th style="text-align:left">匹配方法</th><th style="text-align:left">特点</th><th style="text-align:center">偏差</th><th style="text-align:center">方差</th></tr></thead><tbody><tr><td style="text-align:left">最近邻匹配</td><td style="text-align:left">增加近邻数，可重复使用</td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:left">半径匹配</td><td style="text-align:left">容忍度增加</td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:left">核匹配</td><td style="text-align:left">带宽增加</td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:left">卡尺匹配</td><td style="text-align:left">容忍度增加</td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:left">分块匹配法</td><td style="text-align:left"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table><h2 id="最近邻匹配"><a class="header-anchor" href="#最近邻匹配"></a>最近邻匹配</h2><p>最近邻匹配（Nearest-neighbor Matching）：选择控制组中倾向性得分最接近的样本作为匹配样本</p><p>干预样本$i$与无干预样本$j$相匹配：<br>$$<br>\begin{equation}<br>\mid p_i - p_j \mid = \min_{k \in { T=0 } } \left\lbrace \mid p_i - p_k \mid \right\rbrace<br>\end{equation}<br>$$</p><h2 id="半径匹配"><a class="header-anchor" href="#半径匹配"></a>半径匹配</h2><p>半径匹配（Radius Matching）：</p><h2 id="核匹配"><a class="header-anchor" href="#核匹配"></a>核匹配</h2><p>核匹配（Kernel Matching）</p><h2 id="卡尺匹配"><a class="header-anchor" href="#卡尺匹配"></a>卡尺匹配</h2><p>卡尺匹配（Caliper Matching）：给定误差 $\delta &gt; 0$，干预样本$i$与无干预样本$j$相匹配<br>$$<br>\begin{equation}<br>\delta &gt; \mid p_i - p_j \mid = \min_{k\in { T=0 } } \left\lbrace \mid p_i - p_k \mid \right\rbrace<br>\end{equation}<br>$$</p><ul><li>可能会有样本找不到匹配对象</li></ul><h2 id="分块匹配法"><a class="header-anchor" href="#分块匹配法"></a>分块匹配法</h2><p>分块匹配法（Stratification）</p><h1 id="匹配效果检验"><a class="header-anchor" href="#匹配效果检验"></a>匹配效果检验</h1><p>应用因果推断方法尽可能保证干预组与控制组的分布较为相近（尽可能在已观测到的变量上同质），尽可能去“模拟”随机试验的情况，需要结合一定检验方法来检验“模拟”效果，以保障因果推断评估结果的稳健性（Robust）。</p><h2 id="共同支撑检验"><a class="header-anchor" href="#共同支撑检验"></a>共同支撑检验</h2><p>共同支撑检验（Common Support Test）：为了提高匹配质量，仅保留倾向得分重叠部分的个体（会损失一定的样本量）。</p><p>方法：</p><ul><li>比较匹配前后的核密度图</li><li>绘制条形图，显示倾向得分的共同取值范围</li></ul><h2 id="平衡性检验"><a class="header-anchor" href="#平衡性检验"></a>平衡性检验</h2><p>平衡性检验（Balance Diagnose）：观察匹配后的各个变量的均值是否有显著差异。计算每个变量的干预组和虚拟控制组的差异（SMD，Standardized Mean Difference）。<br>d<br>$$<br>\begin{equation}<br>\mathrm{ SMD } = \frac{ \bar{ X }<em>{ \mathrm{ Treat } } - \bar{ X }</em>{ \mathrm{ Control } } }{ \sqrt{ \frac{1}{2} \left(  s^2_{ \mathrm{ Treat } } + s^2_{ \mathrm{ Control } } \right) } }<br>\end{equation}<br>$$</p><blockquote><ul><li>相关论文：Zhang, Z., Kim, H. J., Lonjon, G., &amp; Zhu, Y. (2019). <a href="https://sci-hub.se/10.21037/atm.2018.12.10">Balance diagnostics after propensity score matching</a>. Annals of translational medicine, 7(1).</li><li>经验表明，如果一个变量的SMD不超过0.1，一般认为这个变量的匹配质量可以接受；否则，需要结合经验来判断该变量是否可以剔除。</li></ul></blockquote><h2 id="反驳式检验"><a class="header-anchor" href="#反驳式检验"></a>反驳式检验</h2><p>反驳式检验（Refute）：</p><ul><li><strong>添加随机混杂因子</strong>：添加随机的混杂因子（控制特征），如果因果效应变化较小，表明PSM结果较为稳健</li><li><strong>安慰剂检验</strong>：将干预替换为随机变量，如果因果效应接近于0，表明PSM结果较为稳健</li></ul><p>反驳式检验本质上是<strong>弱检验</strong>，检验通过表明PSM估计结果在已有的控制变量上能够保持较好的稳健性；检验不通过，则认为PSM估计结果是不可用的，需要重新评估。</p><h2 id="敏感性分析"><a class="header-anchor" href="#敏感性分析"></a>敏感性分析</h2><p>敏感性分析（Sensitivity Analysis）：TBD</p><h1 id="Pros-Cons"><a class="header-anchor" href="#Pros-Cons"></a>Pros &amp; Cons</h1><h2 id="优势-Strengths"><a class="header-anchor" href="#优势-Strengths"></a>优势 Strengths</h2><ul><li>在计算倾向性得分时，考虑了交互项（interaction terms）</li><li>可用于二分变量（dichotomous variables）和连续变量（continuous variables）</li><li>较少依赖于p值或其他特定于模型的假设</li></ul><h2 id="局限性-Limitations"><a class="header-anchor" href="#局限性-Limitations"></a>局限性 Limitations</h2><ul><li>需要大样本（PSA works best in large samples to obtain a good balance of covariates.）</li><li>要求控制组和实验组有较大的共同取值范围（Group overlap must be substantial to enable appropriate matching.）</li><li>要尽可能控制可观测的变量，如果存在不可观测的协变量，会导致“隐形偏差”（The most serious limitation is that PSA only controls for measured covariates. Matching on observed covariates may open backdoor paths in unobserved covariates and exacerbate hidden bias.）</li><li>没有考虑样本的聚集性，邻域层级的研究可能会存在问题（Does not take into account clustering (problematic for neighborhood-level research).）</li></ul><h1 id="Python"><a class="header-anchor" href="#Python"></a>Python</h1><h2 id="pymatch"><a class="header-anchor" href="#pymatch"></a>pymatch</h2><ul><li>GitHub地址：<a href="https://github.com/benmiroglio/pymatch">https://github.com/benmiroglio/pymatch</a><ul><li>不要使用<code>pip install pymatch</code>安装，应下载<a href="https://github.com/benmiroglio/pymatch/tree/master/pymatch">修正版</a>至<code>pymatch</code>同名文件夹，直接加载使用</li></ul></li><li><code>compare_continuous</code>会报错，相应解决方案可参考<a href="https://github.com/benmiroglio/pymatch/issues/36">https://github.com/benmiroglio/pymatch/issues/36</a></li><li>可使用<code>causalinference</code>包计算ATE（参考<a href="https://matheusfacure.github.io/python-causality-handbook/11-Propensity-Score.html#propensity-score-matching">Causal Inference fro the Brave and True - Propensity Score - Propensity Score matching</a>）</li></ul><h2 id="causalinference"><a class="header-anchor" href="#causalinference"></a>causalinference</h2><ul><li>官方地址：<a href="https://causalinferenceinpython.org/">https://causalinferenceinpython.org/</a></li><li>GitHub地址：<a href="https://github.com/laurencium/Causalinference">https://github.com/laurencium/Causalinference</a></li><li>计算ATE：<a href="https://matheusfacure.github.io/python-causality-handbook/11-Propensity-Score.html#propensity-score-matching">https://matheusfacure.github.io/python-causality-handbook/11-Propensity-Score.html#propensity-score-matching</a></li></ul><h2 id="DoWhy"><a class="header-anchor" href="#DoWhy"></a>DoWhy</h2><ul><li>官方地址：<a href="https://www.pywhy.org/dowhy">https://www.pywhy.org/dowhy</a></li></ul><blockquote><p>相关资料：</p><ul><li>[ZhiHu]<a href="https://zhuanlan.zhihu.com/p/321808640">因果推断框架 DoWhy入门</a></li></ul></blockquote><h2 id="实例"><a class="header-anchor" href="#实例"></a>实例</h2><h3 id="伪Demo（pymatch）"><a class="header-anchor" href="#伪Demo（pymatch）"></a>伪Demo（pymatch）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 载入需要的库</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pymatch.Matcher <span class="keyword">import</span> Matcher</span><br><span class="line"><span class="keyword">from</span> causalinference.causal <span class="keyword">import</span> CausalModel</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> xgboost <span class="keyword">import</span> XGBClassifier, plot_importance</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> roc_auc_score, accuracy_score, precision_score, recall_score, f1_score</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"><span class="keyword">from</span> statsmodels.stats.power <span class="keyword">import</span> GofChisquarePower</span><br><span class="line"><span class="keyword">from</span> statsmodels.stats.proportion <span class="keyword">import</span> proportion_effectsize <span class="keyword">as</span> es</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> IPython.display <span class="keyword">import</span> display</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义检验函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chi2_test</span>(<span class="params">df1, df2, col</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    卡方检验</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    n_table = []  <span class="comment">## 存储列联表</span></span><br><span class="line">    <span class="comment">## 待检验指标的类别枚举值</span></span><br><span class="line">    vals1 = <span class="built_in">set</span>(df1[col].unique())</span><br><span class="line">    vals2 = <span class="built_in">set</span>(df2[col].unique())</span><br><span class="line">    col_values = <span class="built_in">set</span>(vals1 + vals2)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> val <span class="keyword">in</span> col_values:</span><br><span class="line">        <span class="keyword">if</span> val <span class="keyword">in</span> vals1:</span><br><span class="line">            a = <span class="built_in">len</span>(df1[df1[col] == val])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            a = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> val <span class="keyword">in</span> vals2:</span><br><span class="line">            b = <span class="built_in">len</span>(df2[df2[col] == val])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            b = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        n_table.append([a, b])</span><br><span class="line"></span><br><span class="line">    stat, pval, d_f, expected = stats.chi2_contingency(n_table)</span><br><span class="line">    <span class="keyword">return</span> pval</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">continuous_test</span>(<span class="params">df1, df2, col</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    连续指标的显著性检验</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    result = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(df1[col]) &lt; <span class="number">30</span> <span class="keyword">or</span> <span class="built_in">len</span>(df2[col]) &lt; <span class="number">30</span>:</span><br><span class="line">        result = [-<span class="number">1.0</span>, <span class="string">&#x27;样本量过少&#x27;</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment">## 1. 正态性检验</span></span><br><span class="line">        norm_stat1, norm_pval1 = stats.kstest(df1[col], <span class="string">&#x27;norm&#x27;</span>)</span><br><span class="line">        norm_stat2, norm_pval2 = stats.kstest(df2[col], <span class="string">&#x27;norm&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> norm_pval1 &gt; <span class="number">0.05</span> <span class="keyword">and</span> norm_pval2 &gt; <span class="number">0.05</span>:</span><br><span class="line">            <span class="comment">## 正态性检验通过</span></span><br><span class="line">            <span class="comment">## 2.1 方差齐性检验</span></span><br><span class="line">            F = df1[col].var() / df2[col].var()</span><br><span class="line">            n1 = <span class="built_in">len</span>(df1[col]) - <span class="number">1</span></span><br><span class="line">            n2 = <span class="built_in">len</span>(df2[col]) - <span class="number">1</span></span><br><span class="line">            F_pval = <span class="number">1</span> - stats.f.cdf(F, n1, n2)</span><br><span class="line">            <span class="keyword">if</span> F_pval &lt; <span class="number">0.05</span>:</span><br><span class="line">                <span class="comment">## 方差齐性检验不通过</span></span><br><span class="line">                <span class="comment">## 3.1 不等方差T检验（Welch T Test）</span></span><br><span class="line">                stat, pval = stats.ttest_ind(df1[col], df2[col], equal_var=<span class="literal">False</span>)</span><br><span class="line">                test_method = <span class="string">&#x27;Welch-t检验&#x27;</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment">## 方差齐性检验通过</span></span><br><span class="line">                <span class="comment">## 3.2 等方差T检验（Student T Test）</span></span><br><span class="line">                stat, pval = stats.ttest_ind(df1[col], df2[col], equal_var=<span class="literal">True</span>)</span><br><span class="line">                test_method = <span class="string">&#x27;Student-t检验&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment">## 2.2 MWU非参数检验</span></span><br><span class="line">            stat, pval = stats.mannwhitneyu(df1[col], df2[col], alternative=<span class="string">&#x27;two-sided&#x27;</span>)</span><br><span class="line">            test_method = <span class="string">&#x27;Mann-Whitney-U检验&#x27;</span></span><br><span class="line">        result = [pval, test_method]</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据准备</span></span><br><span class="line">df = pd.read_csv(<span class="string">&quot;xxx.csv&quot;</span>, encoding=<span class="string">&#x27;utf_8_sig&#x27;</span>)</span><br><span class="line">df.head()</span><br><span class="line"></span><br><span class="line"><span class="built_in">len</span>(df)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 一些数据处理</span></span><br><span class="line"><span class="comment">## 1. 缺失值填补</span></span><br><span class="line">cols_fn0 = [</span><br><span class="line">    <span class="comment">## 一些需要用0填补缺失值的列名</span></span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> col <span class="keyword">in</span> cols_fn0:</span><br><span class="line">    df[col] = df[col].fillna(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 2. 剔除多余的列</span></span><br><span class="line">cols_drop = [</span><br><span class="line">    <span class="comment">## 需要剔除的列</span></span><br><span class="line">]</span><br><span class="line">df = df.drop(cols_drop, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 特征重要性（筛选变量）</span></span><br><span class="line">cols_x = [</span><br><span class="line">    <span class="comment">## 特征</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">cols_y = [</span><br><span class="line">    <span class="comment">## 因变量</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">X = df[cols_x]</span><br><span class="line">y = df[cols_y]</span><br><span class="line"><span class="comment">## 如果特征的量纲较大，应先进行标准化</span></span><br><span class="line">arr_mean = np.mean(X)</span><br><span class="line">arr_std = np.std(X, ddof=<span class="number">1</span>)</span><br><span class="line">newX = (X - arr_mean) / arr_std</span><br><span class="line">X = newX</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;XGBoost Start!&quot;</span>)</span><br><span class="line"><span class="comment"># 训练模型</span></span><br><span class="line">model = XGBoostClassifier()</span><br><span class="line">model.fit(X, y)</span><br><span class="line"></span><br><span class="line">df_ip = pd.DataFrame(columns=[<span class="string">&#x27;Feature&#x27;</span>, <span class="string">&#x27;Importance&#x27;</span>])</span><br><span class="line">df_ip[<span class="string">&#x27;Feature&#x27;</span>] = X.columns</span><br><span class="line">df_ip[<span class="string">&#x27;Importance&#x27;</span>] = model.feature_importances_</span><br><span class="line">df_ip = df_ip.sort_values(by=[<span class="string">&#x27;Importance&#x27;</span>], ascending=<span class="literal">False</span>)</span><br><span class="line">df_ip = df_ip.reset_index(dro=p=<span class="literal">True</span>)</span><br><span class="line">df_ip.to_csv(<span class="string">&#x27;xxxxx_xgboost_feature_importance.csv&#x27;</span>, index=<span class="literal">False</span>, encoding=<span class="string">&#x27;utf_8_sig&#x27;</span>)</span><br><span class="line"></span><br><span class="line">cols_ip = df_ip.Feature[:<span class="number">10</span>].to_list()  <span class="comment">## 选取TOP 10特征最为PSM的控制特征</span></span><br><span class="line">display(df_ip)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;XGBoost Done!\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">cols_cate = [</span><br><span class="line">    <span class="comment">## Category特征</span></span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> col <span class="keyword">in</span> cols_cate:</span><br><span class="line">    <span class="keyword">if</span> col <span class="keyword">in</span> cols_ip:</span><br><span class="line">        df[col] = df[col].astype(<span class="string">&#x27;category&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># PSM</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;PSM Start!&quot;</span>)</span><br><span class="line">df1 = df[cols_ip + [<span class="string">&#x27;new_index&#x27;</span>, <span class="string">&#x27;group_name&#x27;</span>]]</span><br><span class="line">experiment = df1[df1.group_name == <span class="string">&#x27;experiment&#x27;</span>].reset_index(drop=<span class="literal">True</span>)</span><br><span class="line">control = df1[df1.group_name == <span class="string">&#x27;control&#x27;</span>].reset_index(drop=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">experiment[<span class="string">&#x27;treatment&#x27;</span>] = <span class="number">1</span></span><br><span class="line">control[<span class="string">&#x27;treatment&#x27;</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">cols_exclude = [</span><br><span class="line">    <span class="comment">## 不参与PSM的特征</span></span><br><span class="line">]</span><br><span class="line">m = Matcher(experiment, control, yvar=<span class="string">&#x27;treatment&#x27;</span>, exclude=cols_exclude)</span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">2022</span>) <span class="comment">## 设置随机seed，以便后续结果能够复现</span></span><br><span class="line">m.fit_scores(balance=<span class="literal">True</span>, nmodels=<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;1. Fit Scores Done!&quot;</span>)</span><br><span class="line"></span><br><span class="line">m.predict_scores()</span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>, <span class="number">5</span>), dpi=<span class="number">200</span>)</span><br><span class="line">m.plot_scores()</span><br><span class="line">fig.savefig(<span class="string">&#x27;xxx_PSM_scores_plot.jpg&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;2. Scores Plot Done!&quot;</span>)</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>, <span class="number">5</span>), dpi=<span class="number">200</span>)</span><br><span class="line">m.tune_threshold(method=<span class="string">&#x27;random&#x27;</span>)</span><br><span class="line">fig.savefig(<span class="string">&#x27;xxx_PSM_tune_threshold_plot.jpg&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;3. Tune Threshold Plot Done!&quot;</span>)</span><br><span class="line"></span><br><span class="line">m.<span class="keyword">match</span>(method=<span class="string">&#x27;min&#x27;</span>, nmatches=<span class="number">1</span>, threshold=<span class="number">0.0001</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;4. Match Done!&quot;</span>)</span><br><span class="line"></span><br><span class="line">df_freq = m.record_frequency()</span><br><span class="line">df_freq.to_csv(<span class="string">&#x27;xxx_PSM_record_frequency.csv&#x27;</span>, index=<span class="literal">False</span>, encoding=<span class="string">&#x27;utf_8_sig&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;5. Record Frequency Done!&quot;</span>)</span><br><span class="line"></span><br><span class="line">df_matched = m.matched_data.sort_values(<span class="string">&#x27;match_id&#x27;</span>)  <span class="comment">## 匹配后的数据</span></span><br><span class="line">df_matched.to_csv(<span class="string">&#x27;xxx_PSM_matched_data.csv&#x27;</span>, index=<span class="literal">False</span>, encoding=<span class="string">&#x27;utf_8_sig&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;6. Matched Data Saving Done!&quot;</span>)</span><br><span class="line"></span><br><span class="line">df_original = m.data  <span class="comment">## 源数据（含scores）</span></span><br><span class="line">df_original.to_csv(<span class="string">&#x27;xxx_PSM_original_data.csv&#x27;</span>, index=<span class="literal">False</span>, encoding=<span class="string">&#x27;utf_8_sig&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;7. Original Data Saving Done!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(<span class="built_in">set</span>(cols_cate).intersection(<span class="built_in">set</span>(cols_ip))) &lt; <span class="built_in">len</span>(cols_ip):</span><br><span class="line">    cc_continuous = m.compare_continuous(return_table=<span class="literal">True</span>)</span><br><span class="line">    cc_continuous.to_csv(<span class="string">&#x27;xxx_PSM_compare_continuous.csv&#x27;</span>, index=<span class="literal">False</span>, encoding=<span class="string">&#x27;utf_8_sig&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;8.1 Compare Continuous Done!&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> <span class="built_in">len</span>(<span class="built_in">set</span>(cols_cate).intersection(<span class="built_in">set</span>(cols_ip))) &gt; <span class="number">0</span>:</span><br><span class="line">    cc_categorical = m.compare_categorical(return_table=<span class="literal">True</span>)</span><br><span class="line">    cc_categorical.to_csv(<span class="string">&#x27;xxx_PSM_compare_categorical.csv&#x27;</span>, index=<span class="literal">False</span>, encoding=<span class="string">&#x27;utf_8_sig&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;8.2 Compare Categorical Done!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;All Complete! ^ _ ^\n&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>计算显著性差异所需的最小样本量：<a href="#">Post not found: 数据分析-ABtest</a>「样本量」小节</li></ul><h1 id="R"><a class="header-anchor" href="#R"></a>R</h1><h2 id="Matching"><a class="header-anchor" href="#Matching"></a>Matching</h2><ul><li>使用<code>Matching</code>包实现PSM</li></ul><blockquote><p>参见：<a href="http://sekhon.berkeley.edu/papers/MatchingJSS.pdf">R: Sekhon J S . Multivariate and Propensity Score Matching Software with Automated Balance Optimization: The Matching package for R [J]. Journal of statistical software, 2011, 42(i07).</a></p></blockquote><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 安装Matching包 / install Matching package</span></span><br><span class="line">install.packages<span class="punctuation">(</span><span class="string">&quot;Matching&quot;</span><span class="punctuation">,</span> dependencies<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line">install.packages<span class="punctuation">(</span><span class="string">&quot;rgenoud&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 加载Matching包 / library Matching package</span></span><br><span class="line">library<span class="punctuation">(</span><span class="string">&quot;Matching&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 加载lalonde数据集 / load lalonde dataset</span></span><br><span class="line">data<span class="punctuation">(</span><span class="string">&quot;lalonde&quot;</span><span class="punctuation">)</span></span><br><span class="line">attach<span class="punctuation">(</span>lalonde<span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="匹配"><a class="header-anchor" href="#匹配"></a>匹配</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Y <span class="operator">&lt;-</span> lalonde<span class="operator">$</span>re78</span><br><span class="line">Tr <span class="operator">&lt;-</span> lalonde<span class="operator">$</span>treat</span><br><span class="line"></span><br><span class="line"><span class="comment">## first propensity score model:</span></span><br><span class="line">glm1 <span class="operator">&lt;-</span> glm<span class="punctuation">(</span>Tr <span class="operator">~</span> age <span class="operator">+</span> educ <span class="operator">+</span> black <span class="operator">+</span> hisp <span class="operator">+</span> married <span class="operator">+</span> nodegr <span class="operator">+</span></span><br><span class="line">              <span class="operator">+</span> re74 <span class="operator">+</span> re75<span class="punctuation">,</span> family <span class="operator">=</span> binomial<span class="punctuation">,</span> data <span class="operator">=</span> lalonde<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## one-to-one matching </span></span><br><span class="line">rr1 <span class="operator">&lt;-</span> Match<span class="punctuation">(</span>Y <span class="operator">=</span> Y<span class="punctuation">,</span> Tr <span class="operator">=</span> Tr<span class="punctuation">,</span> X <span class="operator">=</span> glm1<span class="operator">$</span>fitted<span class="punctuation">,</span> M <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure><h3 id="匹配效果"><a class="header-anchor" href="#匹配效果"></a>匹配效果</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br></pre></td><td class="code"><pre><span class="line">MatchBalance<span class="punctuation">(</span>Tr <span class="operator">~</span> age <span class="operator">+</span> I<span class="punctuation">(</span>age<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span> <span class="operator">+</span> educ <span class="operator">+</span> I<span class="punctuation">(</span>educ<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span> <span class="operator">+</span> black <span class="operator">+</span> hisp <span class="operator">+</span></span><br><span class="line">               <span class="operator">+</span> married <span class="operator">+</span> nodegr <span class="operator">+</span> re74 <span class="operator">+</span> I<span class="punctuation">(</span>re74<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span> <span class="operator">+</span> re75 <span class="operator">+</span> I<span class="punctuation">(</span>re75<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span> <span class="operator">+</span> u74 <span class="operator">+</span> u75 <span class="operator">+</span></span><br><span class="line">               <span class="operator">+</span> I<span class="punctuation">(</span>re74 <span class="operator">*</span> re75<span class="punctuation">)</span> <span class="operator">+</span> I<span class="punctuation">(</span>age <span class="operator">*</span> nodegr<span class="punctuation">)</span> <span class="operator">+</span> I<span class="punctuation">(</span>educ <span class="operator">*</span> re74<span class="punctuation">)</span> <span class="operator">+</span> I<span class="punctuation">(</span>educ <span class="operator">*</span> re75<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">             match.out <span class="operator">=</span> rr1<span class="punctuation">,</span> nboots <span class="operator">=</span> <span class="number">1000</span><span class="punctuation">,</span> data <span class="operator">=</span> lalonde<span class="punctuation">)</span></span><br><span class="line"><span class="comment"># ***** (V1) age *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........     25.816       25.816 </span></span><br><span class="line"><span class="comment"># mean control..........     25.054       25.692 </span></span><br><span class="line"><span class="comment"># std mean diff.........     10.655       1.7342 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....    0.94054      0.73837 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          1            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....          7            9 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.025364     0.021893 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.022193     0.020349 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........   0.065177     0.061047 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     1.0278        1.083 </span></span><br><span class="line"><span class="comment"># T-test p-value........    0.26594      0.84975 </span></span><br><span class="line"><span class="comment"># KS Bootstrap p-value..      0.541        0.364 </span></span><br><span class="line"><span class="comment"># KS Naive p-value......     0.7481      0.54314 </span></span><br><span class="line"><span class="comment"># KS Statistic..........   0.065177     0.061047 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V2) I(age^2) *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........     717.39       717.39 </span></span><br><span class="line"><span class="comment"># mean control..........     677.32        707.1 </span></span><br><span class="line"><span class="comment"># std mean diff.........     9.2937       2.3873 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....     56.076       46.901 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....         43            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....        721          909 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.025364     0.021893 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.022193     0.020349 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........   0.065177     0.061047 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     1.0115       1.0072 </span></span><br><span class="line"><span class="comment"># T-test p-value........    0.33337      0.80409 </span></span><br><span class="line"><span class="comment"># KS Bootstrap p-value..      0.541        0.364 </span></span><br><span class="line"><span class="comment"># KS Naive p-value......     0.7481      0.54314 </span></span><br><span class="line"><span class="comment"># KS Statistic..........   0.065177     0.061047 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V3) educ *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........     10.346       10.346 </span></span><br><span class="line"><span class="comment"># mean control..........     10.088       10.146 </span></span><br><span class="line"><span class="comment"># std mean diff.........     12.806       9.9664 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....    0.40541      0.23256 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....          2            2 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.028698     0.016611 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.012682     0.010174 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........    0.12651     0.061047 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     1.5513       1.2344 </span></span><br><span class="line"><span class="comment"># T-test p-value........    0.15017       0.1842 </span></span><br><span class="line"><span class="comment"># KS Bootstrap p-value..      0.014        0.187 </span></span><br><span class="line"><span class="comment"># KS Naive p-value......   0.062873      0.54314 </span></span><br><span class="line"><span class="comment"># KS Statistic..........    0.12651     0.061047 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V4) I(educ^2) *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........     111.06       111.06 </span></span><br><span class="line"><span class="comment"># mean control..........     104.37       106.19 </span></span><br><span class="line"><span class="comment"># std mean diff.........     17.012        12.39 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....     8.7189       4.7384 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....         60           60 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.028698     0.016611 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.012682     0.010174 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........    0.12651     0.061047 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     1.6625       1.2999 </span></span><br><span class="line"><span class="comment"># T-test p-value........   0.053676     0.080965 </span></span><br><span class="line"><span class="comment"># KS Bootstrap p-value..      0.014        0.187 </span></span><br><span class="line"><span class="comment"># KS Naive p-value......   0.062873      0.54314 </span></span><br><span class="line"><span class="comment"># KS Statistic..........    0.12651     0.061047 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V5) black *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........    0.84324      0.84324 </span></span><br><span class="line"><span class="comment"># mean control..........    0.82692      0.86847 </span></span><br><span class="line"><span class="comment"># std mean diff.........     4.4767      -6.9194 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....   0.016216     0.026163 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....          1            1 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........  0.0081601     0.013081 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........  0.0081601     0.013081 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........    0.01632     0.026163 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....    0.92503       1.1572 </span></span><br><span class="line"><span class="comment"># T-test p-value........    0.64736      0.40214 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V6) hisp *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........   0.059459     0.059459 </span></span><br><span class="line"><span class="comment"># mean control..........    0.10769      0.04955 </span></span><br><span class="line"><span class="comment"># std mean diff.........    -20.341       4.1792 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....   0.048649     0.011628 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....          1            1 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.024116     0.005814 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.024116     0.005814 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........   0.048233     0.011628 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....    0.58288       1.1875 </span></span><br><span class="line"><span class="comment"># T-test p-value........   0.064043      0.46063 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V7) married *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........    0.18919      0.18919 </span></span><br><span class="line"><span class="comment"># mean control..........    0.15385      0.18423 </span></span><br><span class="line"><span class="comment"># std mean diff.........     8.9995       1.2617 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....   0.037838     0.026163 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....          1            1 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.017672     0.013081 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.017672     0.013081 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........   0.035343     0.026163 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     1.1802       1.0207 </span></span><br><span class="line"><span class="comment"># T-test p-value........    0.33425      0.89497 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V8) nodegr *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........    0.70811      0.70811 </span></span><br><span class="line"><span class="comment"># mean control..........    0.83462      0.76757 </span></span><br><span class="line"><span class="comment"># std mean diff.........    -27.751      -13.043 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....    0.12432     0.043605 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....          1            1 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.063254     0.021802 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.063254     0.021802 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........    0.12651     0.043605 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     1.4998       1.1585 </span></span><br><span class="line"><span class="comment"># T-test p-value........  0.0020368    0.0071385 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V9) re74 *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........     2095.6       2095.6 </span></span><br><span class="line"><span class="comment"># mean control..........       2107       2193.3 </span></span><br><span class="line"><span class="comment"># std mean diff.........   -0.23437      -2.0004 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....     487.98       869.16 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....       8413        10305 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.019223     0.054701 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........     0.0158     0.050872 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........   0.047089      0.12209 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     0.7381      0.75054 </span></span><br><span class="line"><span class="comment"># T-test p-value........    0.98186      0.84996 </span></span><br><span class="line"><span class="comment"># KS Bootstrap p-value..      0.567   &lt; 2.22e-16 </span></span><br><span class="line"><span class="comment"># KS Naive p-value......    0.97023     0.011858 </span></span><br><span class="line"><span class="comment"># KS Statistic..........   0.047089      0.12209 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V10) I(re74^2) *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........   28141434     28141434 </span></span><br><span class="line"><span class="comment"># mean control..........   36667413     36454686 </span></span><br><span class="line"><span class="comment"># std mean diff.........    -7.4721      -7.2857 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....   13311731     14189969 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....  365146387    566243911 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.019223     0.054701 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........     0.0158     0.050872 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........   0.047089      0.12209 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....    0.50382      0.85502 </span></span><br><span class="line"><span class="comment"># T-test p-value........    0.51322      0.49446 </span></span><br><span class="line"><span class="comment"># KS Bootstrap p-value..      0.567   &lt; 2.22e-16 </span></span><br><span class="line"><span class="comment"># KS Naive p-value......    0.97023     0.011858 </span></span><br><span class="line"><span class="comment"># KS Statistic..........   0.047089      0.12209 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V11) re75 *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........     1532.1       1532.1 </span></span><br><span class="line"><span class="comment"># mean control..........     1266.9       2179.9 </span></span><br><span class="line"><span class="comment"># std mean diff.........     8.2363      -20.125 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....     367.61       590.34 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....     2110.2       8092.9 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.050834     0.050338 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.061954     0.049419 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........    0.10748     0.098837 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     1.0763      0.56563 </span></span><br><span class="line"><span class="comment"># T-test p-value........    0.38527     0.079002 </span></span><br><span class="line"><span class="comment"># KS Bootstrap p-value..      0.046         0.02 </span></span><br><span class="line"><span class="comment"># KS Naive p-value......    0.16449     0.069435 </span></span><br><span class="line"><span class="comment"># KS Statistic..........    0.10748     0.098837 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V12) I(re75^2) *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........   12654753     12654753 </span></span><br><span class="line"><span class="comment"># mean control..........   11196530     22975211 </span></span><br><span class="line"><span class="comment"># std mean diff.........     2.6024      -18.418 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....    2840830      7689340 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....  101657197    208799779 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.050834     0.050338 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.061954     0.049419 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........    0.10748     0.098837 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     1.4609      0.68801 </span></span><br><span class="line"><span class="comment"># T-test p-value........    0.77178      0.10936 </span></span><br><span class="line"><span class="comment"># KS Bootstrap p-value..      0.046         0.02 </span></span><br><span class="line"><span class="comment"># KS Naive p-value......    0.16449     0.069435 </span></span><br><span class="line"><span class="comment"># KS Statistic..........    0.10748     0.098837 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V13) u74 *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........    0.70811      0.70811 </span></span><br><span class="line"><span class="comment"># mean control..........       0.75      0.72027 </span></span><br><span class="line"><span class="comment"># std mean diff.........    -9.1895      -2.6679 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....   0.037838     0.081395 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....          1            1 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.020946     0.040698 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.020946     0.040698 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........   0.041892     0.081395 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     1.1041       1.0259 </span></span><br><span class="line"><span class="comment"># T-test p-value........    0.33033      0.76177 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V14) u75 *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........        0.6          0.6 </span></span><br><span class="line"><span class="comment"># mean control..........    0.68462      0.60459 </span></span><br><span class="line"><span class="comment"># std mean diff.........    -17.225     -0.93533 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....   0.081081     0.075581 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....          1            1 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.042308     0.037791 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.042308     0.037791 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........   0.084615     0.075581 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     1.1133       1.0039 </span></span><br><span class="line"><span class="comment"># T-test p-value........   0.068031      0.91711 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V15) I(re74 * re75) *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........   13118591     13118591 </span></span><br><span class="line"><span class="comment"># mean control..........   14530303     25001164 </span></span><br><span class="line"><span class="comment"># std mean diff.........    -2.7799      -23.399 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....    3278733      8171759 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....  188160151    243080836 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.022723      0.04676 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.014449     0.046512 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........   0.061019      0.09593 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....    0.69439      0.33337 </span></span><br><span class="line"><span class="comment"># T-test p-value........    0.79058      0.11452 </span></span><br><span class="line"><span class="comment"># KS Bootstrap p-value..      0.298        0.008 </span></span><br><span class="line"><span class="comment"># KS Naive p-value......    0.81575     0.084363 </span></span><br><span class="line"><span class="comment"># KS Statistic..........   0.061019      0.09593 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V16) I(age * nodegr) *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........     17.968       17.968 </span></span><br><span class="line"><span class="comment"># mean control..........     20.608       19.591 </span></span><br><span class="line"><span class="comment"># std mean diff.........    -20.144      -12.388 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....     2.7189       1.3866 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          1            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....         18           17 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.020386     0.019732 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........  0.0061331     0.011628 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........    0.12651     0.072674 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     1.3301       1.0752 </span></span><br><span class="line"><span class="comment"># T-test p-value........   0.027633     0.069335 </span></span><br><span class="line"><span class="comment"># KS Bootstrap p-value..      0.026        0.192 </span></span><br><span class="line"><span class="comment"># KS Naive p-value......   0.062873      0.32369 </span></span><br><span class="line"><span class="comment"># KS Statistic..........    0.12651     0.072674 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V17) I(educ * re74) *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........      22899        22899 </span></span><br><span class="line"><span class="comment"># mean control..........      21067        21812 </span></span><br><span class="line"><span class="comment"># std mean diff.........      3.191       1.8935 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....     4775.1       9105.7 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....     173996       233352 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.018141     0.057045 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.015281     0.049419 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........    0.04553      0.11919 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     1.1152         1.06 </span></span><br><span class="line"><span class="comment"># T-test p-value........    0.73471      0.84458 </span></span><br><span class="line"><span class="comment"># KS Bootstrap p-value..      0.591   &lt; 2.22e-16 </span></span><br><span class="line"><span class="comment"># KS Naive p-value......    0.97849     0.015094 </span></span><br><span class="line"><span class="comment"># KS Statistic..........    0.04553      0.11919 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ***** (V18) I(educ * re75) *****</span></span><br><span class="line"><span class="comment">#   Before Matching   After Matching</span></span><br><span class="line"><span class="comment"># mean treatment........      15881        15881 </span></span><br><span class="line"><span class="comment"># mean control..........      12981        21895 </span></span><br><span class="line"><span class="comment"># std mean diff.........     8.5349      -17.702 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean raw eQQ diff.....     3760.4       5727.7 </span></span><br><span class="line"><span class="comment"># med  raw eQQ diff.....          0            0 </span></span><br><span class="line"><span class="comment"># max  raw eQQ diff.....      46244        71480 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># mean eCDF diff........   0.050006     0.051959 </span></span><br><span class="line"><span class="comment"># med  eCDF diff........   0.064293     0.043605 </span></span><br><span class="line"><span class="comment"># max  eCDF diff........     0.1052     0.098837 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># var ratio (Tr/Co).....     1.1901      0.64031 </span></span><br><span class="line"><span class="comment"># T-test p-value........    0.35903      0.10655 </span></span><br><span class="line"><span class="comment"># KS Bootstrap p-value..      0.051        0.018 </span></span><br><span class="line"><span class="comment"># KS Naive p-value......    0.18269     0.069435 </span></span><br><span class="line"><span class="comment"># KS Statistic..........     0.1052     0.098837 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># Before Matching Minimum p.value: 0.0020368 </span></span><br><span class="line"><span class="comment"># Variable Name(s): nodegr  Number(s): 8 </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># After Matching Minimum p.value: &lt; 2.22e-16 </span></span><br><span class="line"><span class="comment"># Variable Name(s): re74 I(re74^2) I(educ * re74)  Number(s): 9 10 17 </span></span><br></pre></td></tr></table></figure><h1 id="参考资料-推荐阅读"><a class="header-anchor" href="#参考资料-推荐阅读"></a>参考资料/推荐阅读</h1><ul><li><a href="https://dango.rocks/blog/2019/01/20/Causal-Inference-Introduction2-Propensity-Score-Matching/">[Blog] 因果推断漫谈（二）：倾向性得分匹配介绍</a></li><li><a href="https://zhuanlan.zhihu.com/p/90193649">[ZhiHu] PSM的原理及STATA操作</a></li><li><a href="https://zhuanlan.zhihu.com/p/449976773">[ZhiHu] 聊一聊因果推断中的ATT、ITE、ATE和CATE</a></li><li><a href="https://www.jianshu.com/p/1a71fdff40d7">[JianShu] PSM倾向得分匹配法学习指南</a></li><li><a href="https://www.publichealth.columbia.edu/research/population-health-methods/propensity-score-analysis">Propensity Score Analysis</a></li><li><a href="https://liberalarts.utexas.edu/prc/_files/cs/Spring2013_Blanchard_Propensity%20Score%20Matching.pdf">An Introduction to Propensity Score Matching</a></li><li><a href="https://onlinelibrary.wiley.com/doi/10.1111/j.1467-6419.2007.00527.x">Caliendo M, Kopeinig S. Some practical guidance for the implementation of propensity score matching [J]. Journal of economic surveys, 2008, 22(1): 31-72.</a></li><li><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3144483/">Austin, Peter C . An Introduction to Propensity Score Methods for Reducing the Effects of Confounding in Observational Studies [J]. Multivariate Behav Res, 2011, 46(3):399-424.</a></li><li><a href="https://developer.aliyun.com/article/892427">倾向得分匹配（PSM）的原理以及应用</a></li><li><a href="https://stats.stackexchange.com/questions/308397/why-is-average-treatment-effect-different-from-average-treatment-effect-on-the-t">Why is Average Treatment Effect different from Average Treatment effect on the Treated?</a></li><li><a href="https://www.summitllc.us/propensity-score-matching">PROPENSITY SCORE MATCHING（PSM图解）</a></li></ul><h2 id="软件实现"><a class="header-anchor" href="#软件实现"></a>软件实现</h2><ul><li><a href="http://fmwww.bc.edu/RePEc/usug2001/psmatch.pdf">STATA: Implementing Propensity Score Matching Estimators with STATA</a></li><li><a href="http://sekhon.berkeley.edu/matching/">R: Multivariate and Propensity Score Matching Software for Causal Inference</a></li><li><a href="http://sekhon.berkeley.edu/papers/MatchingJSS.pdf">R: Sekhon J S . Multivariate and Propensity Score Matching Software with Automated Balance Optimization: The Matching package for R [J]. Journal of statistical software, 2011, 42(i07).</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;
&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Casual Inference 因果推断" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Casual-Inference-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD/"/>
    
    
    <category term="Casual Inference 因果推断" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Casual-Inference-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD/"/>
    
  </entry>
  
  <entry>
    <title>因果推断 | 双重差分法（DID）// Difference in Difference</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/DataAnalysis-CausalInference-DID.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/DataAnalysis-CausalInference-DID.html</id>
    <published>2022-03-20T14:11:13.000Z</published>
    <updated>2022-04-29T09:48:23.612Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><center></center><span id="more"></span><blockquote><p>推荐阅读：<a href="#">Post not found: 数据分析-因果推断</a></p></blockquote><h1 id="双重差分"><a class="header-anchor" href="#双重差分"></a>双重差分</h1><p>双重差分法（DID，Difference in Difference）</p><ul><li>解决内生性问题的因果分析方法</li><li>政策干预发生与否的虚拟变量+前后两个时间段的面板数据+不可观测的个体固定效应</li><li>常用于政策效应评估研究</li></ul><table><thead><tr><th style="text-align:left">变量</th><th style="text-align:left">含义</th></tr></thead><tbody><tr><td style="text-align:left">干预 Treated</td><td style="text-align:left">控制组（无干预）、实验组（有干预）</td></tr><tr><td style="text-align:left">时间 Time</td><td style="text-align:left">$T_0$（干预实施前）、$T_1$（干预实施后）</td></tr><tr><td style="text-align:left">解释变量/因变量 $Y$</td><td style="text-align:left">关注的因变量/解释变量（如GDP等）</td></tr><tr><td style="text-align:left">控制变量 $X$</td><td style="text-align:left">需要控制的因素（除干预外，可能会影响因变量的因素）</td></tr></tbody></table><div class="note default">            <p>例：假设我们在A、B两城进行策略实验，A城不进行任何策略干预，$t_1$时刻在B城全量进行策略干预</p>          </div><p><strong>基本假设</strong>：</p><ol><li>共同趋势假设/平行趋势假设</li><li></li></ol><p>$$Y_{it}=\alpha_i + \lambda_t + D_{it}\beta + \varepsilon_{it}$$<br>其中，</p><ul><li>$\alpha_i$：不可观测的个体固定效应</li><li>$D_{it}$：干预是否发生的虚拟变量</li><li>$i=A$表示控制组（无干预）、$i=B$表示实验组（有干预）</li><li>$t=T_0$表示干预实施前、$t=T_1$表示干预实施后</li></ul><p>\begin{equation}<br>D_{it} = \left\lbrace<br>\begin{array}{ll}<br>1, &amp; 干预发生 \\<br>0, &amp; 干预不发生<br>\end{array}<br>\right.<br>\end{equation}</p><table><thead><tr><th style="text-align:center">$D_{it}$</th><th style="text-align:center">$t=T_0$</th><th style="text-align:center">$t=T_1$</th></tr></thead><tbody><tr><td style="text-align:center">$i=A$</td><td style="text-align:center">0</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">$i=B$</td><td style="text-align:center">0</td><td style="text-align:center">1</td></tr></tbody></table><ul><li>通过差分消除固定效应$\hat{\beta}$</li></ul><p>\begin{equation}<br>\hat{\beta} = \hat{Y}<em>{post}<sup>{treatment}-\hat{Y}_{pre}</sup>{treatment} -<br>\left( \hat{Y}</em>{post}^{control} - \hat{Y}_{pre}^{control} \right)<br>\end{equation}</p><div class="note default">            <p>两城在$T_0$时期满足<strong>平行趋势假设</strong>（$Y$有着相似的增长趋势）：</p><ul><li>第一次差分：$Y_{B1} - Y_{B0}$、$Y_{A1} - Y_{A0}$表示各组$Y$的增长</li><li>第二次差分：</li></ul>          </div><h1 id="平行趋势检验（Parallel-Trend-Test）"><a class="header-anchor" href="#平行趋势检验（Parallel-Trend-Test）"></a>平行趋势检验（Parallel Trend Test）</h1><p>检验平行趋势的方法有：</p><ul><li>$t$检验</li><li>交叉项显著性检验法（事件研究法）</li><li>$F$统计量检验法</li><li>图示法</li></ul><h2 id="t-检验"><a class="header-anchor" href="#t-检验"></a>$t$检验</h2><h2 id="交叉项显著性检验法（事件研究法）"><a class="header-anchor" href="#交叉项显著性检验法（事件研究法）"></a>交叉项显著性检验法（事件研究法）</h2><p>选择一个时间点为基期，</p><h2 id="F-统计量检验法"><a class="header-anchor" href="#F-统计量检验法"></a>$F$统计量检验法</h2><h2 id="图示法"><a class="header-anchor" href="#图示法"></a>图示法</h2><p>横坐标为时间、纵坐标为解释变量（因变量），观察$T_0$时段（干预实施前）数据的趋势，直观判断两组数据的趋势是否有明显差异（比较主观）。</p><h2 id="安慰剂检验（Placebo-Test）"><a class="header-anchor" href="#安慰剂检验（Placebo-Test）"></a>安慰剂检验（Placebo Test）</h2><p>安慰剂检验方法：</p><ol><li>改变政策发生时点<ul><li>前置处理组的政策发生时点（此时等同于平行趋势检验）</li><li>将政策发生时点随机化（将时点前置或后置）</li></ul></li><li>将处理组随机化：对处理组变量进行一定次数的随机抽样，然后再观测随机化后的DID项系数或观测值的核密度图是否集中分布于0附近，以及是否显著偏离其真实值</li></ol><blockquote><ul><li>方法二更为常见</li><li>方法一存在不足：如果样本期间较短，导致随机抽样的时段区间过短，得出的结论不一定真实</li></ul></blockquote><h1 id="案例-Cases"><a class="header-anchor" href="#案例-Cases"></a>案例 Cases</h1><h2 id="教育经济学"><a class="header-anchor" href="#教育经济学"></a>教育经济学</h2><blockquote><p><a href="https://www.sciencedirect.com/science/article/pii/B978012815391800001X">The Economics of Education: Chapter 1 - Empirical methods in the economics of education</a></p></blockquote><h1 id="参考资料-推荐阅读"><a class="header-anchor" href="#参考资料-推荐阅读"></a>参考资料/推荐阅读</h1><ul><li><a href="https://www.sciencedirect.com/topics/economics-econometrics-and-finance/difference-in-differences">ScienceDirect: Difference-in-Differences</a></li><li><a href="https://www.sciencedirect.com/science/article/pii/B978012815391800001X">The Economics of Education: Chapter 1 - Empirical methods in the economics of education</a></li><li><a href="https://zhuanlan.zhihu.com/p/387732407">双重差分法之平行趋势检验（含STATA代码）</a></li><li><a href="https://cloud.tencent.com/developer/article/1869023">DID：安慰剂检验</a></li><li><a href="http://ciejournal.ajcass.org/UploadFile/Issue/20210120084110WU_FILE_0.pdf">陆菁, 鄢云, 王韬璇. 绿色信贷政策的微观效应研究——基于技术创新与资源再配置的视角[J]. 中国工业经济, 2021(1):19.</a></li><li><a href="http://ciejournal.ajcass.org/UploadFile/Issue/201606280001/2021/5//20210520094439WU_FILE_0.pdf">李青原, 章尹赛楠. 金融开放与资源配置效率——来自外资银行进入中国的证据[J]. 中国工业经济, 2021(5):19.</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;
&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Casual Inference 因果推断" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Casual-Inference-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD/"/>
    
    
    <category term="Casual Inference 因果推断" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Casual-Inference-%E5%9B%A0%E6%9E%9C%E6%8E%A8%E6%96%AD/"/>
    
  </entry>
  
  <entry>
    <title>Python | datetime</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/python-datetime.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/python-datetime.html</id>
    <published>2022-03-19T04:11:31.000Z</published>
    <updated>2022-03-19T05:01:33.595Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><p><code>datetime</code>是时间处理包。</p><h1 id="基本函数"><a class="header-anchor" href="#基本函数"></a>基本函数</h1><h2 id="date"><a class="header-anchor" href="#date"></a>date</h2><p><code>date(year, month, day)</code>：生成日期格式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd </span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> date</span><br><span class="line"></span><br><span class="line"><span class="comment">## 2022年3月1日至2022年3月19日的日期枚举</span></span><br><span class="line">dt = pd.date_range(<span class="string">&#x27;20220301&#x27;</span>, <span class="string">&#x27;20220319&#x27;</span>, freq=<span class="string">&#x27;D&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 2022年3月1日至2022年3月19日的天数</span></span><br><span class="line">date_delta = (date(<span class="number">2022</span>, <span class="number">3</span>, <span class="number">19</span>) - date(<span class="number">2022</span>, <span class="number">3</span>, <span class="number">1</span>)).days + <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="datetime"><a class="header-anchor" href="#datetime"></a>datetime</h2><h2 id="timedelta"><a class="header-anchor" href="#timedelta"></a>timedelta</h2>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Python" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Python/"/>
    
    
    <category term="Python" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>数据分析 | 如何成为一名合格的数据分析师</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90-%E5%A6%82%E4%BD%95%E6%88%90%E4%B8%BA%E4%B8%80%E5%90%8D%E5%90%88%E6%A0%BC%E7%9A%84%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%B8%88.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90-%E5%A6%82%E4%BD%95%E6%88%90%E4%B8%BA%E4%B8%80%E5%90%8D%E5%90%88%E6%A0%BC%E7%9A%84%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%B8%88.html</id>
    <published>2022-01-20T07:17:05.000Z</published>
    <updated>2022-03-22T12:12:04.043Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><blockquote><p>积累一些“成为一名合格的数据分析师”的TIPS</p></blockquote><h1 id="宋世君：数据分析十条"><a class="header-anchor" href="#宋世君：数据分析十条"></a>宋世君：数据分析十条</h1><p>数据科学大佬宋世君曾总结过的<strong>数据分析十条</strong>，适合作为新人数据分析师的职场成长教条：</p><ol><li>分析师的核心能力是思辨</li><li>对讲真话负责，保持中立</li><li>论据充分，论证严谨，观点简明</li><li>数据先于观点，而不是观点先于数据</li><li>不要把问题复杂化，也不要惧怕复杂度</li><li>分析什么问题，往往比用什么方法更重要</li><li>好的分析师给别人输入，而不只是帮别人输出</li><li>分析没有什么价值，除非洞见改变了什么其他的东西</li><li>如果可能应该基于问题收集数据，而不只是基于数据来问问题</li><li>不是所有问题都可以分析出答案，以开放的心态采纳其他观点</li></ol><h1 id="李伟建：两个关键词"><a class="header-anchor" href="#李伟建：两个关键词"></a>李伟建：两个关键词</h1><ol><li>主动思考</li><li>怎么去理解商业需求</li></ol><ul><li>分析师的使命：让决策更科学</li><li>分析师的核心价值是发现，而不是解决</li></ul><h1 id="参考资料"><a class="header-anchor" href="#参考资料"></a>参考资料</h1><ul><li><a href="https://mp.weixin.qq.com/s/-MXgwn-BEU62E0Tnm91ylg">滴滴宋世君：数据分析师究竟是做什么的？</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Data Analysis 数据分析" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Data-Analysis-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
    
    <category term="Data Analysis 数据分析" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Data-Analysis-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>数据分析 | 数据驱动 Data-driven</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90-%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90-%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8.html</id>
    <published>2022-01-20T07:01:43.000Z</published>
    <updated>2022-04-27T16:58:20.163Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><p>每一位数据分析师，可能都被问过“你怎么理解数据驱动？”这个问题与“数据科学家主要做什么工作”有点相近。</p><blockquote><p><a href="https://wiki.mbalib.com/wiki/%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8">MBA智库百科</a>：<br><strong>数据驱动</strong>，是通过移动互联网或者其他的相关软件作为手段采集海量的数据，将数据进行组织形成信息，之后对相关的信息进行整合和提炼，在数据的技术上经过训练和拟合形成自动化的决策模型。简单来说，就是<strong>以数据为中心依据进行决策和行动</strong>。</p></blockquote><h1 id="参考资料"><a class="header-anchor" href="#参考资料"></a>参考资料</h1>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Data Analysis 数据分析" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Data-Analysis-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
    
    <category term="Data Analysis 数据分析" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Data-Analysis-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>SQL | 时间处理 Time</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/sql-%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/sql-%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86.html</id>
    <published>2022-01-19T07:58:34.000Z</published>
    <updated>2022-07-19T17:02:05.970Z</updated>
    
    <content type="html"><![CDATA[<center>SQL时间相关处理~</center><span id="more"></span><h1 id="基本语法"><a class="header-anchor" href="#基本语法"></a>基本语法</h1><h2 id="年"><a class="header-anchor" href="#年"></a>年</h2><p><code>YEAR()</code>：取日期中的年份</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">year</span>(<span class="string">&#x27;2021-12-31&#x27;</span>)</span><br><span class="line"><span class="comment">-- 2021</span></span><br></pre></td></tr></table></figure><p>去年同一天：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add_months(<span class="built_in">current_date</span>, <span class="number">-12</span>)</span><br></pre></td></tr></table></figure><h2 id="月"><a class="header-anchor" href="#月"></a>月</h2><p><code>MONTH()</code>：取日期中的月份</p><p>当月第一天：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date_format(<span class="built_in">current_date</span>, <span class="string">&#x27;yyyy-MM-01&#x27;</span>)</span><br></pre></td></tr></table></figure><p>当月最后一天：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- date 可以为yyyyMMdd或yyyy-MM-dd</span></span><br><span class="line">last_day(current_day)</span><br></pre></td></tr></table></figure><p>上个月末（上个月最后一天）：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">date_sub(date_format(<span class="built_in">current_date</span>, <span class="string">&#x27;yyyy-MM-01&#x27;</span>), <span class="number">1</span>)</span><br><span class="line">last_day(add_months(<span class="type">date</span>, <span class="number">-1</span>))</span><br></pre></td></tr></table></figure><p>上个月同一天：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add_months(<span class="built_in">current_date</span>, <span class="number">-1</span>)</span><br></pre></td></tr></table></figure><p>$n$个月前同一天：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add_months(<span class="built_in">current_date</span>, <span class="operator">-</span>n)</span><br></pre></td></tr></table></figure><p>月调度任务（仅每月最后一天有数），取最近有数一个分区：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">where</span> </span><br><span class="line">(</span><br><span class="line">    <span class="keyword">case</span>    <span class="keyword">when</span> <span class="string">&#x27;$&#123;date&#125;&#x27;</span> <span class="operator">=</span> last_day(<span class="string">&#x27;$&#123;date&#125;&#x27;</span>) <span class="keyword">and</span> <span class="type">date</span> <span class="operator">=</span> <span class="string">&#x27;$&#123;date&#125;&#x27;</span> <span class="keyword">then</span> <span class="number">1</span> </span><br><span class="line">            <span class="keyword">when</span> <span class="string">&#x27;$&#123;date&#125;&#x27;</span> <span class="operator">&lt;</span> last_day(<span class="string">&#x27;$&#123;date&#125;&#x27;</span>) <span class="keyword">and</span> <span class="type">date</span> <span class="operator">=</span> last_day(add_months(<span class="string">&#x27;$&#123;date&#125;&#x27;</span>, <span class="number">-1</span>)) <span class="keyword">then</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span></span><br><span class="line">) <span class="operator">=</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="周"><a class="header-anchor" href="#周"></a>周</h2><p><code>WEEKOFYEAR(STRING date)</code>：返回时间字符出位于一年中的第几周内</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">weekofyear(<span class="string">&#x27;2016-12-08 10:05:15&#x27;</span>)</span><br><span class="line"><span class="comment">-- 49</span></span><br></pre></td></tr></table></figure><p>周几/星期几：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span>    <span class="keyword">when</span> <span class="built_in">cast</span>(pmod(datediff(pt, <span class="string">&#x27;1900-01-07&#x27;</span>), <span class="number">7</span>) <span class="keyword">as</span> <span class="type">int</span>) <span class="operator">=</span> <span class="number">0</span> <span class="keyword">then</span> <span class="number">7</span> </span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cast</span>(pmod(datediff(pt, <span class="string">&#x27;1900-01-07&#x27;</span>), <span class="number">7</span>) </span><br><span class="line"><span class="keyword">end</span> <span class="keyword">as</span> weekdays</span><br><span class="line"><span class="comment">-- cast(pmod(datediff(pt, &#x27;1900-01-07&#x27;), 7)取值范围0-6</span></span><br><span class="line"><span class="comment">-- 或</span></span><br><span class="line"><span class="built_in">cast</span>(date_format(pt, <span class="string">&#x27;u&#x27;</span>) <span class="keyword">as</span> <span class="type">int</span>)  <span class="comment">-- 取值范围1-7</span></span><br></pre></td></tr></table></figure><p>当周的周一：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date_sub(<span class="built_in">current_date</span>, <span class="built_in">cast</span>(date_format(<span class="built_in">current_date</span>, <span class="string">&#x27;u&#x27;</span>) <span class="keyword">as</span> <span class="type">int</span>) <span class="operator">-</span> <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>最近一个周日：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date_sub(<span class="built_in">current_date</span>, <span class="built_in">cast</span>(date_format(<span class="built_in">current_date</span>, <span class="string">&#x27;u&#x27;</span>) <span class="keyword">as</span> <span class="type">int</span>))</span><br></pre></td></tr></table></figure><h1 id="格式转换"><a class="header-anchor" href="#格式转换"></a>格式转换</h1><h2 id="日期-to-日期"><a class="header-anchor" href="#日期-to-日期"></a>日期 to 日期</h2><p>将<code>yyyy/MM/dd</code>格式的日期转换为<code>yyyy-MM-dd</code>格式：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">concat_ws(<span class="string">&#x27;-&#x27;</span>, split(<span class="type">date</span>, <span class="string">&#x27;/&#x27;</span>)[<span class="number">0</span>], lpad(split(<span class="type">date</span>, <span class="string">&#x27;/&#x27;</span>)[<span class="number">1</span>], <span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>), lpad(split(<span class="type">date</span>, <span class="string">&#x27;/&#x27;</span>)[<span class="number">2</span>], <span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>))</span><br></pre></td></tr></table></figure><p>将<code>yyyyMMdd</code>格式转换为<code>yyyy-MM-dd</code>格式：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">date_sub(<span class="type">date</span>, <span class="number">0</span>)</span><br><span class="line">date_add(<span class="type">date</span>, <span class="number">0</span>)</span><br><span class="line">from_unixtime(unix_timestamp(<span class="type">date</span>, <span class="string">&#x27;yyyyMMdd&#x27;</span>), <span class="string">&#x27;yyyy-MM-dd&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="日期-to-时间戳"><a class="header-anchor" href="#日期-to-时间戳"></a>日期 to 时间戳</h2><h2 id="时间戳-to-日期"><a class="header-anchor" href="#时间戳-to-日期"></a>时间戳 to 日期</h2><p>10位时间戳（<code>bigint</code>格式，单位秒）转<code>yyyyMMdd</code>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from_unixtime(ts, <span class="string">&#x27;yyyyMMdd&#x27;</span>)</span><br></pre></td></tr></table></figure><p>10位时间戳（<code>bigint</code>格式，单位秒）转<code>yyyy-MM-dd</code>或<code>yyyy-MM-dd HH:mm:ss</code>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from_unixtime(ts, <span class="string">&#x27;yyyy-MM-dd&#x27;</span>)</span><br><span class="line">from_unixtime(ts, <span class="string">&#x27;yyyy-MM-dd HH:mm:ss&#x27;</span>)</span><br></pre></td></tr></table></figure><p>13位时间戳（单位毫秒）转<code>yyyyMMdd</code>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from_unixtime(ts <span class="operator">/</span> <span class="number">1000</span>, <span class="string">&#x27;yyyyMMdd&#x27;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>1毫秒 = $\frac{1}{1000}$ 秒</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a class="header-anchor" href="#参考资料"></a>参考资料</h1>]]></content>
    
    
    <summary type="html">&lt;center&gt;SQL时间相关处理~&lt;/center&gt;</summary>
    
    
    
    <category term="SQL 数据库" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/SQL-%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="SQL 数据库" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/SQL-%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>Python | Dython</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/Python-Package-dython.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/Python-Package-dython.html</id>
    <published>2021-08-22T14:33:16.000Z</published>
    <updated>2021-08-22T15:41:14.000Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><h1 id="Dython"><a class="header-anchor" href="#Dython"></a>Dython</h1><p>Dython是一款数据建模库</p><ul><li>依赖<code>numpy</code>、<code>pandas</code>、<code>seaborn</code>、<code>scipy</code>、<code>matplotlib</code>、<code>sklearn</code>、<code>scikit-plot</code></li><li>包含的子模块：<ul><li><code>data_utils</code>：基础的数据探索性分析</li><li><code>nominal</code>：特征相关性度量</li><li><code>model_utils</code>：机器学习性能评估工具</li><li><code>sampling</code>：数据采样</li></ul></li></ul><p>安装：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install dython</span><br><span class="line"><span class="comment">## or</span></span><br><span class="line">pip install git+https://github.com/shakedzy/dython.git</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 载入数据集，用于示例</span></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">dat = datasets.load_diabetes()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot; &quot;</span>.join(dat.keys()))     <span class="comment">## 数据集包含的信息项</span></span><br><span class="line"><span class="comment"># data target DESCR feature_names data_filename target_filename</span></span><br><span class="line">df = pd.DataFrame(dat[<span class="string">&#x27;data&#x27;</span>], columns=dat[<span class="string">&#x27;feature_names&#x27;</span>])</span><br><span class="line">df.head()</span><br><span class="line"><span class="comment"># agesexbmibps1s2s3s4s5s6</span></span><br><span class="line"><span class="comment"># 00.0380760.0506800.0616960.021872-0.044223-0.034821-0.043401-0.0025920.019908-0.017646</span></span><br><span class="line"><span class="comment"># 1-0.001882-0.044642-0.051474-0.026328-0.008449-0.0191630.074412-0.039493-0.068330-0.092204</span></span><br><span class="line"><span class="comment"># 20.0852990.0506800.044451-0.005671-0.045599-0.034194-0.032356-0.0025920.002864-0.025930</span></span><br><span class="line"><span class="comment"># 3-0.089063-0.044642-0.011595-0.0366560.0121910.024991-0.0360380.0343090.022692-0.009362</span></span><br><span class="line"><span class="comment"># 40.005383-0.044642-0.0363850.0218720.0039350.0155960.008142-0.002592-0.031991-0.046641</span></span><br></pre></td></tr></table></figure><h1 id="data-utils"><a class="header-anchor" href="#data-utils"></a>data_utils</h1><h2 id="identify-columns-with-na"><a class="header-anchor" href="#identify-columns-with-na"></a>identify_columns_with_na()</h2><p><code>identify_columns_with_na()</code>：数据集的缺失情况，输出每列的数据缺失个数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 将部分值替换为“缺失值nan”</span></span><br><span class="line">df.loc[<span class="number">4</span>:<span class="number">5</span>, <span class="string">&#x27;bmi&#x27;</span>] = np.nan</span><br><span class="line">df.loc[<span class="number">1</span>:<span class="number">4</span>, <span class="string">&#x27;s3&#x27;</span>] = np.nan</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> dython <span class="keyword">import</span> data_utils</span><br><span class="line">data_utils.identify_columns_with_na(df)</span><br><span class="line"><span class="comment"># columnna_count</span></span><br><span class="line"><span class="comment"># 6s34</span></span><br><span class="line"><span class="comment"># 2bmi2</span></span><br><span class="line"><span class="comment">### 6是列s3的索引（s3为第7列）</span></span><br><span class="line"><span class="comment">### 2是列bmi的索引（bmi为第3列）</span></span><br><span class="line"><span class="comment">### 按照缺失值个数降序排序</span></span><br></pre></td></tr></table></figure><h2 id="identify-columns-by-type"><a class="header-anchor" href="#identify-columns-by-type"></a>identify_columns_by_type()</h2><p><code>identify_columns_by_type()</code>：按列的类型查找列</p><h2 id="split-hist"><a class="header-anchor" href="#split-hist"></a>split_hist()</h2><p><code>split_hist()</code>：快速绘制分组直方图</p><h1 id="nominal"><a class="header-anchor" href="#nominal"></a>nominal</h1><h2 id="associations"><a class="header-anchor" href="#associations"></a>associations()</h2><p>计算数据集中变量的相关系数。</p><ul><li>相关系数包括：<ul><li><code>Pearson</code></li><li><code>Cramer's V</code></li><li><code>Theil's U</code></li><li>条件熵</li></ul></li><li>参数<code>nom_nom_assoc='cramer'</code>：名义变量之间的相关系数计算方法，默认为<code>cramer</code></li><li>参数<code>num_num_assoc='pearson'</code>：数值变量之间的相关系数计算方法，默认为Pearson相关系数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dython.nominal <span class="keyword">import</span> associations</span><br><span class="line">associations(df)</span><br></pre></td></tr></table></figure><h2 id="cluster-correlations"><a class="header-anchor" href="#cluster-correlations"></a>cluster_correlations()</h2><p>绘制基于层次聚类的相关系数矩阵图（热力图）</p><h1 id="model-utils"><a class="header-anchor" href="#model-utils"></a>model_utils</h1><h2 id="ks-abc"><a class="header-anchor" href="#ks-abc"></a>ks_abc()</h2><h2 id="metric-graph"><a class="header-anchor" href="#metric-graph"></a>metric_graph()</h2><ul><li>参数<code>metric</code>：<ul><li><code>roc</code>：绘制ROC曲线</li></ul></li></ul><h1 id="sampling"><a class="header-anchor" href="#sampling"></a>sampling</h1><h2 id="boltzmann-sampling"><a class="header-anchor" href="#boltzmann-sampling"></a>boltzmann_sampling()</h2><h2 id="weighted-sampling"><a class="header-anchor" href="#weighted-sampling"></a>weighted_sampling()</h2><h1 id="参考资料"><a class="header-anchor" href="#参考资料"></a>参考资料</h1><ul><li><a href="http://shakedzy.xyz/dython/">Dython主页</a></li><li><a href="https://github.com/shakedzy/dython">GitHub: Dython</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Python" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Python/"/>
    
    
    <category term="Python" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python | Altair</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/Python-Package-altair.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/Python-Package-altair.html</id>
    <published>2021-08-01T14:33:44.000Z</published>
    <updated>2022-12-10T09:06:33.849Z</updated>
    
    <content type="html"><![CDATA[<center>A Grammar of Interactive Graphics</center><span id="more"></span><meta name="referrer" content="no-referrer"><h1 id="Altair"><a class="header-anchor" href="#Altair"></a>Altair</h1><p>Altair是Python的一个可视化库，由华盛顿大学的数据科学家Jake Vanderplas编写。</p><blockquote><ul><li>官网：<a href="https://altair-viz.github.io/">https://altair-viz.github.io/</a></li><li>Example Gallery：<a href="https://altair-viz.github.io/gallery/index.html">https://altair-viz.github.io/gallery/index.html</a></li></ul></blockquote><p>安装：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U altair</span><br></pre></td></tr></table></figure><p>Altair中的基本对象是 Chart，它将数据框（DataFrame）作为单个参数。</p><p>Chart有三个基本方法：</p><ul><li>数据data</li><li>标记mark ：可以让用户在图中以不同形状来表示数据点（如实心点、空心圆、方块等）</li><li>编码encode ：指定图像的具体内容</li></ul><blockquote><p>标记和编码决定着绘制图表的样式</p></blockquote><p>常用的<strong>编码encode</strong>有：</p><ul><li><code>x</code>：x轴数值</li><li><code>y</code>：y轴数值</li><li><code>color</code>：标记点的颜色</li><li><code>opacity</code>：标记点的透明度</li><li><code>shape</code>：标记点的形状</li><li><code>size</code>：标记点的大小</li><li><code>row</code>：按行分布图片</li><li><code>column</code>：按列分布图片</li></ul><h1 id="绘图"><a class="header-anchor" href="#绘图"></a>绘图</h1><h2 id="面积图-mark-area"><a class="header-anchor" href="#面积图-mark-area"></a>面积图 mark_area()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> altair <span class="keyword">as</span> alt</span><br><span class="line"><span class="keyword">from</span> vega_datasets <span class="keyword">import</span> data</span><br><span class="line"></span><br><span class="line">source = data.iowa_electricity()  <span class="comment">## 导入数据</span></span><br><span class="line"></span><br><span class="line">alt.Chart(source).mark_area().encode(</span><br><span class="line">    x=<span class="string">&quot;year:T&quot;</span>,  <span class="comment">## T是指数据类型为Temporal，表示时间或日期数据</span></span><br><span class="line">    y=<span class="string">&quot;net_generation:Q&quot;</span>,  <span class="comment">## Q是指数据类型为Quantitative，表示连续/实数数据</span></span><br><span class="line">    color=<span class="string">&quot;source:N&quot;</span>  <span class="comment">## N是指数据类型为Nominal，表示定性数据（离散、无序）</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="条形图-mark-bar"><a class="header-anchor" href="#条形图-mark-bar"></a>条形图 mark_bar()</h2><p>mark_bar() ：绘制条形图</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">data = pd.DataFrame(&#123;</span><br><span class="line">    <span class="string">&#x27;a&#x27;</span>: <span class="built_in">list</span>(<span class="string">&#x27;AAABBBBDDDDEE&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;b&#x27;</span>: [<span class="number">2</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">11</span>, <span class="number">10</span>]</span><br><span class="line">&#125;)  <span class="comment">## 创建一个数据框</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> altair <span class="keyword">as</span> alt</span><br><span class="line">alt.Chart(data).mark_bar().encode(</span><br><span class="line">    x=<span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">    y=<span class="string">&#x27;average(b)&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="地图-mark-geoshape"><a class="header-anchor" href="#地图-mark-geoshape"></a>地图 mark_geoshape()</h2><p>mark_geoshape() ：地理形状图</p><h2 id="mark-image"><a class="header-anchor" href="#mark-image"></a>mark_image()</h2><p>mark_image() ：将图片绘制在坐标系中</p><h2 id="线图-mark-line"><a class="header-anchor" href="#线图-mark-line"></a>线图 mark_line()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> altair <span class="keyword">as</span> alt</span><br><span class="line"><span class="keyword">from</span> vega_datasets <span class="keyword">import</span> data</span><br><span class="line"></span><br><span class="line">source = data.stocks()</span><br><span class="line"></span><br><span class="line">alt.Chart(source).mark_line().encode(</span><br><span class="line">    x=<span class="string">&#x27;date&#x27;</span>,</span><br><span class="line">    y=<span class="string">&#x27;price&#x27;</span>,</span><br><span class="line">    color=<span class="string">&#x27;symbol&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="散点图-mark-point"><a class="header-anchor" href="#散点图-mark-point"></a>散点图 mark_point()</h2><p><code>mark_point()</code> ：绘制散点图</p><ul><li>如果只指定<code>mark_point()</code>，则画出来的只有一个点</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">data = pd.DataFrame(&#123;</span><br><span class="line">    <span class="string">&#x27;a&#x27;</span>: <span class="built_in">list</span>(<span class="string">&#x27;AAABBBBDDDDEE&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;b&#x27;</span>: [<span class="number">2</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">11</span>, <span class="number">10</span>]</span><br><span class="line">&#125;)  <span class="comment">## 创建一个数据框</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> altair <span class="keyword">as</span> alt</span><br><span class="line">chart = alt.Chart(data)  <span class="comment">## 定义Chart对象</span></span><br><span class="line"></span><br><span class="line">alt.Chart(data).mark_point()  <span class="comment">## 画点图（没有指定x轴、y轴）</span></span><br><span class="line"><span class="comment">## 得到的图片仅一个点</span></span><br><span class="line"></span><br><span class="line">alt.Chart(data).mark_point().encode(</span><br><span class="line">    x=<span class="string">&#x27;a&#x27;</span> <span class="comment">##指定x轴</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">alt.Chart(data).mark_point().encode(</span><br><span class="line">    x=<span class="string">&#x27;a&#x27;</span>,  <span class="comment">##指定x轴为变量a</span></span><br><span class="line">    y=<span class="string">&#x27;b&#x27;</span>  <span class="comment">##指定y轴为变量b</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 某一维度为指定变量的均值</span></span><br><span class="line">alt.Chart(data).mark_point().encode(</span><br><span class="line">    x=<span class="string">&#x27;average(b)&#x27;</span>,  <span class="comment">## x轴数据为变量b的均值</span></span><br><span class="line">    y=<span class="string">&#x27;a&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 参考：https://github.com/altair-viz/altair_notebooks</span></span><br><span class="line"><span class="keyword">import</span> altair <span class="keyword">as</span> alt</span><br><span class="line"><span class="keyword">from</span> vega_datasets <span class="keyword">import</span> data</span><br><span class="line"></span><br><span class="line">cars = data.cars()  <span class="comment">## 载入汽车数据集cars</span></span><br><span class="line"></span><br><span class="line">alt.Chart(cars).mark_point().encode(</span><br><span class="line">    x=<span class="string">&#x27;Horsepower&#x27;</span>,  <span class="comment">## Horsepower作为x轴数据</span></span><br><span class="line">    y=<span class="string">&#x27;Miles_per_Gallon&#x27;</span>,  <span class="comment">## Miles_per_Gallon作为y轴数据</span></span><br><span class="line">    color=<span class="string">&#x27;Origin&#x27;</span>,  <span class="comment">## 以变量Origin（原产国）作为第三维度-颜色</span></span><br><span class="line">).interactive()</span><br></pre></td></tr></table></figure><p>点击“…”可选择将图片保存为PNG图片格式；鼠标移至图片区域，向下滑动鼠标可缩小数据点，向上滑动鼠标可放大数据点。</p><h2 id="save"><a class="header-anchor" href="#save"></a>save()</h2><p>save() ：将图片保存为指定格式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 将图片保存为html文件</span></span><br><span class="line">chart = alt.Chart(data).mark_bar().encode(</span><br><span class="line">    x=<span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">    y=<span class="string">&#x27;average(b)&#x27;</span>,</span><br><span class="line">)</span><br><span class="line">chart.save(<span class="string">&#x27;chart.html&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="to-json"><a class="header-anchor" href="#to-json"></a>to_json()</h2><p>to_json() ：输出为JSON格式</p><ul><li>可使用该函数将图表输出为JSON格式，再结合Echarts在博客上绘制动态图表（Echarts可参考<a href="#">Post not found: 可视化-Echarts</a>）</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">chart = alt.Chart(data).mark_bar().encode(</span><br><span class="line">    x=<span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">    y=<span class="string">&#x27;average(b)&#x27;</span>,</span><br><span class="line">)</span><br><span class="line"><span class="built_in">print</span>(chart.to_json())</span><br><span class="line"><span class="comment"># &#123;</span></span><br><span class="line"><span class="comment">#   &quot;$schema&quot;: &quot;https://vega.github.io/schema/vega-lite/v4.0.2.json&quot;,</span></span><br><span class="line"><span class="comment">#   &quot;config&quot;: &#123;</span></span><br><span class="line"><span class="comment">#     &quot;view&quot;: &#123;</span></span><br><span class="line"><span class="comment">#       &quot;continuousHeight&quot;: 300,</span></span><br><span class="line"><span class="comment">#       &quot;continuousWidth&quot;: 400</span></span><br><span class="line"><span class="comment">#     &#125;</span></span><br><span class="line"><span class="comment">#   &#125;,</span></span><br><span class="line"><span class="comment">#   &quot;data&quot;: &#123;</span></span><br><span class="line"><span class="comment">#     &quot;name&quot;: &quot;data-f1e68a455420a2e3bea861e0a72caf7d&quot;</span></span><br><span class="line"><span class="comment">#   &#125;,</span></span><br><span class="line"><span class="comment">#   &quot;datasets&quot;: &#123;</span></span><br><span class="line"><span class="comment">#     &quot;data-f1e68a455420a2e3bea861e0a72caf7d&quot;: [</span></span><br><span class="line"><span class="comment">#       &#123;</span></span><br><span class="line"><span class="comment">#         &quot;a&quot;: &quot;A&quot;,</span></span><br><span class="line"><span class="comment">#         &quot;b&quot;: 2</span></span><br><span class="line"><span class="comment">#       &#125;,</span></span><br><span class="line"><span class="comment">#       &#123;</span></span><br><span class="line"><span class="comment">#         &quot;a&quot;: &quot;A&quot;,</span></span><br><span class="line"><span class="comment">#         &quot;b&quot;: 7</span></span><br><span class="line"><span class="comment">#       &#125;,</span></span><br><span class="line"><span class="comment">#       &#123;</span></span><br><span class="line"><span class="comment">#         &quot;a&quot;: &quot;A&quot;,</span></span><br><span class="line"><span class="comment">#         &quot;b&quot;: 4</span></span><br><span class="line"><span class="comment">#       &#125;,</span></span><br><span class="line"><span class="comment">#       &#123;</span></span><br><span class="line"><span class="comment">#         &quot;a&quot;: &quot;B&quot;,</span></span><br><span class="line"><span class="comment">#         &quot;b&quot;: 1</span></span><br><span class="line"><span class="comment">#       &#125;,</span></span><br><span class="line"><span class="comment">#       &#123;</span></span><br><span class="line"><span class="comment">#         &quot;a&quot;: &quot;B&quot;,</span></span><br><span class="line"><span class="comment">#         &quot;b&quot;: 2</span></span><br><span class="line"><span class="comment">#       &#125;,</span></span><br><span class="line"><span class="comment">#       &#123;</span></span><br><span class="line"><span class="comment">#         &quot;a&quot;: &quot;B&quot;,</span></span><br><span class="line"><span class="comment">#         &quot;b&quot;: 6</span></span><br><span class="line"><span class="comment">#       &#125;,</span></span><br><span class="line"><span class="comment">#       &#123;</span></span><br><span class="line"><span class="comment">#         &quot;a&quot;: &quot;B&quot;,</span></span><br><span class="line"><span class="comment">#         &quot;b&quot;: 8</span></span><br><span class="line"><span class="comment">#       &#125;,</span></span><br><span class="line"><span class="comment">#       &#123;</span></span><br><span class="line"><span class="comment">#         &quot;a&quot;: &quot;D&quot;,</span></span><br><span class="line"><span class="comment">#         &quot;b&quot;: 4</span></span><br><span class="line"><span class="comment">#       &#125;,</span></span><br><span class="line"><span class="comment">#       &#123;</span></span><br><span class="line"><span class="comment">#         &quot;a&quot;: &quot;D&quot;,</span></span><br><span class="line"><span class="comment">#         &quot;b&quot;: 7</span></span><br><span class="line"><span class="comment">#       &#125;,</span></span><br><span class="line"><span class="comment">#       &#123;</span></span><br><span class="line"><span class="comment">#         &quot;a&quot;: &quot;D&quot;,</span></span><br><span class="line"><span class="comment">#         &quot;b&quot;: 5</span></span><br><span class="line"><span class="comment">#       &#125;,</span></span><br><span class="line"><span class="comment">#       &#123;</span></span><br><span class="line"><span class="comment">#         &quot;a&quot;: &quot;D&quot;,</span></span><br><span class="line"><span class="comment">#         &quot;b&quot;: 12</span></span><br><span class="line"><span class="comment">#       &#125;,</span></span><br><span class="line"><span class="comment">#       &#123;</span></span><br><span class="line"><span class="comment">#         &quot;a&quot;: &quot;E&quot;,</span></span><br><span class="line"><span class="comment">#         &quot;b&quot;: 11</span></span><br><span class="line"><span class="comment">#       &#125;,</span></span><br><span class="line"><span class="comment">#       &#123;</span></span><br><span class="line"><span class="comment">#         &quot;a&quot;: &quot;E&quot;,</span></span><br><span class="line"><span class="comment">#         &quot;b&quot;: 10</span></span><br><span class="line"><span class="comment">#       &#125;</span></span><br><span class="line"><span class="comment">#     ]</span></span><br><span class="line"><span class="comment">#   &#125;,</span></span><br><span class="line"><span class="comment">#   &quot;encoding&quot;: &#123;</span></span><br><span class="line"><span class="comment">#     &quot;x&quot;: &#123;</span></span><br><span class="line"><span class="comment">#       &quot;field&quot;: &quot;a&quot;,</span></span><br><span class="line"><span class="comment">#       &quot;type&quot;: &quot;nominal&quot;</span></span><br><span class="line"><span class="comment">#     &#125;,</span></span><br><span class="line"><span class="comment">#     &quot;y&quot;: &#123;</span></span><br><span class="line"><span class="comment">#       &quot;aggregate&quot;: &quot;average&quot;,</span></span><br><span class="line"><span class="comment">#       &quot;field&quot;: &quot;b&quot;,</span></span><br><span class="line"><span class="comment">#       &quot;type&quot;: &quot;quantitative&quot;</span></span><br><span class="line"><span class="comment">#     &#125;</span></span><br><span class="line"><span class="comment">#   &#125;,</span></span><br><span class="line"><span class="comment">#   &quot;mark&quot;: &quot;bar&quot;</span></span><br><span class="line"><span class="comment"># &#125;</span></span><br></pre></td></tr></table></figure><h2 id="X-Y"><a class="header-anchor" href="#X-Y"></a>X(), Y()</h2><p><code>X()</code> ：设置x轴的聚合函数aggregate、field、数据类型type<br><code>Y()</code> ：设置y轴的聚合函数aggregate、field、数据类型type</p><ul><li>参数<code>aggregate</code>：设置聚合函数</li><li>参数<code>type</code>：轴数据类型</li><li>参数<code>title</code>：轴标题</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> altair <span class="keyword">as</span> alt</span><br><span class="line"></span><br><span class="line">data = pd.DataFrame(&#123;</span><br><span class="line">    <span class="string">&#x27;a&#x27;</span>: <span class="built_in">list</span>(<span class="string">&#x27;AAABBBBDDDDEE&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;b&#x27;</span>: [<span class="number">2</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">11</span>, <span class="number">10</span>]</span><br><span class="line">&#125;)  <span class="comment">## 创建一个数据框</span></span><br><span class="line"></span><br><span class="line">alt.Chart(data).mark_bar().encode(</span><br><span class="line">    alt.Y(<span class="string">&#x27;a&#x27;</span>, <span class="built_in">type</span>=<span class="string">&#x27;nominal&#x27;</span>),    <span class="comment">## y轴为定量变量（quantitative）</span></span><br><span class="line">    alt.X(<span class="string">&#x27;b&#x27;</span>, <span class="built_in">type</span>=<span class="string">&#x27;quantitative&#x27;</span>, aggregate=<span class="string">&#x27;average&#x27;</span>)  <span class="comment">## x轴为名义变量（nominal）</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = pd.DataFrame(&#123;</span><br><span class="line">    <span class="string">&#x27;a&#x27;</span>: <span class="built_in">list</span>(<span class="string">&#x27;AAABBBBDDDDEE&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;b&#x27;</span>: [<span class="number">2</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">11</span>, <span class="number">10</span>]</span><br><span class="line">&#125;)  <span class="comment">## 创建一个数据框</span></span><br><span class="line"></span><br><span class="line">alt.Chart(data).mark_bar(color=<span class="string">&#x27;firebrick&#x27;</span>).encode(</span><br><span class="line">    alt.Y(<span class="string">&#x27;a&#x27;</span>, title=<span class="string">&#x27;category&#x27;</span>),</span><br><span class="line">    alt.X(<span class="string">&#x27;average(b)&#x27;</span>, title=<span class="string">&#x27;avg(b) by category&#x27;</span>)  </span><br><span class="line">)</span><br><span class="line"><span class="comment">## 设置条形图颜色为firebrick</span></span><br><span class="line"><span class="comment">## 设置y轴标题为category</span></span><br><span class="line"><span class="comment">## 设置x轴标题为“avg(b) by category”</span></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a class="header-anchor" href="#参考资料"></a>参考资料</h1><ul><li><a href="https://altair-viz.github.io/">Altair官网</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=MzIzNjc1NzUzMw==&amp;mid=2247512075&amp;idx=3&amp;sn=bcd88ceeaad7a89a4895982b1b61fb9f&amp;chksm=e8d00779dfa78e6fb71c176dce490b4a69f85458d4d2eb0ed781749cc833c926aa2b98f8cdfd&amp;scene=21#wechat_redirect">比Excel制图更强大，Python可视化工具Altair入门教程</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;center&gt;A Grammar of Interactive Graphics&lt;/center&gt;</summary>
    
    
    
    <category term="Python" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Python/"/>
    
    
    <category term="Python" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Python/"/>
    
    <category term="Visualization 可视化" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Visualization-%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>Spark | PySpark</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/Spark-PySpark.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/Spark-PySpark.html</id>
    <published>2021-07-31T13:56:16.000Z</published>
    <updated>2022-04-07T11:35:23.102Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><h1 id="读取数据"><a class="header-anchor" href="#读取数据"></a>读取数据</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 从HDFS读取</span></span><br><span class="line"><span class="keyword">from</span> pyspark.sql <span class="keyword">import</span> SparkSession, HiveContext, DataFrameWriter</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">spark = SparkSession.builder.enableHiveSupport().appName(<span class="string">&#x27;test&#x27;</span>).getOrCreate()</span><br><span class="line">start = time.time()</span><br><span class="line"></span><br><span class="line"><span class="comment">## HDFS上载入parquet格式</span></span><br><span class="line"><span class="built_in">input</span> = <span class="string">&#x27;/aaa/bbb/ccc&#x27;</span></span><br><span class="line">data = spark.read.parquet(<span class="built_in">input</span>)</span><br><span class="line">data.show(<span class="number">5</span>) <span class="comment">## 预览前5行</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pyspark.sql <span class="keyword">import</span> SparkSession, HiveContext</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">spark = SparkSession.builder.enableHiveSupport().appName(<span class="string">&#x27;test&#x27;</span>).getOrCreate()</span><br><span class="line">hive_context = HiveContext(spark)</span><br><span class="line">sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">select  start_date</span></span><br><span class="line"><span class="string">        , end_date</span></span><br><span class="line"><span class="string">from    db_nam.table_name</span></span><br><span class="line"><span class="string">where   pt = &#x27;2021-07-30&#x27;</span></span><br><span class="line"><span class="string">and     type = &#x27;type1&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">df = hive_context.sql(sql)</span><br><span class="line">df.show(<span class="number">5</span>)   <span class="comment">## 预览前5行</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd </span><br><span class="line"></span><br><span class="line">spark = SparkSession \</span><br><span class="line">.builder \</span><br><span class="line">.appNmae(<span class="string">&#x27;xxxx&#x27;</span>) \</span><br><span class="line">.getOrCreate()</span><br><span class="line"></span><br><span class="line"><span class="comment">## 读取数据</span></span><br><span class="line">sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">selecta</span></span><br><span class="line"><span class="string">from b </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">df_spark = spark.sql(sql)</span><br><span class="line">df = df_spark.toPandas()</span><br><span class="line"></span><br><span class="line"><span class="comment">## 写入数据</span></span><br><span class="line">df_spark_new = sqlContext.createDataFrame(df_res)</span><br><span class="line">df_spark_new.coalesce(<span class="number">1</span>)</span><br><span class="line">df_spark_new.createOrReplaceTempView(<span class="string">&quot;tmp_table&quot;</span>)</span><br><span class="line"></span><br><span class="line">sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">insert overwrite table $&#123;DB_NAME&#125;.app_xx_yy_zz partition (pt = &#x27;$&#123;bizdate&#125;&#x27;)</span></span><br><span class="line"><span class="string">selecta</span></span><br><span class="line"><span class="string">, b</span></span><br><span class="line"><span class="string">, c</span></span><br><span class="line"><span class="string">from  tmp_table</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">spark.sql(sql)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pyhive <span class="keyword">import</span> hive</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">conn = hive.connect(</span><br><span class="line">host=os.environ[<span class="string">&#x27;PYHIVE_HOST&#x27;</span>],</span><br><span class="line">port=os.environ[<span class="string">&#x27;PYHIVE_PORT&#x27;</span>],</span><br><span class="line">username=os.environ[<span class="string">&#x27;JUPYTER_HADOOP_USER&#x27;</span>],</span><br><span class="line">password=os.environ[<span class="string">&#x27;HADOOP_USER_PASSWORD&#x27;</span>],</span><br><span class="line">auth=<span class="string">&#x27;LDAP&#x27;</span>,</span><br><span class="line">configuration=&#123;</span><br><span class="line"><span class="string">&#x27;mapreduce.job.queuename&#x27;</span>: os.environ[<span class="string">&#x27;JUPYTER_HADOOP_QUEUE&#x27;</span>],</span><br><span class="line"><span class="string">&#x27;hive.resultset.use.unique.column.names&#x27;</span>: <span class="string">&#x27;false&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sql = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">select a</span></span><br><span class="line"><span class="string">from table</span></span><br><span class="line"><span class="string">where pt = &#x27;%s&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span> % (</span><br><span class="line"><span class="string">&#x27;2022-03-20&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">df = pd.read_sql_query(sql, conn)</span><br><span class="line">df.to_csv(<span class="string">&#x27;filename.csv&#x27;</span>, encoding=<span class="string">&#x27;utf_8_sig&#x27;</span>, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a class="header-anchor" href="#参考资料"></a>参考资料</h1><ul><li><a href="https://www.cnblogs.com/xiximayou/articles/13817514.html">PySpark读取和存入数据的三种方法</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Data Analysis 数据分析" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Data-Analysis-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
    
    <category term="Data Science" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Data-Science/"/>
    
    <category term="Spark" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Spark/"/>
    
  </entry>
  
  <entry>
    <title>可视化 | Echarts</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/Visualization-Echarts.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/Visualization-Echarts.html</id>
    <published>2021-07-24T16:14:21.000Z</published>
    <updated>2023-03-27T15:31:02.865Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><meta name="referrer" content="no-referrer"><h1 id="Echarts"><a href="#Echarts" class="headerlink" title="Echarts"></a>Echarts</h1><h1 id="安装方式"><a href="#安装方式" class="headerlink" title="安装方式"></a>安装方式</h1><p>尝试了两种方法：</p><ol><li>安装插件<code>hexo-tag-echarts3</code></li><li>下载相关js文件</li></ol><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-tag-echarts3 --save</span><br></pre></td></tr></table></figure><p>并在markdown文中写：</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&#123;% echarts 800 &#x27;85%&#x27; %&#125;</span><br><span class="line">// 800表示图表展示的高度为800px</span><br><span class="line">// &#x27;85%&#x27;表示图表展示的宽度为85%</span><br><span class="line">&#123;</span><br><span class="line"><span class="code">    title: &#123;</span></span><br><span class="line"><span class="code">        text: &#x27;天气情况统计&#x27;,   // 主标题</span></span><br><span class="line"><span class="code">        subtext: &#x27;虚构数据&#x27;,    // 副标题 </span></span><br><span class="line"><span class="code">        left: &#x27;center&#x27;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    tooltip: &#123;</span></span><br><span class="line"><span class="code">        trigger: &#x27;item&#x27;, </span></span><br><span class="line"><span class="code">        formatter: &quot;&#123;a&#125; &lt;br/&gt;&#123;b&#125;：&#123;c&#125;（&#123;d&#125;%）&quot;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    legend: &#123; // 图例</span></span><br><span class="line"><span class="code">        // orient: &#x27;vertical&#x27;,</span></span><br><span class="line"><span class="code">        // top: &#x27;middle&#x27;,</span></span><br><span class="line"><span class="code">        bottom: 10,</span></span><br><span class="line"><span class="code">        left: &#x27;center&#x27;, </span></span><br><span class="line"><span class="code">        data: [&#x27;西凉&#x27;, &#x27;益州&#x27;, &#x27;成都&#x27;, &#x27;杭州&#x27;]</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    series: [ // 序列/数据</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name: &#x27;天气数据&#x27;,</span></span><br><span class="line"><span class="code">            type: &#x27;pie&#x27;,    //  饼图</span></span><br><span class="line"><span class="code">            radius: &#x27;75%&#x27;,</span></span><br><span class="line"><span class="code">            center: [&#x27;50%&#x27;, &#x27;50%&#x27;],</span></span><br><span class="line"><span class="code">            selectedMode: &#x27;single&#x27;,</span></span><br><span class="line"><span class="code">            data: [</span></span><br><span class="line"><span class="code">                &#123;value:520, name:&#x27;西凉&#x27;&#125;,</span></span><br><span class="line"><span class="code">                &#123;value:510, name:&#x27;益州&#x27;&#125;,</span></span><br><span class="line"><span class="code">                &#123;value:627, name:&#x27;成都&#x27;&#125;,</span></span><br><span class="line"><span class="code">                &#123;value:826, name:&#x27;杭州&#x27;&#125;</span></span><br><span class="line"><span class="code">            ],</span></span><br><span class="line"><span class="code">            itemStyle: &#123;</span></span><br><span class="line"><span class="code">                emphasis: &#123;</span></span><br><span class="line"><span class="code">                    shadowBlur: 10,</span></span><br><span class="line"><span class="code">                    shadowOffsetX: 0,</span></span><br><span class="line"><span class="code">                    shadowColor: &#x27;rgba(0, 0, 0, 0.5)&#x27;</span></span><br><span class="line"><span class="code">                &#125;</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    ]</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code">&#123;% endecharts %&#125;</span></span><br></pre></td></tr></table></figure><p>效果：</p><div id="echarts1287" style="width: 85%;height: 800px;margin: 0 auto"></div><script src="https://cdn.bootcss.com/echarts/3.8.0/echarts.common.min.js"></script><script type="text/javascript">        // 基于准备好的dom，初始化echarts实例        var myChart = echarts.init(document.getElementById('echarts1287'));        // 指定图表的配置项和数据        var option = // 800表示图表展示的高度为800px// '85%'表示图表展示的宽度为85%{    title: {        text: '天气情况统计',   // 主标题        subtext: '虚构数据',    // 副标题         left: 'center'    },    tooltip: {        trigger: 'item',         formatter: "{a} <br/>{b}：{c}（{d}%）"    },    legend: { // 图例        // orient: 'vertical',        // top: 'middle',        bottom: 10,        left: 'center',         data: ['西凉', '益州', '成都', '杭州']    },    series: [ // 序列/数据        {            name: '天气数据',            type: 'pie',    //  饼图            radius: '75%',            center: ['50%', '50%'],            selectedMode: 'single',            data: [                {value:520, name:'西凉'},                {value:510, name:'益州'},                {value:627, name:'成都'},                {value:826, name:'杭州'}            ],            itemStyle: {                emphasis: {                    shadowBlur: 10,                    shadowOffsetX: 0,                    shadowColor: 'rgba(0, 0, 0, 0.5)'                }            }        }    ]}        // 使用刚指定的配置项和数据显示图表。        myChart.setOption(option);</script><h2 id="下载相关js文件"><a href="#下载相关js文件" class="headerlink" title="下载相关js文件"></a>下载相关js文件</h2><ol><li>下载<code>echarts.min.js</code>和<code>jquery.js</code>文件<ul><li>在<a href="https://github.com/apache/echarts/tree/4.6.0/dist">echarts.min.js下载地址</a>中找到<code>echarts.min.js</code>，右键点击“将链接另存为”将文件保存到本地</li><li>在<a href="https://jquery.com/download/">jquery官网</a>找到“Download the uncompressed, development jQuery 3.6.0”，打开，将文本复制粘贴到js文件中，保存为“jquery.js”文件</li></ul></li><li>将上述两个js文件保存在<code>hexo\themes\&lt;theme_name&gt;\source\js</code>文件夹下</li><li>在markdown文件中写入需要如下文本：</li></ol><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test1&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;height:500px;&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span><span class="attr">src</span>=<span class="string">&quot;/js/echarts.min.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span><span class="attr">src</span>=<span class="string">&quot;/js/jquery.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span></span><br><span class="line">var myChart1 = echarts.init(document.getElementById(&quot;test1&quot;));</span><br><span class="line">option1 = &#123;</span><br><span class="line"><span class="code">    title: &#123;</span></span><br><span class="line"><span class="code">        text: &#x27;天气情况统计&#x27;,   // 主标题</span></span><br><span class="line"><span class="code">        subtext: &#x27;虚构数据&#x27;,    // 副标题 </span></span><br><span class="line"><span class="code">        left: &#x27;center&#x27;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    tooltip: &#123;</span></span><br><span class="line"><span class="code">        trigger: &#x27;item&#x27;, </span></span><br><span class="line"><span class="code">        formatter: &quot;&#123;a&#125; &lt;br/&gt;&#123;b&#125;：&#123;c&#125;（&#123;d&#125;%）&quot;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    legend: &#123; // 图例</span></span><br><span class="line"><span class="code">        // orient: &#x27;vertical&#x27;,</span></span><br><span class="line"><span class="code">        // top: &#x27;middle&#x27;,</span></span><br><span class="line"><span class="code">        bottom: 10,</span></span><br><span class="line"><span class="code">        left: &#x27;center&#x27;, </span></span><br><span class="line"><span class="code">        data: [&#x27;西凉&#x27;, &#x27;益州&#x27;, &#x27;成都&#x27;, &#x27;杭州&#x27;]</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    series: [ // 序列/数据</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name: &#x27;天气数据&#x27;,</span></span><br><span class="line"><span class="code">            type: &#x27;pie&#x27;,    //  饼图</span></span><br><span class="line"><span class="code">            radius: &#x27;75%&#x27;,</span></span><br><span class="line"><span class="code">            center: [&#x27;50%&#x27;, &#x27;50%&#x27;],</span></span><br><span class="line"><span class="code">            selectedMode: &#x27;single&#x27;,</span></span><br><span class="line"><span class="code">            data: [</span></span><br><span class="line"><span class="code">                &#123;value:520, name:&#x27;西凉&#x27;&#125;,</span></span><br><span class="line"><span class="code">                &#123;value:510, name:&#x27;益州&#x27;&#125;,</span></span><br><span class="line"><span class="code">                &#123;value:627, name:&#x27;成都&#x27;&#125;,</span></span><br><span class="line"><span class="code">                &#123;value:826, name:&#x27;杭州&#x27;&#125;</span></span><br><span class="line"><span class="code">            ],</span></span><br><span class="line"><span class="code">            itemStyle: &#123;</span></span><br><span class="line"><span class="code">                emphasis: &#123;</span></span><br><span class="line"><span class="code">                    shadowBlur: 10,</span></span><br><span class="line"><span class="code">                    shadowOffsetX: 0,</span></span><br><span class="line"><span class="code">                    shadowColor: &#x27;rgba(0, 0, 0, 0.5)&#x27;</span></span><br><span class="line"><span class="code">                &#125;</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    ]</span></span><br><span class="line"><span class="code">&#125;;</span></span><br><span class="line"><span class="code">myChart1.setOption(option1);</span></span><br><span class="line"><span class="code">window.onresize=function()&#123;</span></span><br><span class="line"><span class="code">    myChart1.resize();</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p>动态饼图效果如下：</p><div id="test1" style="width:100%;height:500px;"></div><script type="text/javascript" src="/js/echarts.min.js"></script><script type="text/javascript" src="/js/jquery.js"></script><script type="text/javascript">var myChart1 = echarts.init(document.getElementById("test1"));option1 = {    title: {        text: '天气情况统计',   // 主标题        subtext: '虚构数据',    // 副标题         left: 'center'    },    tooltip: {        trigger: 'item',         formatter: "{a} <br/>{b}：{c}（{d}%）"    },    legend: { // 图例        // orient: 'vertical',        // top: 'middle',        bottom: 10,        left: 'center',         data: ['西凉', '益州', '成都', '杭州']    },    series: [ // 序列/数据        {            name: '天气数据',            type: 'pie',    //  饼图            radius: '75%',            center: ['50%', '50%'],            selectedMode: 'single',            data: [                {value:520, name:'西凉'},                {value:510, name:'益州'},                {value:627, name:'成都'},                {value:826, name:'杭州'}            ],            itemStyle: {                emphasis: {                    shadowBlur: 10,                    shadowOffsetX: 0,                    shadowColor: 'rgba(0, 0, 0, 0.5)'                }            }        }    ]};myChart1.setOption(option1);window.onresize=function(){    myChart1.resize();}</script><h1 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h1><blockquote><p>更多样例请见：<a href="https://echarts.apache.org/examples/zh/index.html">Echarts官网</a></p></blockquote><h2 id="饼图"><a href="#饼图" class="headerlink" title="饼图"></a>饼图</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&#123;% echarts 800 &#x27;85%&#x27; %&#125;</span><br><span class="line">// 800表示图表展示的高度为800px</span><br><span class="line">// &#x27;85%&#x27;表示图表展示的宽度为85%</span><br><span class="line">&#123;</span><br><span class="line"><span class="code">    title: &#123;</span></span><br><span class="line"><span class="code">        text: &#x27;天气情况统计&#x27;,   // 主标题</span></span><br><span class="line"><span class="code">        subtext: &#x27;虚构数据&#x27;,    // 副标题 </span></span><br><span class="line"><span class="code">        left: &#x27;center&#x27;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    tooltip: &#123;</span></span><br><span class="line"><span class="code">        trigger: &#x27;item&#x27;, </span></span><br><span class="line"><span class="code">        formatter: &quot;&#123;a&#125; &lt;br/&gt;&#123;b&#125;：&#123;c&#125;（&#123;d&#125;%）&quot;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    legend: &#123; // 图例</span></span><br><span class="line"><span class="code">        // orient: &#x27;vertical&#x27;,</span></span><br><span class="line"><span class="code">        // top: &#x27;middle&#x27;,</span></span><br><span class="line"><span class="code">        bottom: 10,</span></span><br><span class="line"><span class="code">        left: &#x27;center&#x27;, </span></span><br><span class="line"><span class="code">        data: [&#x27;西凉&#x27;, &#x27;益州&#x27;, &#x27;成都&#x27;, &#x27;杭州&#x27;]</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    series: [ // 序列/数据</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name: &#x27;天气数据&#x27;,</span></span><br><span class="line"><span class="code">            type: &#x27;pie&#x27;,    //  饼图</span></span><br><span class="line"><span class="code">            radius: &#x27;75%&#x27;,</span></span><br><span class="line"><span class="code">            center: [&#x27;50%&#x27;, &#x27;50%&#x27;],</span></span><br><span class="line"><span class="code">            selectedMode: &#x27;single&#x27;,</span></span><br><span class="line"><span class="code">            data: [</span></span><br><span class="line"><span class="code">                &#123;value:520, name:&#x27;西凉&#x27;&#125;,</span></span><br><span class="line"><span class="code">                &#123;value:510, name:&#x27;益州&#x27;&#125;,</span></span><br><span class="line"><span class="code">                &#123;value:627, name:&#x27;成都&#x27;&#125;,</span></span><br><span class="line"><span class="code">                &#123;value:826, name:&#x27;杭州&#x27;&#125;</span></span><br><span class="line"><span class="code">            ],</span></span><br><span class="line"><span class="code">            itemStyle: &#123;</span></span><br><span class="line"><span class="code">                emphasis: &#123;</span></span><br><span class="line"><span class="code">                    shadowBlur: 10,</span></span><br><span class="line"><span class="code">                    shadowOffsetX: 0,</span></span><br><span class="line"><span class="code">                    shadowColor: &#x27;rgba(0, 0, 0, 0.5)&#x27;</span></span><br><span class="line"><span class="code">                &#125;</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    ]</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code">&#123;% endecharts %&#125;</span></span><br></pre></td></tr></table></figure><div id="echarts8553" style="width: 85%;height: 800px;margin: 0 auto"></div><script src="https://cdn.bootcss.com/echarts/3.8.0/echarts.common.min.js"></script><script type="text/javascript">        // 基于准备好的dom，初始化echarts实例        var myChart = echarts.init(document.getElementById('echarts8553'));        // 指定图表的配置项和数据        var option = // 800表示图表展示的高度为800px// '85%'表示图表展示的宽度为85%{    title: {        text: '天气情况统计',   // 主标题        subtext: '虚构数据',    // 副标题         left: 'center'    },    tooltip: {        trigger: 'item',         formatter: "{a} <br/>{b}：{c}（{d}%）"    },    legend: { // 图例        // orient: 'vertical',        // top: 'middle',        bottom: 10,        left: 'center',         data: ['西凉', '益州', '成都', '杭州']    },    series: [ // 序列/数据        {            name: '天气数据',            type: 'pie',    //  饼图            radius: '75%',            center: ['50%', '50%'],            selectedMode: 'single',            data: [                {value:520, name:'西凉'},                {value:510, name:'益州'},                {value:627, name:'成都'},                {value:826, name:'杭州'}            ],            itemStyle: {                emphasis: {                    shadowBlur: 10,                    shadowOffsetX: 0,                    shadowColor: 'rgba(0, 0, 0, 0.5)'                }            }        }    ]}        // 使用刚指定的配置项和数据显示图表。        myChart.setOption(option);</script><h2 id="散点图"><a href="#散点图" class="headerlink" title="散点图"></a>散点图</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br></pre></td><td class="code"><pre><span class="line">&#123;% echarts 800 &#x27;85%&#x27; %&#125;</span><br><span class="line">&#123;</span><br><span class="line"><span class="code">    title : &#123;</span></span><br><span class="line"><span class="code">        text: &#x27;男性女性身高体重分布&#x27;,</span></span><br><span class="line"><span class="code">        subtext: &#x27;抽样调查来自: Heinz  2003&#x27;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    grid: &#123;</span></span><br><span class="line"><span class="code">        left: &#x27;3%&#x27;,</span></span><br><span class="line"><span class="code">        right: &#x27;7%&#x27;,</span></span><br><span class="line"><span class="code">        bottom: &#x27;3%&#x27;,</span></span><br><span class="line"><span class="code">        containLabel: true</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    tooltip : &#123;</span></span><br><span class="line"><span class="code">        // trigger: &#x27;axis&#x27;,</span></span><br><span class="line"><span class="code">        showDelay : 0,</span></span><br><span class="line"><span class="code">        formatter : function (params) &#123;</span></span><br><span class="line"><span class="code">            if (params.value.length &gt; 1) &#123;</span></span><br><span class="line"><span class="code">                return params.seriesName + &#x27; :&lt;br/&gt;&#x27;</span></span><br><span class="line"><span class="code">                + params.value[0] + &#x27;cm &#x27;</span></span><br><span class="line"><span class="code">                + params.value[1] + &#x27;kg &#x27;;</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">            else &#123;</span></span><br><span class="line"><span class="code">                return params.seriesName + &#x27; :&lt;br/&gt;&#x27;</span></span><br><span class="line"><span class="code">                + params.name + &#x27; : &#x27;</span></span><br><span class="line"><span class="code">                + params.value + &#x27;kg &#x27;;</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;,</span></span><br><span class="line"><span class="code">        axisPointer:&#123;</span></span><br><span class="line"><span class="code">            show: true,</span></span><br><span class="line"><span class="code">            type : &#x27;cross&#x27;,</span></span><br><span class="line"><span class="code">            lineStyle: &#123;</span></span><br><span class="line"><span class="code">                type : &#x27;dashed&#x27;,</span></span><br><span class="line"><span class="code">                width : 1</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    toolbox: &#123;</span></span><br><span class="line"><span class="code">        feature: &#123;</span></span><br><span class="line"><span class="code">            dataZoom: &#123;&#125;,</span></span><br><span class="line"><span class="code">            brush: &#123;</span></span><br><span class="line"><span class="code">                type: [&#x27;rect&#x27;, &#x27;polygon&#x27;, &#x27;clear&#x27;]</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    brush: &#123;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    legend: &#123;</span></span><br><span class="line"><span class="code">        data: [&#x27;女性&#x27;,&#x27;男性&#x27;],</span></span><br><span class="line"><span class="code">        left: &#x27;center&#x27;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    xAxis : [</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            type : &#x27;value&#x27;,</span></span><br><span class="line"><span class="code">            scale:true,</span></span><br><span class="line"><span class="code">            axisLabel : &#123;</span></span><br><span class="line"><span class="code">                formatter: &#x27;&#123;value&#125; cm&#x27;</span></span><br><span class="line"><span class="code">            &#125;,</span></span><br><span class="line"><span class="code">            splitLine: &#123;</span></span><br><span class="line"><span class="code">                show: false</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    ],</span></span><br><span class="line"><span class="code">    yAxis : [</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            type : &#x27;value&#x27;,</span></span><br><span class="line"><span class="code">            scale:true,</span></span><br><span class="line"><span class="code">            axisLabel : &#123;</span></span><br><span class="line"><span class="code">                formatter: &#x27;&#123;value&#125; kg&#x27;</span></span><br><span class="line"><span class="code">            &#125;,</span></span><br><span class="line"><span class="code">            splitLine: &#123;</span></span><br><span class="line"><span class="code">                show: false</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    ],</span></span><br><span class="line"><span class="code">    series : [</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name:&#x27;女性&#x27;,</span></span><br><span class="line"><span class="code">            type:&#x27;scatter&#x27;,</span></span><br><span class="line"><span class="code">            data: [[161.2, 51.6], [167.5, 59.0], [159.5, 49.2], [157.0, 63.0], [155.8, 53.6],</span></span><br><span class="line"><span class="code">                [170.0, 59.0], [159.1, 47.6], [166.0, 69.8], [176.2, 66.8], [160.2, 75.2],</span></span><br><span class="line"><span class="code">                [172.5, 55.2], [170.9, 54.2], [172.9, 62.5], [153.4, 42.0], [160.0, 50.0],</span></span><br><span class="line"><span class="code">                [147.2, 49.8], [168.2, 49.2], [175.0, 73.2], [157.0, 47.8], [167.6, 68.8],</span></span><br><span class="line"><span class="code">                [159.5, 50.6], [175.0, 82.5], [166.8, 57.2], [176.5, 87.8], [170.2, 72.8],</span></span><br><span class="line"><span class="code">                [174.0, 54.5], [173.0, 59.8], [179.9, 67.3], [170.5, 67.8], [160.0, 47.0],</span></span><br><span class="line"><span class="code">                [154.4, 46.2], [162.0, 55.0], [176.5, 83.0], [160.0, 54.4], [152.0, 45.8],</span></span><br><span class="line"><span class="code">                [162.1, 53.6], [170.0, 73.2], [160.2, 52.1], [161.3, 67.9], [166.4, 56.6],</span></span><br><span class="line"><span class="code">                [168.9, 62.3], [163.8, 58.5], [167.6, 54.5], [160.0, 50.2], [161.3, 60.3],</span></span><br><span class="line"><span class="code">                [167.6, 58.3], [165.1, 56.2], [160.0, 50.2], [170.0, 72.9], [157.5, 59.8],</span></span><br><span class="line"><span class="code">                [167.6, 61.0], [160.7, 69.1], [163.2, 55.9], [152.4, 46.5], [157.5, 54.3],</span></span><br><span class="line"><span class="code">                [168.3, 54.8], [180.3, 60.7], [165.5, 60.0], [165.0, 62.0], [164.5, 60.3],</span></span><br><span class="line"><span class="code">                [156.0, 52.7], [160.0, 74.3], [163.0, 62.0], [165.7, 73.1], [161.0, 80.0],</span></span><br><span class="line"><span class="code">                [162.0, 54.7], [166.0, 53.2], [174.0, 75.7], [172.7, 61.1], [167.6, 55.7],</span></span><br><span class="line"><span class="code">                [151.1, 48.7], [164.5, 52.3], [163.5, 50.0], [152.0, 59.3], [169.0, 62.5],</span></span><br><span class="line"><span class="code">                [164.0, 55.7], [161.2, 54.8], [155.0, 45.9], [170.0, 70.6], [176.2, 67.2],</span></span><br><span class="line"><span class="code">                [170.0, 69.4], [162.5, 58.2], [170.3, 64.8], [164.1, 71.6], [169.5, 52.8],</span></span><br><span class="line"><span class="code">                [163.2, 59.8], [154.5, 49.0], [159.8, 50.0], [173.2, 69.2], [170.0, 55.9],</span></span><br><span class="line"><span class="code">                [161.4, 63.4], [169.0, 58.2], [166.2, 58.6], [159.4, 45.7], [162.5, 52.2],</span></span><br><span class="line"><span class="code">                [159.0, 48.6], [162.8, 57.8], [159.0, 55.6], [179.8, 66.8], [162.9, 59.4],</span></span><br><span class="line"><span class="code">                [161.0, 53.6], [151.1, 73.2], [168.2, 53.4], [168.9, 69.0], [173.2, 58.4],</span></span><br><span class="line"><span class="code">                [171.8, 56.2], [178.0, 70.6], [164.3, 59.8], [163.0, 72.0], [168.5, 65.2],</span></span><br><span class="line"><span class="code">                [166.8, 56.6], [172.7, 105.2], [163.5, 51.8], [169.4, 63.4], [167.8, 59.0],</span></span><br><span class="line"><span class="code">                [159.5, 47.6], [167.6, 63.0], [161.2, 55.2], [160.0, 45.0], [163.2, 54.0],</span></span><br><span class="line"><span class="code">                [162.2, 50.2], [161.3, 60.2], [149.5, 44.8], [157.5, 58.8], [163.2, 56.4],</span></span><br><span class="line"><span class="code">                [172.7, 62.0], [155.0, 49.2], [156.5, 67.2], [164.0, 53.8], [160.9, 54.4],</span></span><br><span class="line"><span class="code">                [162.8, 58.0], [167.0, 59.8], [160.0, 54.8], [160.0, 43.2], [168.9, 60.5],</span></span><br><span class="line"><span class="code">                [158.2, 46.4], [156.0, 64.4], [160.0, 48.8], [167.1, 62.2], [158.0, 55.5],</span></span><br><span class="line"><span class="code">                [167.6, 57.8], [156.0, 54.6], [162.1, 59.2], [173.4, 52.7], [159.8, 53.2],</span></span><br><span class="line"><span class="code">                [170.5, 64.5], [159.2, 51.8], [157.5, 56.0], [161.3, 63.6], [162.6, 63.2],</span></span><br><span class="line"><span class="code">                [160.0, 59.5], [168.9, 56.8], [165.1, 64.1], [162.6, 50.0], [165.1, 72.3],</span></span><br><span class="line"><span class="code">                [166.4, 55.0], [160.0, 55.9], [152.4, 60.4], [170.2, 69.1], [162.6, 84.5],</span></span><br><span class="line"><span class="code">                [170.2, 55.9], [158.8, 55.5], [172.7, 69.5], [167.6, 76.4], [162.6, 61.4],</span></span><br><span class="line"><span class="code">                [167.6, 65.9], [156.2, 58.6], [175.2, 66.8], [172.1, 56.6], [162.6, 58.6],</span></span><br><span class="line"><span class="code">                [160.0, 55.9], [165.1, 59.1], [182.9, 81.8], [166.4, 70.7], [165.1, 56.8],</span></span><br><span class="line"><span class="code">                [177.8, 60.0], [165.1, 58.2], [175.3, 72.7], [154.9, 54.1], [158.8, 49.1],</span></span><br><span class="line"><span class="code">                [172.7, 75.9], [168.9, 55.0], [161.3, 57.3], [167.6, 55.0], [165.1, 65.5],</span></span><br><span class="line"><span class="code">                [175.3, 65.5], [157.5, 48.6], [163.8, 58.6], [167.6, 63.6], [165.1, 55.2],</span></span><br><span class="line"><span class="code">                [165.1, 62.7], [168.9, 56.6], [162.6, 53.9], [164.5, 63.2], [176.5, 73.6],</span></span><br><span class="line"><span class="code">                [168.9, 62.0], [175.3, 63.6], [159.4, 53.2], [160.0, 53.4], [170.2, 55.0],</span></span><br><span class="line"><span class="code">                [162.6, 70.5], [167.6, 54.5], [162.6, 54.5], [160.7, 55.9], [160.0, 59.0],</span></span><br><span class="line"><span class="code">                [157.5, 63.6], [162.6, 54.5], [152.4, 47.3], [170.2, 67.7], [165.1, 80.9],</span></span><br><span class="line"><span class="code">                [172.7, 70.5], [165.1, 60.9], [170.2, 63.6], [170.2, 54.5], [170.2, 59.1],</span></span><br><span class="line"><span class="code">                [161.3, 70.5], [167.6, 52.7], [167.6, 62.7], [165.1, 86.3], [162.6, 66.4],</span></span><br><span class="line"><span class="code">                [152.4, 67.3], [168.9, 63.0], [170.2, 73.6], [175.2, 62.3], [175.2, 57.7],</span></span><br><span class="line"><span class="code">                [160.0, 55.4], [165.1, 104.1], [174.0, 55.5], [170.2, 77.3], [160.0, 80.5],</span></span><br><span class="line"><span class="code">                [167.6, 64.5], [167.6, 72.3], [167.6, 61.4], [154.9, 58.2], [162.6, 81.8],</span></span><br><span class="line"><span class="code">                [175.3, 63.6], [171.4, 53.4], [157.5, 54.5], [165.1, 53.6], [160.0, 60.0],</span></span><br><span class="line"><span class="code">                [174.0, 73.6], [162.6, 61.4], [174.0, 55.5], [162.6, 63.6], [161.3, 60.9],</span></span><br><span class="line"><span class="code">                [156.2, 60.0], [149.9, 46.8], [169.5, 57.3], [160.0, 64.1], [175.3, 63.6],</span></span><br><span class="line"><span class="code">                [169.5, 67.3], [160.0, 75.5], [172.7, 68.2], [162.6, 61.4], [157.5, 76.8],</span></span><br><span class="line"><span class="code">                [176.5, 71.8], [164.4, 55.5], [160.7, 48.6], [174.0, 66.4], [163.8, 67.3]</span></span><br><span class="line"><span class="code">            ],</span></span><br><span class="line"><span class="code">            markArea: &#123;</span></span><br><span class="line"><span class="code">                silent: true,</span></span><br><span class="line"><span class="code">                itemStyle: &#123;</span></span><br><span class="line"><span class="code">                    normal: &#123;</span></span><br><span class="line"><span class="code">                        color: &#x27;transparent&#x27;,</span></span><br><span class="line"><span class="code">                        borderWidth: 1,</span></span><br><span class="line"><span class="code">                        borderType: &#x27;dashed&#x27;</span></span><br><span class="line"><span class="code">                    &#125;</span></span><br><span class="line"><span class="code">                &#125;,</span></span><br><span class="line"><span class="code">                data: [[&#123;</span></span><br><span class="line"><span class="code">                    name: &#x27;女性分布区间&#x27;,</span></span><br><span class="line"><span class="code">                    xAxis: &#x27;min&#x27;,</span></span><br><span class="line"><span class="code">                    yAxis: &#x27;min&#x27;</span></span><br><span class="line"><span class="code">                &#125;, &#123;</span></span><br><span class="line"><span class="code">                    xAxis: &#x27;max&#x27;,</span></span><br><span class="line"><span class="code">                    yAxis: &#x27;max&#x27;</span></span><br><span class="line"><span class="code">                &#125;]]</span></span><br><span class="line"><span class="code">            &#125;,</span></span><br><span class="line"><span class="code">            markPoint : &#123;</span></span><br><span class="line"><span class="code">                data : [</span></span><br><span class="line"><span class="code">                    &#123;type : &#x27;max&#x27;, name: &#x27;最大值&#x27;&#125;,</span></span><br><span class="line"><span class="code">                    &#123;type : &#x27;min&#x27;, name: &#x27;最小值&#x27;&#125;</span></span><br><span class="line"><span class="code">                ]</span></span><br><span class="line"><span class="code">            &#125;,</span></span><br><span class="line"><span class="code">            markLine : &#123;</span></span><br><span class="line"><span class="code">                lineStyle: &#123;</span></span><br><span class="line"><span class="code">                    normal: &#123;</span></span><br><span class="line"><span class="code">                        type: &#x27;solid&#x27;</span></span><br><span class="line"><span class="code">                    &#125;</span></span><br><span class="line"><span class="code">                &#125;,</span></span><br><span class="line"><span class="code">                data : [</span></span><br><span class="line"><span class="code">                    &#123;type : &#x27;average&#x27;, name: &#x27;平均值&#x27;&#125;,</span></span><br><span class="line"><span class="code">                    &#123; xAxis: 160 &#125;</span></span><br><span class="line"><span class="code">                ]</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;,</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name:&#x27;男性&#x27;,</span></span><br><span class="line"><span class="code">            type:&#x27;scatter&#x27;,</span></span><br><span class="line"><span class="code">            data: [[174.0, 65.6], [175.3, 71.8], [193.5, 80.7], [186.5, 72.6], [187.2, 78.8],</span></span><br><span class="line"><span class="code">                [181.5, 74.8], [184.0, 86.4], [184.5, 78.4], [175.0, 62.0], [184.0, 81.6],</span></span><br><span class="line"><span class="code">                [180.0, 76.6], [177.8, 83.6], [192.0, 90.0], [176.0, 74.6], [174.0, 71.0],</span></span><br><span class="line"><span class="code">                [184.0, 79.6], [192.7, 93.8], [171.5, 70.0], [173.0, 72.4], [176.0, 85.9],</span></span><br><span class="line"><span class="code">                [176.0, 78.8], [180.5, 77.8], [172.7, 66.2], [176.0, 86.4], [173.5, 81.8],</span></span><br><span class="line"><span class="code">                [178.0, 89.6], [180.3, 82.8], [180.3, 76.4], [164.5, 63.2], [173.0, 60.9],</span></span><br><span class="line"><span class="code">                [183.5, 74.8], [175.5, 70.0], [188.0, 72.4], [189.2, 84.1], [172.8, 69.1],</span></span><br><span class="line"><span class="code">                [170.0, 59.5], [182.0, 67.2], [170.0, 61.3], [177.8, 68.6], [184.2, 80.1],</span></span><br><span class="line"><span class="code">                [186.7, 87.8], [171.4, 84.7], [172.7, 73.4], [175.3, 72.1], [180.3, 82.6],</span></span><br><span class="line"><span class="code">                [182.9, 88.7], [188.0, 84.1], [177.2, 94.1], [172.1, 74.9], [167.0, 59.1],</span></span><br><span class="line"><span class="code">                [169.5, 75.6], [174.0, 86.2], [172.7, 75.3], [182.2, 87.1], [164.1, 55.2],</span></span><br><span class="line"><span class="code">                [163.0, 57.0], [171.5, 61.4], [184.2, 76.8], [174.0, 86.8], [174.0, 72.2],</span></span><br><span class="line"><span class="code">                [177.0, 71.6], [186.0, 84.8], [167.0, 68.2], [171.8, 66.1], [182.0, 72.0],</span></span><br><span class="line"><span class="code">                [167.0, 64.6], [177.8, 74.8], [164.5, 70.0], [192.0, 101.6], [175.5, 63.2],</span></span><br><span class="line"><span class="code">                [171.2, 79.1], [181.6, 78.9], [167.4, 67.7], [181.1, 66.0], [177.0, 68.2],</span></span><br><span class="line"><span class="code">                [174.5, 63.9], [177.5, 72.0], [170.5, 56.8], [182.4, 74.5], [197.1, 90.9],</span></span><br><span class="line"><span class="code">                [180.1, 93.0], [175.5, 80.9], [180.6, 72.7], [184.4, 68.0], [175.5, 70.9],</span></span><br><span class="line"><span class="code">                [180.6, 72.5], [177.0, 72.5], [177.1, 83.4], [181.6, 75.5], [176.5, 73.0],</span></span><br><span class="line"><span class="code">                [175.0, 70.2], [174.0, 73.4], [165.1, 70.5], [177.0, 68.9], [192.0, 102.3],</span></span><br><span class="line"><span class="code">                [176.5, 68.4], [169.4, 65.9], [182.1, 75.7], [179.8, 84.5], [175.3, 87.7],</span></span><br><span class="line"><span class="code">                [184.9, 86.4], [177.3, 73.2], [167.4, 53.9], [178.1, 72.0], [168.9, 55.5],</span></span><br><span class="line"><span class="code">                [157.2, 58.4], [180.3, 83.2], [170.2, 72.7], [177.8, 64.1], [172.7, 72.3],</span></span><br><span class="line"><span class="code">                [165.1, 65.0], [186.7, 86.4], [165.1, 65.0], [174.0, 88.6], [175.3, 84.1],</span></span><br><span class="line"><span class="code">                [185.4, 66.8], [177.8, 75.5], [180.3, 93.2], [180.3, 82.7], [177.8, 58.0],</span></span><br><span class="line"><span class="code">                [177.8, 79.5], [177.8, 78.6], [177.8, 71.8], [177.8, 116.4], [163.8, 72.2],</span></span><br><span class="line"><span class="code">                [188.0, 83.6], [198.1, 85.5], [175.3, 90.9], [166.4, 85.9], [190.5, 89.1],</span></span><br><span class="line"><span class="code">                [166.4, 75.0], [177.8, 77.7], [179.7, 86.4], [172.7, 90.9], [190.5, 73.6],</span></span><br><span class="line"><span class="code">                [185.4, 76.4], [168.9, 69.1], [167.6, 84.5], [175.3, 64.5], [170.2, 69.1],</span></span><br><span class="line"><span class="code">                [190.5, 108.6], [177.8, 86.4], [190.5, 80.9], [177.8, 87.7], [184.2, 94.5],</span></span><br><span class="line"><span class="code">                [176.5, 80.2], [177.8, 72.0], [180.3, 71.4], [171.4, 72.7], [172.7, 84.1],</span></span><br><span class="line"><span class="code">                [172.7, 76.8], [177.8, 63.6], [177.8, 80.9], [182.9, 80.9], [170.2, 85.5],</span></span><br><span class="line"><span class="code">                [167.6, 68.6], [175.3, 67.7], [165.1, 66.4], [185.4, 102.3], [181.6, 70.5],</span></span><br><span class="line"><span class="code">                [172.7, 95.9], [190.5, 84.1], [179.1, 87.3], [175.3, 71.8], [170.2, 65.9],</span></span><br><span class="line"><span class="code">                [193.0, 95.9], [171.4, 91.4], [177.8, 81.8], [177.8, 96.8], [167.6, 69.1],</span></span><br><span class="line"><span class="code">                [167.6, 82.7], [180.3, 75.5], [182.9, 79.5], [176.5, 73.6], [186.7, 91.8],</span></span><br><span class="line"><span class="code">                [188.0, 84.1], [188.0, 85.9], [177.8, 81.8], [174.0, 82.5], [177.8, 80.5],</span></span><br><span class="line"><span class="code">                [171.4, 70.0], [185.4, 81.8], [185.4, 84.1], [188.0, 90.5], [188.0, 91.4],</span></span><br><span class="line"><span class="code">                [182.9, 89.1], [176.5, 85.0], [175.3, 69.1], [175.3, 73.6], [188.0, 80.5],</span></span><br><span class="line"><span class="code">                [188.0, 82.7], [175.3, 86.4], [170.5, 67.7], [179.1, 92.7], [177.8, 93.6],</span></span><br><span class="line"><span class="code">                [175.3, 70.9], [182.9, 75.0], [170.8, 93.2], [188.0, 93.2], [180.3, 77.7],</span></span><br><span class="line"><span class="code">                [177.8, 61.4], [185.4, 94.1], [168.9, 75.0], [185.4, 83.6], [180.3, 85.5],</span></span><br><span class="line"><span class="code">                [174.0, 73.9], [167.6, 66.8], [182.9, 87.3], [160.0, 72.3], [180.3, 88.6],</span></span><br><span class="line"><span class="code">                [167.6, 75.5], [186.7, 101.4], [175.3, 91.1], [175.3, 67.3], [175.9, 77.7],</span></span><br><span class="line"><span class="code">                [175.3, 81.8], [179.1, 75.5], [181.6, 84.5], [177.8, 76.6], [182.9, 85.0],</span></span><br><span class="line"><span class="code">                [177.8, 102.5], [184.2, 77.3], [179.1, 71.8], [176.5, 87.9], [188.0, 94.3],</span></span><br><span class="line"><span class="code">                [174.0, 70.9], [167.6, 64.5], [170.2, 77.3], [167.6, 72.3], [188.0, 87.3],</span></span><br><span class="line"><span class="code">                [174.0, 80.0], [176.5, 82.3], [180.3, 73.6], [167.6, 74.1], [188.0, 85.9],</span></span><br><span class="line"><span class="code">                [180.3, 73.2], [167.6, 76.3], [183.0, 65.9], [183.0, 90.9], [179.1, 89.1],</span></span><br><span class="line"><span class="code">                [170.2, 62.3], [177.8, 82.7], [179.1, 79.1], [190.5, 98.2], [177.8, 84.1],</span></span><br><span class="line"><span class="code">                [180.3, 83.2], [180.3, 83.2]</span></span><br><span class="line"><span class="code">            ],</span></span><br><span class="line"><span class="code">            markArea: &#123;</span></span><br><span class="line"><span class="code">                silent: true,</span></span><br><span class="line"><span class="code">                itemStyle: &#123;</span></span><br><span class="line"><span class="code">                    normal: &#123;</span></span><br><span class="line"><span class="code">                        color: &#x27;transparent&#x27;,</span></span><br><span class="line"><span class="code">                        borderWidth: 1,</span></span><br><span class="line"><span class="code">                        borderType: &#x27;dashed&#x27;</span></span><br><span class="line"><span class="code">                    &#125;</span></span><br><span class="line"><span class="code">                &#125;,</span></span><br><span class="line"><span class="code">                data: [[&#123;</span></span><br><span class="line"><span class="code">                    name: &#x27;男性分布区间&#x27;,</span></span><br><span class="line"><span class="code">                    xAxis: &#x27;min&#x27;,</span></span><br><span class="line"><span class="code">                    yAxis: &#x27;min&#x27;</span></span><br><span class="line"><span class="code">                &#125;, &#123;</span></span><br><span class="line"><span class="code">                    xAxis: &#x27;max&#x27;,</span></span><br><span class="line"><span class="code">                    yAxis: &#x27;max&#x27;</span></span><br><span class="line"><span class="code">                &#125;]]</span></span><br><span class="line"><span class="code">            &#125;,</span></span><br><span class="line"><span class="code">            markPoint : &#123;</span></span><br><span class="line"><span class="code">                data : [</span></span><br><span class="line"><span class="code">                    &#123;type : &#x27;max&#x27;, name: &#x27;最大值&#x27;&#125;,</span></span><br><span class="line"><span class="code">                    &#123;type : &#x27;min&#x27;, name: &#x27;最小值&#x27;&#125;</span></span><br><span class="line"><span class="code">                ]</span></span><br><span class="line"><span class="code">            &#125;,</span></span><br><span class="line"><span class="code">            markLine : &#123;</span></span><br><span class="line"><span class="code">                lineStyle: &#123;</span></span><br><span class="line"><span class="code">                    normal: &#123;</span></span><br><span class="line"><span class="code">                        type: &#x27;solid&#x27;</span></span><br><span class="line"><span class="code">                    &#125;</span></span><br><span class="line"><span class="code">                &#125;,</span></span><br><span class="line"><span class="code">                data : [</span></span><br><span class="line"><span class="code">                    &#123;type : &#x27;average&#x27;, name: &#x27;平均值&#x27;&#125;,</span></span><br><span class="line"><span class="code">                    &#123; xAxis: 170 &#125;</span></span><br><span class="line"><span class="code">                ]</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    ]</span></span><br><span class="line"><span class="code">&#125;;</span></span><br><span class="line"><span class="code">&#123;% endecharts %&#125;</span></span><br></pre></td></tr></table></figure><div id="echarts9743" style="width: 85%;height: 800px;margin: 0 auto"></div><script src="https://cdn.bootcss.com/echarts/3.8.0/echarts.common.min.js"></script><script type="text/javascript">        // 基于准备好的dom，初始化echarts实例        var myChart = echarts.init(document.getElementById('echarts9743'));        // 指定图表的配置项和数据        var option = {    title : {        text: '男性女性身高体重分布',        subtext: '抽样调查来自: Heinz  2003'    },    grid: {        left: '3%',        right: '7%',        bottom: '3%',        containLabel: true    },    tooltip : {        // trigger: 'axis',        showDelay : 0,        formatter : function (params) {            if (params.value.length > 1) {                return params.seriesName + ' :<br/>'                + params.value[0] + 'cm '                + params.value[1] + 'kg ';            }            else {                return params.seriesName + ' :<br/>'                + params.name + ' : '                + params.value + 'kg ';            }        },        axisPointer:{            show: true,            type : 'cross',            lineStyle: {                type : 'dashed',                width : 1            }        }    },    toolbox: {        feature: {            dataZoom: {},            brush: {                type: ['rect', 'polygon', 'clear']            }        }    },    brush: {    },    legend: {        data: ['女性','男性'],        left: 'center'    },    xAxis : [        {            type : 'value',            scale:true,            axisLabel : {                formatter: '{value} cm'            },            splitLine: {                show: false            }        }    ],    yAxis : [        {            type : 'value',            scale:true,            axisLabel : {                formatter: '{value} kg'            },            splitLine: {                show: false            }        }    ],    series : [        {            name:'女性',            type:'scatter',            data: [[161.2, 51.6], [167.5, 59.0], [159.5, 49.2], [157.0, 63.0], [155.8, 53.6],                [170.0, 59.0], [159.1, 47.6], [166.0, 69.8], [176.2, 66.8], [160.2, 75.2],                [172.5, 55.2], [170.9, 54.2], [172.9, 62.5], [153.4, 42.0], [160.0, 50.0],                [147.2, 49.8], [168.2, 49.2], [175.0, 73.2], [157.0, 47.8], [167.6, 68.8],                [159.5, 50.6], [175.0, 82.5], [166.8, 57.2], [176.5, 87.8], [170.2, 72.8],                [174.0, 54.5], [173.0, 59.8], [179.9, 67.3], [170.5, 67.8], [160.0, 47.0],                [154.4, 46.2], [162.0, 55.0], [176.5, 83.0], [160.0, 54.4], [152.0, 45.8],                [162.1, 53.6], [170.0, 73.2], [160.2, 52.1], [161.3, 67.9], [166.4, 56.6],                [168.9, 62.3], [163.8, 58.5], [167.6, 54.5], [160.0, 50.2], [161.3, 60.3],                [167.6, 58.3], [165.1, 56.2], [160.0, 50.2], [170.0, 72.9], [157.5, 59.8],                [167.6, 61.0], [160.7, 69.1], [163.2, 55.9], [152.4, 46.5], [157.5, 54.3],                [168.3, 54.8], [180.3, 60.7], [165.5, 60.0], [165.0, 62.0], [164.5, 60.3],                [156.0, 52.7], [160.0, 74.3], [163.0, 62.0], [165.7, 73.1], [161.0, 80.0],                [162.0, 54.7], [166.0, 53.2], [174.0, 75.7], [172.7, 61.1], [167.6, 55.7],                [151.1, 48.7], [164.5, 52.3], [163.5, 50.0], [152.0, 59.3], [169.0, 62.5],                [164.0, 55.7], [161.2, 54.8], [155.0, 45.9], [170.0, 70.6], [176.2, 67.2],                [170.0, 69.4], [162.5, 58.2], [170.3, 64.8], [164.1, 71.6], [169.5, 52.8],                [163.2, 59.8], [154.5, 49.0], [159.8, 50.0], [173.2, 69.2], [170.0, 55.9],                [161.4, 63.4], [169.0, 58.2], [166.2, 58.6], [159.4, 45.7], [162.5, 52.2],                [159.0, 48.6], [162.8, 57.8], [159.0, 55.6], [179.8, 66.8], [162.9, 59.4],                [161.0, 53.6], [151.1, 73.2], [168.2, 53.4], [168.9, 69.0], [173.2, 58.4],                [171.8, 56.2], [178.0, 70.6], [164.3, 59.8], [163.0, 72.0], [168.5, 65.2],                [166.8, 56.6], [172.7, 105.2], [163.5, 51.8], [169.4, 63.4], [167.8, 59.0],                [159.5, 47.6], [167.6, 63.0], [161.2, 55.2], [160.0, 45.0], [163.2, 54.0],                [162.2, 50.2], [161.3, 60.2], [149.5, 44.8], [157.5, 58.8], [163.2, 56.4],                [172.7, 62.0], [155.0, 49.2], [156.5, 67.2], [164.0, 53.8], [160.9, 54.4],                [162.8, 58.0], [167.0, 59.8], [160.0, 54.8], [160.0, 43.2], [168.9, 60.5],                [158.2, 46.4], [156.0, 64.4], [160.0, 48.8], [167.1, 62.2], [158.0, 55.5],                [167.6, 57.8], [156.0, 54.6], [162.1, 59.2], [173.4, 52.7], [159.8, 53.2],                [170.5, 64.5], [159.2, 51.8], [157.5, 56.0], [161.3, 63.6], [162.6, 63.2],                [160.0, 59.5], [168.9, 56.8], [165.1, 64.1], [162.6, 50.0], [165.1, 72.3],                [166.4, 55.0], [160.0, 55.9], [152.4, 60.4], [170.2, 69.1], [162.6, 84.5],                [170.2, 55.9], [158.8, 55.5], [172.7, 69.5], [167.6, 76.4], [162.6, 61.4],                [167.6, 65.9], [156.2, 58.6], [175.2, 66.8], [172.1, 56.6], [162.6, 58.6],                [160.0, 55.9], [165.1, 59.1], [182.9, 81.8], [166.4, 70.7], [165.1, 56.8],                [177.8, 60.0], [165.1, 58.2], [175.3, 72.7], [154.9, 54.1], [158.8, 49.1],                [172.7, 75.9], [168.9, 55.0], [161.3, 57.3], [167.6, 55.0], [165.1, 65.5],                [175.3, 65.5], [157.5, 48.6], [163.8, 58.6], [167.6, 63.6], [165.1, 55.2],                [165.1, 62.7], [168.9, 56.6], [162.6, 53.9], [164.5, 63.2], [176.5, 73.6],                [168.9, 62.0], [175.3, 63.6], [159.4, 53.2], [160.0, 53.4], [170.2, 55.0],                [162.6, 70.5], [167.6, 54.5], [162.6, 54.5], [160.7, 55.9], [160.0, 59.0],                [157.5, 63.6], [162.6, 54.5], [152.4, 47.3], [170.2, 67.7], [165.1, 80.9],                [172.7, 70.5], [165.1, 60.9], [170.2, 63.6], [170.2, 54.5], [170.2, 59.1],                [161.3, 70.5], [167.6, 52.7], [167.6, 62.7], [165.1, 86.3], [162.6, 66.4],                [152.4, 67.3], [168.9, 63.0], [170.2, 73.6], [175.2, 62.3], [175.2, 57.7],                [160.0, 55.4], [165.1, 104.1], [174.0, 55.5], [170.2, 77.3], [160.0, 80.5],                [167.6, 64.5], [167.6, 72.3], [167.6, 61.4], [154.9, 58.2], [162.6, 81.8],                [175.3, 63.6], [171.4, 53.4], [157.5, 54.5], [165.1, 53.6], [160.0, 60.0],                [174.0, 73.6], [162.6, 61.4], [174.0, 55.5], [162.6, 63.6], [161.3, 60.9],                [156.2, 60.0], [149.9, 46.8], [169.5, 57.3], [160.0, 64.1], [175.3, 63.6],                [169.5, 67.3], [160.0, 75.5], [172.7, 68.2], [162.6, 61.4], [157.5, 76.8],                [176.5, 71.8], [164.4, 55.5], [160.7, 48.6], [174.0, 66.4], [163.8, 67.3]            ],            markArea: {                silent: true,                itemStyle: {                    normal: {                        color: 'transparent',                        borderWidth: 1,                        borderType: 'dashed'                    }                },                data: [[{                    name: '女性分布区间',                    xAxis: 'min',                    yAxis: 'min'                }, {                    xAxis: 'max',                    yAxis: 'max'                }]]            },            markPoint : {                data : [                    {type : 'max', name: '最大值'},                    {type : 'min', name: '最小值'}                ]            },            markLine : {                lineStyle: {                    normal: {                        type: 'solid'                    }                },                data : [                    {type : 'average', name: '平均值'},                    { xAxis: 160 }                ]            }        },        {            name:'男性',            type:'scatter',            data: [[174.0, 65.6], [175.3, 71.8], [193.5, 80.7], [186.5, 72.6], [187.2, 78.8],                [181.5, 74.8], [184.0, 86.4], [184.5, 78.4], [175.0, 62.0], [184.0, 81.6],                [180.0, 76.6], [177.8, 83.6], [192.0, 90.0], [176.0, 74.6], [174.0, 71.0],                [184.0, 79.6], [192.7, 93.8], [171.5, 70.0], [173.0, 72.4], [176.0, 85.9],                [176.0, 78.8], [180.5, 77.8], [172.7, 66.2], [176.0, 86.4], [173.5, 81.8],                [178.0, 89.6], [180.3, 82.8], [180.3, 76.4], [164.5, 63.2], [173.0, 60.9],                [183.5, 74.8], [175.5, 70.0], [188.0, 72.4], [189.2, 84.1], [172.8, 69.1],                [170.0, 59.5], [182.0, 67.2], [170.0, 61.3], [177.8, 68.6], [184.2, 80.1],                [186.7, 87.8], [171.4, 84.7], [172.7, 73.4], [175.3, 72.1], [180.3, 82.6],                [182.9, 88.7], [188.0, 84.1], [177.2, 94.1], [172.1, 74.9], [167.0, 59.1],                [169.5, 75.6], [174.0, 86.2], [172.7, 75.3], [182.2, 87.1], [164.1, 55.2],                [163.0, 57.0], [171.5, 61.4], [184.2, 76.8], [174.0, 86.8], [174.0, 72.2],                [177.0, 71.6], [186.0, 84.8], [167.0, 68.2], [171.8, 66.1], [182.0, 72.0],                [167.0, 64.6], [177.8, 74.8], [164.5, 70.0], [192.0, 101.6], [175.5, 63.2],                [171.2, 79.1], [181.6, 78.9], [167.4, 67.7], [181.1, 66.0], [177.0, 68.2],                [174.5, 63.9], [177.5, 72.0], [170.5, 56.8], [182.4, 74.5], [197.1, 90.9],                [180.1, 93.0], [175.5, 80.9], [180.6, 72.7], [184.4, 68.0], [175.5, 70.9],                [180.6, 72.5], [177.0, 72.5], [177.1, 83.4], [181.6, 75.5], [176.5, 73.0],                [175.0, 70.2], [174.0, 73.4], [165.1, 70.5], [177.0, 68.9], [192.0, 102.3],                [176.5, 68.4], [169.4, 65.9], [182.1, 75.7], [179.8, 84.5], [175.3, 87.7],                [184.9, 86.4], [177.3, 73.2], [167.4, 53.9], [178.1, 72.0], [168.9, 55.5],                [157.2, 58.4], [180.3, 83.2], [170.2, 72.7], [177.8, 64.1], [172.7, 72.3],                [165.1, 65.0], [186.7, 86.4], [165.1, 65.0], [174.0, 88.6], [175.3, 84.1],                [185.4, 66.8], [177.8, 75.5], [180.3, 93.2], [180.3, 82.7], [177.8, 58.0],                [177.8, 79.5], [177.8, 78.6], [177.8, 71.8], [177.8, 116.4], [163.8, 72.2],                [188.0, 83.6], [198.1, 85.5], [175.3, 90.9], [166.4, 85.9], [190.5, 89.1],                [166.4, 75.0], [177.8, 77.7], [179.7, 86.4], [172.7, 90.9], [190.5, 73.6],                [185.4, 76.4], [168.9, 69.1], [167.6, 84.5], [175.3, 64.5], [170.2, 69.1],                [190.5, 108.6], [177.8, 86.4], [190.5, 80.9], [177.8, 87.7], [184.2, 94.5],                [176.5, 80.2], [177.8, 72.0], [180.3, 71.4], [171.4, 72.7], [172.7, 84.1],                [172.7, 76.8], [177.8, 63.6], [177.8, 80.9], [182.9, 80.9], [170.2, 85.5],                [167.6, 68.6], [175.3, 67.7], [165.1, 66.4], [185.4, 102.3], [181.6, 70.5],                [172.7, 95.9], [190.5, 84.1], [179.1, 87.3], [175.3, 71.8], [170.2, 65.9],                [193.0, 95.9], [171.4, 91.4], [177.8, 81.8], [177.8, 96.8], [167.6, 69.1],                [167.6, 82.7], [180.3, 75.5], [182.9, 79.5], [176.5, 73.6], [186.7, 91.8],                [188.0, 84.1], [188.0, 85.9], [177.8, 81.8], [174.0, 82.5], [177.8, 80.5],                [171.4, 70.0], [185.4, 81.8], [185.4, 84.1], [188.0, 90.5], [188.0, 91.4],                [182.9, 89.1], [176.5, 85.0], [175.3, 69.1], [175.3, 73.6], [188.0, 80.5],                [188.0, 82.7], [175.3, 86.4], [170.5, 67.7], [179.1, 92.7], [177.8, 93.6],                [175.3, 70.9], [182.9, 75.0], [170.8, 93.2], [188.0, 93.2], [180.3, 77.7],                [177.8, 61.4], [185.4, 94.1], [168.9, 75.0], [185.4, 83.6], [180.3, 85.5],                [174.0, 73.9], [167.6, 66.8], [182.9, 87.3], [160.0, 72.3], [180.3, 88.6],                [167.6, 75.5], [186.7, 101.4], [175.3, 91.1], [175.3, 67.3], [175.9, 77.7],                [175.3, 81.8], [179.1, 75.5], [181.6, 84.5], [177.8, 76.6], [182.9, 85.0],                [177.8, 102.5], [184.2, 77.3], [179.1, 71.8], [176.5, 87.9], [188.0, 94.3],                [174.0, 70.9], [167.6, 64.5], [170.2, 77.3], [167.6, 72.3], [188.0, 87.3],                [174.0, 80.0], [176.5, 82.3], [180.3, 73.6], [167.6, 74.1], [188.0, 85.9],                [180.3, 73.2], [167.6, 76.3], [183.0, 65.9], [183.0, 90.9], [179.1, 89.1],                [170.2, 62.3], [177.8, 82.7], [179.1, 79.1], [190.5, 98.2], [177.8, 84.1],                [180.3, 83.2], [180.3, 83.2]            ],            markArea: {                silent: true,                itemStyle: {                    normal: {                        color: 'transparent',                        borderWidth: 1,                        borderType: 'dashed'                    }                },                data: [[{                    name: '男性分布区间',                    xAxis: 'min',                    yAxis: 'min'                }, {                    xAxis: 'max',                    yAxis: 'max'                }]]            },            markPoint : {                data : [                    {type : 'max', name: '最大值'},                    {type : 'min', name: '最小值'}                ]            },            markLine : {                lineStyle: {                    normal: {                        type: 'solid'                    }                },                data : [                    {type : 'average', name: '平均值'},                    { xAxis: 170 }                ]            }        }    ]};        // 使用刚指定的配置项和数据显示图表。        myChart.setOption(option);</script><h2 id="折线图"><a href="#折线图" class="headerlink" title="折线图"></a>折线图</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&#123;% echarts 600 &#x27;100%&#x27; %&#125;</span><br><span class="line">&#123;</span><br><span class="line"><span class="code">    title: &#123;</span></span><br><span class="line"><span class="code">        text: &#x27;折线图堆叠&#x27;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    tooltip: &#123;</span></span><br><span class="line"><span class="code">        trigger: &#x27;axis&#x27;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    legend: &#123;</span></span><br><span class="line"><span class="code">        type: &#x27;scroll&#x27;,</span></span><br><span class="line"><span class="code">        orient: &#x27;vertical&#x27;,</span></span><br><span class="line"><span class="code">        right: 40,</span></span><br><span class="line"><span class="code">        data:[&#x27;邮件营销&#x27;,&#x27;联盟广告&#x27;,&#x27;视频广告&#x27;,&#x27;直接访问&#x27;,&#x27;搜索引擎&#x27;]</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    grid: &#123;</span></span><br><span class="line"><span class="code">        left: &#x27;3%&#x27;,</span></span><br><span class="line"><span class="code">        right: &#x27;4%&#x27;,</span></span><br><span class="line"><span class="code">        bottom: &#x27;3%&#x27;,</span></span><br><span class="line"><span class="code">        containLabel: true</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    toolbox: &#123;</span></span><br><span class="line"><span class="code">        feature: &#123;</span></span><br><span class="line"><span class="code">            saveAsImage: &#123;&#125;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    xAxis: &#123;</span></span><br><span class="line"><span class="code">        type: &#x27;category&#x27;,</span></span><br><span class="line"><span class="code">        boundaryGap: false,</span></span><br><span class="line"><span class="code">        data: [&#x27;周一&#x27;,&#x27;周二&#x27;,&#x27;周三&#x27;,&#x27;周四&#x27;,&#x27;周五&#x27;,&#x27;周六&#x27;,&#x27;周日&#x27;]</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    yAxis: &#123;</span></span><br><span class="line"><span class="code">        type: &#x27;value&#x27;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    series: [</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name:&#x27;邮件营销&#x27;,</span></span><br><span class="line"><span class="code">            type:&#x27;line&#x27;,</span></span><br><span class="line"><span class="code">            stack: &#x27;总量&#x27;,</span></span><br><span class="line"><span class="code">            data:[120, 132, 101, 134, 90, 230, 210]</span></span><br><span class="line"><span class="code">        &#125;,</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name:&#x27;联盟广告&#x27;,</span></span><br><span class="line"><span class="code">            type:&#x27;line&#x27;,</span></span><br><span class="line"><span class="code">            stack: &#x27;总量&#x27;,</span></span><br><span class="line"><span class="code">            data:[220, 182, 191, 234, 290, 330, 310]</span></span><br><span class="line"><span class="code">        &#125;,</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name:&#x27;视频广告&#x27;,</span></span><br><span class="line"><span class="code">            type:&#x27;line&#x27;,</span></span><br><span class="line"><span class="code">            stack: &#x27;总量&#x27;,</span></span><br><span class="line"><span class="code">            data:[150, 232, 201, 154, 190, 330, 410]</span></span><br><span class="line"><span class="code">        &#125;,</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name:&#x27;直接访问&#x27;,</span></span><br><span class="line"><span class="code">            type:&#x27;line&#x27;,</span></span><br><span class="line"><span class="code">            stack: &#x27;总量&#x27;,</span></span><br><span class="line"><span class="code">            data:[320, 332, 301, 334, 390, 330, 320]</span></span><br><span class="line"><span class="code">        &#125;,</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name:&#x27;搜索引擎&#x27;,</span></span><br><span class="line"><span class="code">            type:&#x27;line&#x27;,</span></span><br><span class="line"><span class="code">            stack: &#x27;总量&#x27;,</span></span><br><span class="line"><span class="code">            data:[820, 932, 901, 934, 1290, 1330, 1320]</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    ]</span></span><br><span class="line"><span class="code">&#125;;</span></span><br><span class="line"><span class="code">&#123;% endecharts %&#125;</span></span><br></pre></td></tr></table></figure><div id="echarts512" style="width: 100%;height: 600px;margin: 0 auto"></div><script src="https://cdn.bootcss.com/echarts/3.8.0/echarts.common.min.js"></script><script type="text/javascript">        // 基于准备好的dom，初始化echarts实例        var myChart = echarts.init(document.getElementById('echarts512'));        // 指定图表的配置项和数据        var option = {    title: {        text: '折线图堆叠'    },    tooltip: {        trigger: 'axis'    },    legend: {        type: 'scroll',        orient: 'vertical',        right: 40,        data:['邮件营销','联盟广告','视频广告','直接访问','搜索引擎']    },    grid: {        left: '3%',        right: '4%',        bottom: '3%',        containLabel: true    },    toolbox: {        feature: {            saveAsImage: {}        }    },    xAxis: {        type: 'category',        boundaryGap: false,        data: ['周一','周二','周三','周四','周五','周六','周日']    },    yAxis: {        type: 'value'    },    series: [        {            name:'邮件营销',            type:'line',            stack: '总量',            data:[120, 132, 101, 134, 90, 230, 210]        },        {            name:'联盟广告',            type:'line',            stack: '总量',            data:[220, 182, 191, 234, 290, 330, 310]        },        {            name:'视频广告',            type:'line',            stack: '总量',            data:[150, 232, 201, 154, 190, 330, 410]        },        {            name:'直接访问',            type:'line',            stack: '总量',            data:[320, 332, 301, 334, 390, 330, 320]        },        {            name:'搜索引擎',            type:'line',            stack: '总量',            data:[820, 932, 901, 934, 1290, 1330, 1320]        }    ]};        // 使用刚指定的配置项和数据显示图表。        myChart.setOption(option);</script><h2 id="柱状图"><a href="#柱状图" class="headerlink" title="柱状图"></a>柱状图</h2><h2 id="条形图"><a href="#条形图" class="headerlink" title="条形图"></a>条形图</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&#123;% echarts 400 &#x27;85%&#x27; %&#125;</span><br><span class="line">&#123;</span><br><span class="line"><span class="code">    tooltip : &#123;</span></span><br><span class="line"><span class="code">        trigger: &#x27;axis&#x27;,</span></span><br><span class="line"><span class="code">        axisPointer : &#123;            // 坐标轴指示器，坐标轴触发有效</span></span><br><span class="line"><span class="code">            type : &#x27;shadow&#x27;        // 默认为直线，可选为：&#x27;line&#x27; | &#x27;shadow&#x27;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    legend: &#123;</span></span><br><span class="line"><span class="code">        data:[&#x27;利润&#x27;, &#x27;支出&#x27;, &#x27;收入&#x27;]</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    grid: &#123;</span></span><br><span class="line"><span class="code">        left: &#x27;3%&#x27;,</span></span><br><span class="line"><span class="code">        right: &#x27;4%&#x27;,</span></span><br><span class="line"><span class="code">        bottom: &#x27;3%&#x27;,</span></span><br><span class="line"><span class="code">        containLabel: true</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    xAxis : [</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            type : &#x27;value&#x27;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    ],</span></span><br><span class="line"><span class="code">    yAxis : [</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            type : &#x27;category&#x27;,</span></span><br><span class="line"><span class="code">            axisTick : &#123;show: false&#125;,</span></span><br><span class="line"><span class="code">            data : [&#x27;周一&#x27;,&#x27;周二&#x27;,&#x27;周三&#x27;,&#x27;周四&#x27;,&#x27;周五&#x27;,&#x27;周六&#x27;,&#x27;周日&#x27;]</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    ],</span></span><br><span class="line"><span class="code">    series : [</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name:&#x27;利润&#x27;,</span></span><br><span class="line"><span class="code">            type:&#x27;bar&#x27;,</span></span><br><span class="line"><span class="code">            itemStyle : &#123;</span></span><br><span class="line"><span class="code">                normal: &#123;</span></span><br><span class="line"><span class="code">                    label: &#123;show: true, position: &#x27;inside&#x27;&#125;</span></span><br><span class="line"><span class="code">                &#125;</span></span><br><span class="line"><span class="code">            &#125;,</span></span><br><span class="line"><span class="code">            data:[200, 170, 240, 244, 200, 220, 210]</span></span><br><span class="line"><span class="code">        &#125;,</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name:&#x27;收入&#x27;,</span></span><br><span class="line"><span class="code">            type:&#x27;bar&#x27;,</span></span><br><span class="line"><span class="code">            stack: &#x27;总量&#x27;,</span></span><br><span class="line"><span class="code">            itemStyle: &#123;</span></span><br><span class="line"><span class="code">                normal: &#123;</span></span><br><span class="line"><span class="code">                    label : &#123;show: true&#125;</span></span><br><span class="line"><span class="code">                &#125;</span></span><br><span class="line"><span class="code">            &#125;,</span></span><br><span class="line"><span class="code">            data:[320, 302, 341, 374, 390, 450, 420]</span></span><br><span class="line"><span class="code">        &#125;,</span></span><br><span class="line"><span class="code">        &#123;</span></span><br><span class="line"><span class="code">            name:&#x27;支出&#x27;,</span></span><br><span class="line"><span class="code">            type:&#x27;bar&#x27;,</span></span><br><span class="line"><span class="code">            stack: &#x27;总量&#x27;,</span></span><br><span class="line"><span class="code">            itemStyle: &#123;normal: &#123;</span></span><br><span class="line"><span class="code">                label : &#123;show: true, position: &#x27;left&#x27;&#125;</span></span><br><span class="line"><span class="code">            &#125; &#125;,</span></span><br><span class="line"><span class="code">            data:[-120, -132, -101, -134, -190, -230, -210]</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    ]</span></span><br><span class="line"><span class="code">&#125;;</span></span><br><span class="line"><span class="code">&#123;% endecharts %&#125;</span></span><br></pre></td></tr></table></figure><div id="echarts8564" style="width: 85%;height: 400px;margin: 0 auto"></div><script src="https://cdn.bootcss.com/echarts/3.8.0/echarts.common.min.js"></script><script type="text/javascript">        // 基于准备好的dom，初始化echarts实例        var myChart = echarts.init(document.getElementById('echarts8564'));        // 指定图表的配置项和数据        var option = {    tooltip : {        trigger: 'axis',        axisPointer : {            // 坐标轴指示器，坐标轴触发有效            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'        }    },    legend: {        data:['利润', '支出', '收入']    },    grid: {        left: '3%',        right: '4%',        bottom: '3%',        containLabel: true    },    xAxis : [        {            type : 'value'        }    ],    yAxis : [        {            type : 'category',            axisTick : {show: false},            data : ['周一','周二','周三','周四','周五','周六','周日']        }    ],    series : [        {            name:'利润',            type:'bar',            itemStyle : {                normal: {                    label: {show: true, position: 'inside'}                }            },            data:[200, 170, 240, 244, 200, 220, 210]        },        {            name:'收入',            type:'bar',            stack: '总量',            itemStyle: {                normal: {                    label : {show: true}                }            },            data:[320, 302, 341, 374, 390, 450, 420]        },        {            name:'支出',            type:'bar',            stack: '总量',            itemStyle: {normal: {                label : {show: true, position: 'left'}            } },            data:[-120, -132, -101, -134, -190, -230, -210]        }    ]};        // 使用刚指定的配置项和数据显示图表。        myChart.setOption(option);</script><h2 id="雷达图"><a href="#雷达图" class="headerlink" title="雷达图"></a>雷达图</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test2&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;height:500px;&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span><span class="attr">src</span>=<span class="string">&quot;/js/echarts.min.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span><span class="attr">src</span>=<span class="string">&quot;/js/jquery.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span></span><br><span class="line">var myChart2 = echarts.init(document.getElementById(&quot;test2&quot;));</span><br><span class="line">option2 = &#123;</span><br><span class="line"><span class="code">    title: &#123;</span></span><br><span class="line"><span class="code">        text: &#x27;基础雷达图&#x27;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    tooltip: &#123;&#125;,</span></span><br><span class="line"><span class="code">    legend: &#123;</span></span><br><span class="line"><span class="code">        data: [&#x27;预算分配（Allocated Budget）&#x27;, &#x27;实际开销（Actual Spending）&#x27;]</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    radar: &#123;</span></span><br><span class="line"><span class="code">        // shape: &#x27;circle&#x27;,</span></span><br><span class="line"><span class="code">        name: &#123;</span></span><br><span class="line"><span class="code">            textStyle: &#123;</span></span><br><span class="line"><span class="code">                color: &#x27;#fff&#x27;,</span></span><br><span class="line"><span class="code">                backgroundColor: &#x27;#999&#x27;,</span></span><br><span class="line"><span class="code">                borderRadius: 3,</span></span><br><span class="line"><span class="code">                padding: [3, 5]</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;,</span></span><br><span class="line"><span class="code">        indicator: [</span></span><br><span class="line"><span class="code">            &#123;name: &#x27;销售（Sales）&#x27;, max: 6500&#125;,</span></span><br><span class="line"><span class="code">            &#123;name: &#x27;管理（Adiministration）&#x27;, max: 16000&#125;,</span></span><br><span class="line"><span class="code">            &#123;name: &#x27;信息技术（Information Technology）&#x27;, max: 30000&#125;,</span></span><br><span class="line"><span class="code">            &#123;name: &#x27;客服（Customer Support）&#x27;, max: 38000&#125;,</span></span><br><span class="line"><span class="code">            &#123;name: &#x27;研发（Development）&#x27;, max: 52000&#125;,</span></span><br><span class="line"><span class="code">            &#123;name: &#x27;市场（Marketing）&#x27;, max: 25000&#125;</span></span><br><span class="line"><span class="code">        ]</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    series: [&#123;</span></span><br><span class="line"><span class="code">        name: &#x27;预算 vs 开销（Budget vs Spending）&#x27;,</span></span><br><span class="line"><span class="code">        type: &#x27;radar&#x27;,</span></span><br><span class="line"><span class="code">        // areaStyle: &#123;normal: &#123;&#125; &#125;,</span></span><br><span class="line"><span class="code">        data: [</span></span><br><span class="line"><span class="code">            &#123;</span></span><br><span class="line"><span class="code">                value: [4300, 10000, 28000, 35000, 50000, 19000],</span></span><br><span class="line"><span class="code">                name: &#x27;预算分配（Allocated Budget）&#x27;</span></span><br><span class="line"><span class="code">            &#125;,</span></span><br><span class="line"><span class="code">            &#123;</span></span><br><span class="line"><span class="code">                value: [5000, 14000, 28000, 31000, 42000, 21000],</span></span><br><span class="line"><span class="code">                name: &#x27;实际开销（Actual Spending）&#x27;</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        ]</span></span><br><span class="line"><span class="code">    &#125;]</span></span><br><span class="line"><span class="code">&#125;;</span></span><br><span class="line"><span class="code">myChart2.setOption(option2);</span></span><br><span class="line"><span class="code">window.onresize=function()&#123;</span></span><br><span class="line"><span class="code">    myChart2.resize();</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><div id="test2" style="width:100%;height:500px;"></div><script type="text/javascript" src="/js/echarts.min.js"></script><script type="text/javascript" src="/js/jquery.js"></script><script type="text/javascript">var myChart2 = echarts.init(document.getElementById("test2"));option2 = {    title: {        text: '基础雷达图'    },    tooltip: {},    legend: {        data: ['预算分配（Allocated Budget）', '实际开销（Actual Spending）']    },    radar: {        // shape: 'circle',        name: {            textStyle: {                color: '#fff',                backgroundColor: '#999',                borderRadius: 3,                padding: [3, 5]            }        },        indicator: [            {name: '销售（Sales）', max: 6500},            {name: '管理（Adiministration）', max: 16000},            {name: '信息技术（Information Technology）', max: 30000},            {name: '客服（Customer Support）', max: 38000},            {name: '研发（Development）', max: 52000},            {name: '市场（Marketing）', max: 25000}        ]    },    series: [{        name: '预算 vs 开销（Budget vs Spending）',        type: 'radar',        // areaStyle: {normal: {} },        data: [            {                value: [4300, 10000, 28000, 35000, 50000, 19000],                name: '预算分配（Allocated Budget）'            },            {                value: [5000, 14000, 28000, 31000, 42000, 21000],                name: '实际开销（Actual Spending）'            }        ]    }]};myChart2.setOption(option2);window.onresize=function(){    myChart2.resize();}</script><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://underdream.github.io/post/writing/hexo/embed-echarts-in-hexo/">在Hexo博客中使用ECharts来画图</a></li><li><a href="https://blog.csdn.net/qq_41426117/article/details/105416911">如何在hexo主题里用echarts写思维导图</a></li><li><a href="https://kchen.cc/2016/11/05/echarts-in-hexo/">在Hexo中插入ECharts动态图表</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Everything" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Everything/"/>
    
    
    <category term="Echarts" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Echarts/"/>
    
  </entry>
  
  <entry>
    <title>Python | matplotlib</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/Python-Package-matplotlib.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/Python-Package-matplotlib.html</id>
    <published>2021-07-24T14:01:01.000Z</published>
    <updated>2022-12-10T09:06:40.622Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><meta name="referrer" content="no-referrer"><h1 id="Matplotlib"><a class="header-anchor" href="#Matplotlib"></a>Matplotlib</h1><blockquote><p><a href="https://matplotlib.org/stable/tutorials/index.html">Matplotlib Tutorials</a></p></blockquote><h1 id="axes-Axes-轴格式"><a class="header-anchor" href="#axes-Axes-轴格式"></a>.axes.Axes 轴格式</h1><h2 id="set-major-formatter"><a class="header-anchor" href="#set-major-formatter"></a>.set_major_formatter()</h2><p>设置数据标签的显示的文本格式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ticks = np.arange(<span class="number">0.</span>, <span class="number">8.1</span>, <span class="number">2.</span>)</span><br><span class="line">ax.xaxis.set_ticks(ticks)</span><br><span class="line">ax.xaxis.set_major_formatter(<span class="string">&#x27;&#123;x:1.1f&#125;&#x27;</span>)  <span class="comment">## 显示为1位小数</span></span><br><span class="line"></span><br><span class="line">ax.xaxis.set_major_formatter(<span class="string">&#x27;±&#123;x&#125;°&#x27;</span>) <span class="comment">## 数字前带±号、数字后带°</span></span><br></pre></td></tr></table></figure><h2 id="set-xlim"><a class="header-anchor" href="#set-xlim"></a>.set_xlim()</h2><p>设置x轴的数据范围</p><h2 id="set-ticks"><a class="header-anchor" href="#set-ticks"></a>.set_ticks()</h2><p>设置轴的刻度线</p><ul><li><code>.xaxis.set_ticks()</code>：设置x轴刻度线</li><li><code>.yaxis.set_ticks()</code>：设置y轴刻度线</li></ul><h2 id="set-ticklabels"><a class="header-anchor" href="#set-ticklabels"></a>.set_ticklabels()</h2><p>设置轴的数据标签格式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ticks = np.arange(<span class="number">0.</span>, <span class="number">8.1</span>, <span class="number">2.</span>)</span><br><span class="line">ax.xaxis.set_ticks(ticks)</span><br><span class="line">ax.xaxis.set_ticklabels([<span class="string">f&#x27;<span class="subst">&#123;tick:<span class="number">1.2</span>f&#125;</span>&#x27;</span> <span class="keyword">for</span> tick <span class="keyword">in</span> ticks])</span><br></pre></td></tr></table></figure><h2 id="set-title"><a class="header-anchor" href="#set-title"></a>.set_title()</h2><p>设置图表标题</p><ul><li>参数<code>loc</code>：标题位置<ul><li><code>left</code>：靠左</li><li><code>center</code>：居中</li><li><code>right</code>：靠右</li></ul></li><li>参数<code>pad</code>：标题相对图表偏移（默认为6）</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fig, axs = plt.subplots(<span class="number">3</span>, <span class="number">1</span>, figsize=(<span class="number">5</span>, <span class="number">6</span>), tight_layout=<span class="literal">True</span>)</span><br><span class="line">locs = [<span class="string">&#x27;center&#x27;</span>, <span class="string">&#x27;left&#x27;</span>, <span class="string">&#x27;right&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> ax, loc <span class="keyword">in</span> <span class="built_in">zip</span>(axs, locs):</span><br><span class="line">    ax.plot(x1, y1)</span><br><span class="line">    ax.set_title(<span class="string">&#x27;Title with loc at &#x27;</span>+loc, loc=loc)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="set-xlabel"><a class="header-anchor" href="#set-xlabel"></a>.set_xlabel()</h2><p>修改$x$轴标签</p><blockquote><p><a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_xlabel.html#matplotlib.axes.Axes.set_xlabel">matplotlib.axes.Axes.set_xlabel</a></p></blockquote><ul><li>参数<code>fontsize</code>：设置标签字体大小</li><li>参数<code>fontweight</code>：设备标签字体粗细<ul><li><code>fontweight='bold'</code>：粗体</li></ul></li><li>参数<code>fontproperties</code>：设置字体</li><li>参数<code>horizontalalignment</code>：设置标签水平对齐位置<ul><li><code>horizontalalignment=left</code>：水平向左对齐</li></ul></li><li>参数<code>labelpad</code>：标签相对轴偏移</li><li>参数<code>position=(a, b)</code>：标签位置<ul><li>在<code>.set_xlabel()</code>中，仅<code>a</code>起作用，<code>b</code>随便赋值</li><li>在<code>.set_ylabel()</code>中，仅<code>b</code>起作用，<code>a</code>随便赋值</li></ul></li><li>标签换行：<code>\n</code></li><li>标签含公式：<code>r'$公式内容$'</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line">x1 = np.linspace(<span class="number">0.0</span>, <span class="number">5.0</span>, <span class="number">100</span>)</span><br><span class="line">y1 = np.cos(<span class="number">2</span> * np.pi * x1) * np.exp(-x1)</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">5</span>, <span class="number">3</span>))</span><br><span class="line">fig.subplots_adjust(bottom=<span class="number">0.15</span>, left=<span class="number">0.2</span>)</span><br><span class="line">ax.plot(x1, y1)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;time [s]&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Damped oscillation [V]&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">5</span>, <span class="number">3</span>))</span><br><span class="line">fig.subplots_adjust(bottom=<span class="number">0.15</span>, left=<span class="number">0.2</span>)</span><br><span class="line">ax.plot(x1, y1*<span class="number">10000</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;time [s]&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Damped oscillation [V]&#x27;</span>, labelpad=<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib.font_manager <span class="keyword">import</span> FontProperties</span><br><span class="line"></span><br><span class="line">font = FontProperties()</span><br><span class="line">font.set_family(<span class="string">&#x27;serif&#x27;</span>)</span><br><span class="line">font.set_name(<span class="string">&#x27;Times New Roman&#x27;</span>)</span><br><span class="line">font.set_style(<span class="string">&#x27;italic&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">5</span>, <span class="number">3</span>))</span><br><span class="line">fig.subplots_adjust(bottom=<span class="number">0.15</span>, left=<span class="number">0.2</span>)</span><br><span class="line">ax.plot(x1, y1)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;time [s]&#x27;</span>, fontsize=<span class="string">&#x27;large&#x27;</span>, fontweight=<span class="string">&#x27;bold&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;Damped oscillation [V]&#x27;</span>, fontproperties=font)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">5</span>, <span class="number">3</span>))</span><br><span class="line">fig.subplots_adjust(bottom=<span class="number">0.2</span>, left=<span class="number">0.2</span>)</span><br><span class="line">ax.plot(x1, np.cumsum(y1**<span class="number">2</span>))</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;time [s] \n This was a long experiment&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">r&#x27;$\int\ Y^2\ dt\ \ [V^2 s]$&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="set-ylabel"><a class="header-anchor" href="#set-ylabel"></a>.set_ylabel()</h2><p>修改$y$轴标签</p><blockquote><p>例子见<code>.set_xlabel()</code></p></blockquote><h2 id="tick-params"><a class="header-anchor" href="#tick-params"></a>.tick_params()</h2><p>旋转刻度线标签，使得文本之间互相重叠</p><ul><li>参数<code>rotation</code>：逆时针旋转的度数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">5</span>, <span class="number">3</span>), tight_layout=<span class="literal">True</span>)</span><br><span class="line">base = datetime.datetime(<span class="number">2017</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">time = [base + datetime.timedelta(days=x) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(x1))]</span><br><span class="line"></span><br><span class="line">ax.plot(time, y1)</span><br><span class="line">ax.tick_params(axis=<span class="string">&#x27;x&#x27;</span>, rotation=<span class="number">70</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h1 id="参考资料"><a class="header-anchor" href="#参考资料"></a>参考资料</h1>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Python" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Python/"/>
    
    
    <category term="Python" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Python/"/>
    
    <category term="Visualization 可视化" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Visualization-%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>TED | Are All of Your Memories Real</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/TED-AreAllofYourMemoriesReal.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/TED-AreAllofYourMemoriesReal.html</id>
    <published>2021-05-30T12:16:39.000Z</published>
    <updated>2021-06-08T16:29:58.000Z</updated>
    
    <content type="html"><![CDATA[<center>5th!</center><span id="more"></span><h1 id="Are-All-of-Your-Memories-Real"><a class="header-anchor" href="#Are-All-of-Your-Memories-Real"></a>Are All of Your Memories Real?</h1><ul><li>2021.05.30</li><li><a href="https://www.ted.com/talks/daniel_l_schacter_are_all_of_your_memories_real">Are All of Your Memories Real?</a></li></ul><p>In a study in the 1990s, participants recalled getting lost in a shopping mall as children. Some shared these memories in <s>living</s> <strong>vivid</strong> detail, one even remembered that the old man <s>resecured</s> <strong>rescued</strong> him <s>with</s> <strong>was</strong> wearing a <strong>flannel</strong>（法兰绒） shirt.</p><p>But <s>neither</s> <strong>none of</strong> these people had actually <s>got</s> <strong>gotten</strong> lost in a mall. They produced these false memories when the <s>psychologies</s> <strong>psychologists</strong> <s>conducted</s> <strong>conducting</strong> <s>this</s> <strong>the</strong> study told them they**'d** gotten lost, and <strong>although</strong> <s>that</s> they might not remember the incident, their parents <s>have</s> <strong>had</strong> confirmed it. And it wasn’t just one or two people who thought they remembered getting lost——a quarter of the participants did.</p><p><s>This</s> <strong>These</strong> finding<strong>s</strong> may sound<s>s</s> unbelievable, but they actually reflect a very common experience. Our memories are sometimes unrealiable. And <strong>though</strong> we still don’t know <strong>precisely</strong> <s>we called ability</s> <strong>what causes this fallibility</strong>（易错，不可靠） on <strong>a neurological</strong>（神经学的，神经病学的） level. <s>Researcher</s> <strong>Research</strong> has highlighted <strong>some of</strong> the most common ways our memories diverge from what actually happened.</p><p>The mall study highlights how we can inco<strong>rporate</strong> information from outside sources, like other people or the news, into our personal <s>regnition</s> <strong>recollections</strong>（回忆，追忆；往事，回忆录） withour realising it. This kind of <s>subjectn ability</s> <strong>suggestibility</strong>（可教唆；可建议；被暗示性） is just one influence <s>in</s> our memories. Take another study, in which researchers briefly show<strong>ed</strong> a random collection<s>s</s> of photographs to a group of participants, including images of a university campus none of them had ever visited <s>it</s>. When <s>showing</s> <strong>shown</strong> <s>these</s> <strong>the</strong> images three weeks later, a majority of participants said that they <s>have</s> <strong>had</strong> probably or definitely visited the campus in the past.</p><p>The participants <s>mistributed</s> <strong>misattributed</strong> information from one <s>contest</s> <strong>context</strong>, an image they**'d** seen, <s>on to</s> <strong>onto</strong>（表示“本体，存在”之义） another, <strong>a</strong> memory of something they believed <s>and</s> <strong>they</strong> actually experienced. In another experiment, people were shown an image of <s>an</s> <strong>a</strong> magni<strong>fying</strong> glass, and then told them to imagine a lollipop. They frequently recalled that they saw <s>an magni</s> <strong>the magnifying</strong> glass and the lollipop. They <s>straggly</s> <strong>struggled</strong> to <s>connect</s> <strong>link</strong> the objects to the correct <strong>context</strong> whether they actually saw them, or simply imagined them.</p><p>Another study where <strong>a</strong> <s>psychologies</s> <strong>psychologist</strong> <s>inquired</s> <strong>questioned</strong> over 2,000 people on their views about the legal<strong>ization</strong> of <strong>marijuana</strong>（大麻） , highlights <strong>yet</strong> <s>the</s> another kind of influence <s>way of memories</s> <strong>on memory</strong>. Participants answered <s>the question</s> <strong>questions</strong> in 1973 and 1982. Those who said they <s>have</s> supported the <s>legal</s> <strong>marijuana legalization</strong>  in 1973, but reported they were against in 1982, were more likely <strong>to</strong> recall<s>ed</s> <strong>that</strong> they were actually against legalization in 1973, bringing their old views in <s>one</s> <strong>line</strong> with their curent ones. Our current opinions, feelings and experiences can bias our memories of how we <s>feeled</s> <strong>felt</strong> in the past.</p><p>In another study, researchers gave two groups of participants background information on a historical war and asked them to rate the likelihood that each side would win. They gave each group the same information except <strong>that</strong> they only told one group who had actually won the war, the other group didn’t know the real <s>war’s</s> <strong>world</strong> outcome. In theory, both groups’ answers should be similar, because the likelihood of each side winning isn’t affected by who actually won. If there is <strong>a</strong> 20% <strong>chance of</strong> thunderstorms and <strong>a</strong> thunderstorm happens, the chance of thunderstorms doesn’t <strong>retroactively</strong>（逆动地；追溯地） go up to 100%. Still, the group <s>they</s> <strong>that</strong> knew how the war ended rated the winning side <s>has</s> <strong>as</strong> more likey to win <s>and</s> <strong>than the</strong> group did not.</p><p>All of <s>the ability</s> <strong>these fallibilities of memory</strong> can have real-world <s>in past</s> <strong>impacts</strong>. If <s>the</s> police <s>interegation</s> <strong>interrogations</strong>（讯问） <strong>use leading</strong> questions with eye witnesses or suspects, <s>suggest ability</s> <strong>suggestibility</strong> could result in incorrect identifications or unreliable <s>confections</s> <strong>confessions</strong>（自首；供认；忏悔）. Even in the abscence of <strong>leading</strong> questions（引导性问题）, <strong>misattribution</strong> can <s>leading</s> <strong>lead to inaccurate</strong> eyewitness <strong>testimony</strong>（证词；证明，证据）. In a courtroom, if <strong>a</strong> judge <strong>rules</strong> a piece of <strong>evidenct inadmissible</strong>（不能允许的，不可接受的） and <strong>tells jurors</strong>（审查委员，陪审员）  to disregard it, they may not be able to do so. In a medical <strong>setting</strong>, if <s>patients</s> <strong>a patient seeks a</strong> second <s>position</s> <strong>opinion and the second physician</strong> is <s>well</s> <strong>aware of the</strong> first one**'s** <s>diagnose</s> <strong>diagnosis</strong>, that knowledge may bias their conclusion.</p><p>Our memories are not <strong>ironclad</strong>（装甲的；坚固的；装甲舰） <s>by</s> <strong>representations of reality</strong>, <s>an</s> but subjective perseptions. And <s>it’s</s> <strong>there is</strong> not <s>necessary</s> <strong>necessarily anything</strong> wrong with that, the problem<strong>s arise</strong> <s>is</s> when we treat memory as fact, rather than ascepting <s>on the mental</s> <strong>this fundamental</strong> truth about the nature of <strong>our recollections</strong>.</p><h1 id="相关文章"><a class="header-anchor" href="#相关文章"></a>相关文章</h1><blockquote><ul><li><a href="/TED-TrySomethingNewfor30days.html" title="Try Something New for 30 days">Try Something New for 30 days</a> </li><li><a href="/TED-WhyDoCatsActSoWeird.html" title="Why Do Cats Act So Weird">Why Do Cats Act So Weird</a></li><li><a href="/TED-5WaystoCreateStrongerConnections.html" title="5 Ways to Create Stronger Connections">5 Ways to Create Stronger Connections</a></li><li><a href="/TED-HowToOutsmart.html" title="How To Outsmart the Prisoner&#39;s Dilemma">How To Outsmart the Prisoner&#39;s Dilemma</a></li></ul></blockquote>]]></content>
    
    
    <summary type="html">&lt;center&gt;5th!&lt;/center&gt;</summary>
    
    
    
    <category term="Everything" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Everything/"/>
    
    
    <category term="English" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/English/"/>
    
    <category term="TED" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/TED/"/>
    
  </entry>
  
  <entry>
    <title>统计学 | 抽样调查 Survey Sampling</title>
    <link href="https://github.com/ShootingWang/ShootingWang.github.io/%E6%8A%BD%E6%A0%B7%E8%B0%83%E6%9F%A5.html"/>
    <id>https://github.com/ShootingWang/ShootingWang.github.io/%E6%8A%BD%E6%A0%B7%E8%B0%83%E6%9F%A5.html</id>
    <published>2021-05-10T13:43:07.000Z</published>
    <updated>2022-04-25T11:08:24.798Z</updated>
    
    <content type="html"><![CDATA[<center></center><span id="more"></span><h1 id="统计调查"><a class="header-anchor" href="#统计调查"></a>统计调查</h1><blockquote><p>冯士雍《抽样调查理论与方法》：<strong>调查</strong>就是使用明确的概念、方法和程序，以有组织、有条理的方式，从总体的部分或所有单元中收集感兴趣的指标信息，并将这些信息综合编辑成有用的简要形式的所有活动。</p></blockquote><h2 id="基本原则"><a class="header-anchor" href="#基本原则"></a>基本原则</h2><ul><li>准确性</li><li>及时性</li><li>完整性</li></ul><h2 id="基本形式"><a class="header-anchor" href="#基本形式"></a>基本形式</h2><h3 id="按调查的对象包括的范围"><a class="header-anchor" href="#按调查的对象包括的范围"></a>按调查的对象包括的范围</h3><p>按调查的对象包括的范围可分为：</p><ol><li>全面调查</li><li>非全面调查</li></ol><p><strong>全面调查</strong>：对调查对象总体中的全部对象进行调查。如：</p><ul><li><u>普查</u>（census）：为特定目的而专门组织的一次性全面调查，说明现象在一定时点上的全面情况<ul><li>需要规定统一的标准时间</li><li>数据的规范化程度较高</li><li>应用范围狭窄</li></ul></li><li>我国在计划经济时代采用全面报表制度获得统计资料</li></ul><p><strong>非全面调查</strong>：只对调查对象总体中的部分对象进行调查。包括：</p><ul><li><u>抽样调</u>查<ul><li>经济性好、时效性强、适应面广、准确性高</li></ul></li><li><u>典型调查</u>：根据调查的目的与要求，在对被调查对象进行全面分析的基础上，有意识地选择若干具有典型意义的或有代表性的单位<ul><li>作用：补充全面调查的不足、在一定条件下可以验证全面调查数据的真实性</li><li>存在主观片面性</li></ul></li><li>……</li></ul><h3 id="按登记时间是否连续"><a class="header-anchor" href="#按登记时间是否连续"></a>按登记时间是否连续</h3><p>按登记时间是否连续可分为：</p><ol><li>经常性调查</li><li>一次性调查</li></ol><h3 id="按调查组织方式"><a class="header-anchor" href="#按调查组织方式"></a>按调查组织方式</h3><p>按调查组织方式可分为：</p><ol><li>统计报表：自下而上提供基础统计资料，具有法律性质<ul><li>以全面调查为主</li></ul></li><li>专门调查</li></ol><h1 id="抽样调查"><a class="header-anchor" href="#抽样调查"></a>抽样调查</h1><p><strong>抽样技术</strong>：从统计调查总体中抽取样本进行调查，获取数据，然后对总体数量特征作出推断的技术。</p><ul><li>是一种非全面统计调查的技术</li><li>运用抽样技术进行的调查称为<strong>抽样调查</strong></li></ul><p><strong>抽样调查</strong>（survey sampling）/ <strong>样本调查</strong>（sample survey）：按一定程序从所研究对象的全体（总体）中抽取一部分（样本）进行调查或观测，获取数据，并以此对总体的一定目标量（未知参数）作出推断。</p><ul><li>是非全面调查中最重要、应用最广泛的一种方法</li><li>与一般调查不同，不只停留于搜集资料和整理资料</li></ul><h2 id="分类"><a class="header-anchor" href="#分类"></a>分类</h2><p>根据样本抽取方式，抽样调查可分为：</p><ol><li>非概率抽样</li><li>概率抽样</li></ol><p>根本区别：样本和抽样是否遵循<strong>随机原则</strong>。即，总体中的单位是否有非零的、事先已知或可以计算的概率被抽中。</p><blockquote><ul><li><strong>随机原则</strong>：在抽选样本时完全排除主观地、有意识地抽选某些调查单元，使每个单元都有一定机会被抽中</li><li>随机 $\neq$ 等概率：等概率抽样是一种随机抽样，但随机抽样并不限定必须是等概率抽样</li><li>随机 VS 随意：<ul><li>随机：可用概率来描述，有严格的科学含义</li><li>随意：带有人为的或主观的因素，不是一个科学的概念</li></ul></li></ul></blockquote><h3 id="概率抽样-随机抽样"><a class="header-anchor" href="#概率抽样-随机抽样"></a>概率抽样 / 随机抽样</h3><p>概率抽样（probability sampling）/ 随机抽样（random sampling）：严格地按照给定的概率来抽取样本</p><p><strong>特点</strong>：</p><ol><li>按一定概率以随机原则抽取样本</li><li>用概率抽样抽取样本单元，需要按照给定的入样概率并通过一定的随机化程序来实现</li><li>当用样本来估计总体目标量时，要考虑到该样本（或每个样本单元）被抽中的概率</li></ol><p><strong>优点</strong>：</p><ul><li>能得到总体未知目标量的可靠估计，并能估计抽样误差（因而能对总体进行推断）</li></ul><p><strong>缺点</strong>：</p><ul><li>比较复杂，更费时费力</li><li>通常费用也较高</li></ul><h3 id="非概率抽样-非随机抽样"><a class="header-anchor" href="#非概率抽样-非随机抽样"></a>非概率抽样 / 非随机抽样</h3><p>相对概率抽样而言，非概率抽样的样本的抽选不是按科学的原则进行的，而是有很大的主观性和随意性。</p><ul><li>能在调查的早期就提供非常有价值的信息，常用在探索性或诊断性研究中，或用在正式调查前的试调查阶段</li></ul><p><strong>优点</strong>：</p><ul><li>快速、便利、节省费用</li></ul><p><strong>缺点</strong>：</p><ul><li>不能从样本对总体进行推断</li><li>不能根据样本计算抽样误差，因此不能从概率意义上控制误差并以此来描述估计的准确性</li></ul><h4 id="随意抽样"><a class="header-anchor" href="#随意抽样"></a>随意抽样</h4><p>随意抽样（haphazard sampling）：无目的、无意识的或仅根据方便的原则进行的抽样</p><blockquote><p>例子：</p><ul><li>“街头拦截”调查：在马路、商场、车站等公共场所对碰巧遇到的调查对象进行调查</li></ul></blockquote><h4 id="目的抽样"><a class="header-anchor" href="#目的抽样"></a>目的抽样</h4><p>目的抽样（purposive sampling）：抽样者根据调查需要，有目的、有意识地挑选所需要的样本</p><h4 id="判断抽样-经验抽样"><a class="header-anchor" href="#判断抽样-经验抽样"></a>判断抽样 / 经验抽样</h4><p>判断抽样（judgement sampling）/经验抽样：抽样者根据自身的经验和判断，选择被认为对总体有代表性的样本</p><ul><li>抽样效果的好坏在很大程度上依赖于抽样者的主观判断能力和经验</li></ul><h4 id="志愿者抽样"><a class="header-anchor" href="#志愿者抽样"></a>志愿者抽样</h4><p>志愿者抽样（volunteer sampling）：被调查者都是志愿者</p><ul><li>一般会导致较大的抽选偏差</li></ul><blockquote><p>例子：</p><ul><li>医疗实验</li><li>样本由广播、电视节目参与互动的受众，或将登在报刊上的意见表寄回的读者组成</li></ul></blockquote><h2 id="作用"><a class="header-anchor" href="#作用"></a>作用</h2><p>抽样调查的作用：</p><ul><li>对不可能进行全面观测或普查而又需要了解全面情况的客观对象，只能采用抽样。可能的情况：<ul><li>所研究的总体是无限的</li><li>观测（或测试）是破坏性的</li></ul></li><li>抽样调查适用于大规模的社会经济调查和民意测验等</li><li>抽样调查能较大程度地节约调查的人力、物力和财力，从而大大降低调查的费用</li><li>抽样调查周期短、时效性强</li><li>抽样调查能提高调查的质量</li></ul><h2 id="应用"><a class="header-anchor" href="#应用"></a>应用</h2><p>抽样调查的主要应用有：</p><ol><li>人口调查</li><li>经济调查</li><li>社会调查<ul><li>公众和民意调查</li></ul></li><li>卫生调查：包括公共卫生情况、预防接种覆盖情况、流行病调查等</li><li>环境资源调查：<ul><li>耕地、森林、草原、能源、动物与害虫的估计</li><li>对大气、水质、粮食与食品污染情况的监测与调查</li></ul></li></ol><h2 id="抽样调查-vs-普查"><a class="header-anchor" href="#抽样调查-vs-普查"></a>抽样调查 vs 普查</h2><ul><li>抽样调查作为普查的补充</li><li>抽样调查可以用来评价和修正包括普查在内的全面统计资料</li><li>在普查基础上进行抽样以作深层次的分析或提前获得总体某些主要目标量的估计</li><li>抽样调查可以用来作为普查的试点以便及时发现问题，并在展开正式普查前进行修正和补充</li><li>普查或其他全面调查的资料可以为抽样调查提供反映总体全部单元的抽样框</li></ul><h1 id="基本概念"><a class="header-anchor" href="#基本概念"></a>基本概念</h1><h2 id="总体"><a class="header-anchor" href="#总体"></a>总体</h2><p>总体（population）：由研究或调查对象的全体所构成的集合</p><ul><li><strong>目标总体</strong>（target population）：所感兴趣的所有调查对象的集合</li><li><strong>抽样总体</strong>（sampling population）：实际抽样调查所覆盖的总体</li></ul><blockquote><ul><li>抽样总体可能与目标总体不完全一致</li><li>理想状态下，目标总体与抽样总体应该完全一致</li><li>依据调查的结果所得到的结论仅适用于抽样总体</li></ul></blockquote><ul><li><strong>有限总体</strong>：总体中所包含的个体数目是有限的</li><li><strong>无限总体</strong>：总体中所包含的个体数目是无限的</li></ul><h2 id="抽样单元"><a class="header-anchor" href="#抽样单元"></a>抽样单元</h2><ul><li>总体是由个体（individual, item）组成的</li></ul><p><strong>抽样单元</strong>（sampling unit）：可以将总体划分成互不重叠又穷尽的有限多个部分，每个这样的部分成为抽样单元</p><ul><li>每个抽样单元由一个或多个个体组成</li><li>抽样单元是构成抽样框的基本要素</li><li>抽样单元常可以分级，最小的那级抽样单元称为<strong>基本抽样单元</strong><ul><li>总体先分为若干个较大规模的抽样单元，称为<strong>初级（抽样）单元</strong>或<strong>一级（抽样）单元</strong>（primary sampling unit）</li><li>每个初级单元又可包含若干个规模较小的单元，称为<strong>次级单元</strong>或<strong>二级单元</strong>（secondary sampling unit）</li><li>以此类推，可定义<strong>三级单元</strong>、<strong>四级单元</strong>等等</li></ul></li></ul><h2 id="抽样框"><a class="header-anchor" href="#抽样框"></a>抽样框</h2><p>抽样框（sampling frame）：包含所有抽样单元的名录或地图</p><ul><li>名录框：一份包含所有抽样单元的名单或清册</li><li>区域框/地域框：一份包含所有感兴趣的区域并对其组成部分有明确分界的地图</li></ul><blockquote><ul><li>抽样框实际上是抽样总体的一种表现形式，是有关所有抽样单元的一组信息</li></ul></blockquote><p><strong>好的抽样框</strong>的特征：</p><ul><li>抽样单元没有重复或遗漏</li><li>有关单元的信息准确</li><li>使用方便</li><li>编制或更新的费用低</li></ul><h2 id="样本"><a class="header-anchor" href="#样本"></a>样本</h2><p>样本（sample）：总体的一部分，由从总体中按一定程序抽得的那部分个体或抽样单元组成</p><ul><li>样本是一个集合</li><li><strong>入样单元</strong>：每个被抽中进入样本的单元</li><li><strong>样本量</strong>（sample size）：样本中包含的抽样单元数</li><li><strong>抽样比</strong>（sampling fraction）：样本量$n$与总体总单元数$N$的比值</li></ul><h1 id="基本抽样方法"><a class="header-anchor" href="#基本抽样方法"></a>基本抽样方法</h1><h2 id="简单随机抽样"><a class="header-anchor" href="#简单随机抽样"></a>简单随机抽样</h2><h2 id="分层抽样"><a class="header-anchor" href="#分层抽样"></a>分层抽样</h2><h2 id="整群抽样"><a class="header-anchor" href="#整群抽样"></a>整群抽样</h2><h2 id="多阶抽样"><a class="header-anchor" href="#多阶抽样"></a>多阶抽样</h2><h2 id="系统抽样"><a class="header-anchor" href="#系统抽样"></a>系统抽样</h2><h2 id="不等概率抽样"><a class="header-anchor" href="#不等概率抽样"></a>不等概率抽样</h2><h1 id="参考资料"><a class="header-anchor" href="#参考资料"></a>参考资料</h1><ul><li><a href="https://book.douban.com/subject/19979195/">冯士雍《抽样调查理论与方法》</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;center&gt;&lt;/center&gt;</summary>
    
    
    
    <category term="Statistics 统计学" scheme="https://github.com/ShootingWang/ShootingWang.github.io/categories/Statistics-%E7%BB%9F%E8%AE%A1%E5%AD%A6/"/>
    
    
    <category term="Survey Sampling 抽样调查" scheme="https://github.com/ShootingWang/ShootingWang.github.io/tags/Survey-Sampling-%E6%8A%BD%E6%A0%B7%E8%B0%83%E6%9F%A5/"/>
    
  </entry>
  
</feed>
